(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var yg={exports:{}},ku={};var ww;function xD(){if(ww)return ku;ww=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:e,type:r,key:c,ref:a!==void 0?a:null,props:l}}return ku.Fragment=t,ku.jsx=n,ku.jsxs=n,ku}var bw;function ID(){return bw||(bw=1,yg.exports=xD()),yg.exports}var O=ID(),vg={exports:{}},At={};var Sw;function DD(){if(Sw)return At;Sw=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),E=Symbol.iterator;function A(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,x={};function V(F,it,lt){this.props=F,this.context=it,this.refs=x,this.updater=lt||D}V.prototype.isReactComponent={},V.prototype.setState=function(F,it){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,it,"setState")},V.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function P(){}P.prototype=V.prototype;function k(F,it,lt){this.props=F,this.context=it,this.refs=x,this.updater=lt||D}var K=k.prototype=new P;K.constructor=k,b(K,V.prototype),K.isPureReactComponent=!0;var q=Array.isArray;function Y(){}var R={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function N(F,it,lt){var ut=lt.ref;return{$$typeof:e,type:F,key:it,ref:ut!==void 0?ut:null,props:lt}}function U(F,it){return N(F.type,it,F.props)}function B(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function H(F){var it={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(lt){return it[lt]})}var L=/\/+/g;function Xt(F,it){return typeof F=="object"&&F!==null&&F.key!=null?H(""+F.key):it.toString(36)}function he(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(Y,Y):(F.status="pending",F.then(function(it){F.status==="pending"&&(F.status="fulfilled",F.value=it)},function(it){F.status==="pending"&&(F.status="rejected",F.reason=it)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function tt(F,it,lt,ut,gt){var Et=typeof F;(Et==="undefined"||Et==="boolean")&&(F=null);var Ot=!1;if(F===null)Ot=!0;else switch(Et){case"bigint":case"string":case"number":Ot=!0;break;case"object":switch(F.$$typeof){case e:case t:Ot=!0;break;case y:return Ot=F._init,tt(Ot(F._payload),it,lt,ut,gt)}}if(Ot)return gt=gt(F),Ot=ut===""?"."+Xt(F,0):ut,q(gt)?(lt="",Ot!=null&&(lt=Ot.replace(L,"$&/")+"/"),tt(gt,it,lt,"",function(Ci){return Ci})):gt!=null&&(B(gt)&&(gt=U(gt,lt+(gt.key==null||F&&F.key===gt.key?"":(""+gt.key).replace(L,"$&/")+"/")+Ot)),it.push(gt)),1;Ot=0;var Ge=ut===""?".":ut+":";if(q(F))for(var fe=0;fe<F.length;fe++)ut=F[fe],Et=Ge+Xt(ut,fe),Ot+=tt(ut,it,lt,Et,gt);else if(fe=A(F),typeof fe=="function")for(F=fe.call(F),fe=0;!(ut=F.next()).done;)ut=ut.value,Et=Ge+Xt(ut,fe++),Ot+=tt(ut,it,lt,Et,gt);else if(Et==="object"){if(typeof F.then=="function")return tt(he(F),it,lt,ut,gt);throw it=String(F),Error("Objects are not valid as a React child (found: "+(it==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":it)+"). If you meant to render a collection of children, use an array instead.")}return Ot}function ot(F,it,lt){if(F==null)return F;var ut=[],gt=0;return tt(F,ut,"","",function(Et){return it.call(lt,Et,gt++)}),ut}function ft(F){if(F._status===-1){var it=F._result;it=it(),it.then(function(lt){(F._status===0||F._status===-1)&&(F._status=1,F._result=lt)},function(lt){(F._status===0||F._status===-1)&&(F._status=2,F._result=lt)}),F._status===-1&&(F._status=0,F._result=it)}if(F._status===1)return F._result.default;throw F._result}var It=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var it=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(it))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Dt={map:ot,forEach:function(F,it,lt){ot(F,function(){it.apply(this,arguments)},lt)},count:function(F){var it=0;return ot(F,function(){it++}),it},toArray:function(F){return ot(F,function(it){return it})||[]},only:function(F){if(!B(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return At.Activity=_,At.Children=Dt,At.Component=V,At.Fragment=n,At.Profiler=a,At.PureComponent=k,At.StrictMode=r,At.Suspense=d,At.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,At.__COMPILER_RUNTIME={__proto__:null,c:function(F){return R.H.useMemoCache(F)}},At.cache=function(F){return function(){return F.apply(null,arguments)}},At.cacheSignal=function(){return null},At.cloneElement=function(F,it,lt){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ut=b({},F.props),gt=F.key;if(it!=null)for(Et in it.key!==void 0&&(gt=""+it.key),it)!S.call(it,Et)||Et==="key"||Et==="__self"||Et==="__source"||Et==="ref"&&it.ref===void 0||(ut[Et]=it[Et]);var Et=arguments.length-2;if(Et===1)ut.children=lt;else if(1<Et){for(var Ot=Array(Et),Ge=0;Ge<Et;Ge++)Ot[Ge]=arguments[Ge+2];ut.children=Ot}return N(F.type,gt,ut)},At.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},At.createElement=function(F,it,lt){var ut,gt={},Et=null;if(it!=null)for(ut in it.key!==void 0&&(Et=""+it.key),it)S.call(it,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(gt[ut]=it[ut]);var Ot=arguments.length-2;if(Ot===1)gt.children=lt;else if(1<Ot){for(var Ge=Array(Ot),fe=0;fe<Ot;fe++)Ge[fe]=arguments[fe+2];gt.children=Ge}if(F&&F.defaultProps)for(ut in Ot=F.defaultProps,Ot)gt[ut]===void 0&&(gt[ut]=Ot[ut]);return N(F,Et,gt)},At.createRef=function(){return{current:null}},At.forwardRef=function(F){return{$$typeof:f,render:F}},At.isValidElement=B,At.lazy=function(F){return{$$typeof:y,_payload:{_status:-1,_result:F},_init:ft}},At.memo=function(F,it){return{$$typeof:p,type:F,compare:it===void 0?null:it}},At.startTransition=function(F){var it=R.T,lt={};R.T=lt;try{var ut=F(),gt=R.S;gt!==null&&gt(lt,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(Y,It)}catch(Et){It(Et)}finally{it!==null&&lt.types!==null&&(it.types=lt.types),R.T=it}},At.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},At.use=function(F){return R.H.use(F)},At.useActionState=function(F,it,lt){return R.H.useActionState(F,it,lt)},At.useCallback=function(F,it){return R.H.useCallback(F,it)},At.useContext=function(F){return R.H.useContext(F)},At.useDebugValue=function(){},At.useDeferredValue=function(F,it){return R.H.useDeferredValue(F,it)},At.useEffect=function(F,it){return R.H.useEffect(F,it)},At.useEffectEvent=function(F){return R.H.useEffectEvent(F)},At.useId=function(){return R.H.useId()},At.useImperativeHandle=function(F,it,lt){return R.H.useImperativeHandle(F,it,lt)},At.useInsertionEffect=function(F,it){return R.H.useInsertionEffect(F,it)},At.useLayoutEffect=function(F,it){return R.H.useLayoutEffect(F,it)},At.useMemo=function(F,it){return R.H.useMemo(F,it)},At.useOptimistic=function(F,it){return R.H.useOptimistic(F,it)},At.useReducer=function(F,it,lt){return R.H.useReducer(F,it,lt)},At.useRef=function(F){return R.H.useRef(F)},At.useState=function(F){return R.H.useState(F)},At.useSyncExternalStore=function(F,it,lt){return R.H.useSyncExternalStore(F,it,lt)},At.useTransition=function(){return R.H.useTransition()},At.version="19.2.0",At}var Aw;function nv(){return Aw||(Aw=1,vg.exports=DD()),vg.exports}var M=nv(),_g={exports:{}},Pu={},Tg={exports:{}},Eg={};var Rw;function ND(){return Rw||(Rw=1,(function(e){function t(tt,ot){var ft=tt.length;tt.push(ot);t:for(;0<ft;){var It=ft-1>>>1,Dt=tt[It];if(0<a(Dt,ot))tt[It]=ot,tt[ft]=Dt,ft=It;else break t}}function n(tt){return tt.length===0?null:tt[0]}function r(tt){if(tt.length===0)return null;var ot=tt[0],ft=tt.pop();if(ft!==ot){tt[0]=ft;t:for(var It=0,Dt=tt.length,F=Dt>>>1;It<F;){var it=2*(It+1)-1,lt=tt[it],ut=it+1,gt=tt[ut];if(0>a(lt,ft))ut<Dt&&0>a(gt,lt)?(tt[It]=gt,tt[ut]=ft,It=ut):(tt[It]=lt,tt[it]=ft,It=it);else if(ut<Dt&&0>a(gt,ft))tt[It]=gt,tt[ut]=ft,It=ut;else break t}}return ot}function a(tt,ot){var ft=tt.sortIndex-ot.sortIndex;return ft!==0?ft:tt.id-ot.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();e.unstable_now=function(){return c.now()-f}}var d=[],p=[],y=1,_=null,E=3,A=!1,D=!1,b=!1,x=!1,V=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function K(tt){for(var ot=n(p);ot!==null;){if(ot.callback===null)r(p);else if(ot.startTime<=tt)r(p),ot.sortIndex=ot.expirationTime,t(d,ot);else break;ot=n(p)}}function q(tt){if(b=!1,K(tt),!D)if(n(d)!==null)D=!0,Y||(Y=!0,H());else{var ot=n(p);ot!==null&&he(q,ot.startTime-tt)}}var Y=!1,R=-1,S=5,N=-1;function U(){return x?!0:!(e.unstable_now()-N<S)}function B(){if(x=!1,Y){var tt=e.unstable_now();N=tt;var ot=!0;try{t:{D=!1,b&&(b=!1,P(R),R=-1),A=!0;var ft=E;try{e:{for(K(tt),_=n(d);_!==null&&!(_.expirationTime>tt&&U());){var It=_.callback;if(typeof It=="function"){_.callback=null,E=_.priorityLevel;var Dt=It(_.expirationTime<=tt);if(tt=e.unstable_now(),typeof Dt=="function"){_.callback=Dt,K(tt),ot=!0;break e}_===n(d)&&r(d),K(tt)}else r(d);_=n(d)}if(_!==null)ot=!0;else{var F=n(p);F!==null&&he(q,F.startTime-tt),ot=!1}}break t}finally{_=null,E=ft,A=!1}ot=void 0}}finally{ot?H():Y=!1}}}var H;if(typeof k=="function")H=function(){k(B)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,Xt=L.port2;L.port1.onmessage=B,H=function(){Xt.postMessage(null)}}else H=function(){V(B,0)};function he(tt,ot){R=V(function(){tt(e.unstable_now())},ot)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(tt){tt.callback=null},e.unstable_forceFrameRate=function(tt){0>tt||125<tt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<tt?Math.floor(1e3/tt):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_next=function(tt){switch(E){case 1:case 2:case 3:var ot=3;break;default:ot=E}var ft=E;E=ot;try{return tt()}finally{E=ft}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(tt,ot){switch(tt){case 1:case 2:case 3:case 4:case 5:break;default:tt=3}var ft=E;E=tt;try{return ot()}finally{E=ft}},e.unstable_scheduleCallback=function(tt,ot,ft){var It=e.unstable_now();switch(typeof ft=="object"&&ft!==null?(ft=ft.delay,ft=typeof ft=="number"&&0<ft?It+ft:It):ft=It,tt){case 1:var Dt=-1;break;case 2:Dt=250;break;case 5:Dt=1073741823;break;case 4:Dt=1e4;break;default:Dt=5e3}return Dt=ft+Dt,tt={id:y++,callback:ot,priorityLevel:tt,startTime:ft,expirationTime:Dt,sortIndex:-1},ft>It?(tt.sortIndex=ft,t(p,tt),n(d)===null&&tt===n(p)&&(b?(P(R),R=-1):b=!0,he(q,ft-It))):(tt.sortIndex=Dt,t(d,tt),D||A||(D=!0,Y||(Y=!0,H()))),tt},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(tt){var ot=E;return function(){var ft=E;E=ot;try{return tt.apply(this,arguments)}finally{E=ft}}}})(Eg)),Eg}var Cw;function MD(){return Cw||(Cw=1,Tg.exports=ND()),Tg.exports}var wg={exports:{}},an={};var xw;function OD(){if(xw)return an;xw=1;var e=nv();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,p,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:d,containerInfo:p,implementation:y}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,an.createPortal=function(d,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return l(d,p,null,y)},an.flushSync=function(d){var p=c.T,y=r.p;try{if(c.T=null,r.p=2,d)return d()}finally{c.T=p,r.p=y,r.d.f()}},an.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(d,p))},an.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},an.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:E,fetchPriority:A}):y==="script"&&r.d.X(d,{crossOrigin:_,integrity:E,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},an.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);r.d.M(d,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(d)},an.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin);r.d.L(d,y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},an.preloadModule=function(d,p){if(typeof d=="string")if(p){var y=f(p.as,p.crossOrigin);r.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(d)},an.requestFormReset=function(d){r.d.r(d)},an.unstable_batchedUpdates=function(d,p){return d(p)},an.useFormState=function(d,p,y){return c.H.useFormState(d,p,y)},an.useFormStatus=function(){return c.H.useHostTransitionStatus()},an.version="19.2.0",an}var Iw;function VD(){if(Iw)return wg.exports;Iw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),wg.exports=OD(),wg.exports}var Dw;function kD(){if(Dw)return Pu;Dw=1;var e=MD(),t=nv(),n=VD();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,o=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(o=s.return),i=s.return;while(i)}return s.tag===3?o:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function f(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function d(i){if(l(i)!==i)throw Error(r(188))}function p(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var o=i,u=s;;){var m=o.return;if(m===null)break;var g=m.alternate;if(g===null){if(u=m.return,u!==null){o=u;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===o)return d(m),i;if(g===u)return d(m),s;g=g.sibling}throw Error(r(188))}if(o.return!==u.return)o=m,u=g;else{for(var T=!1,C=m.child;C;){if(C===o){T=!0,o=m,u=g;break}if(C===u){T=!0,u=m,o=g;break}C=C.sibling}if(!T){for(C=g.child;C;){if(C===o){T=!0,o=g,u=m;break}if(C===u){T=!0,u=g,o=m;break}C=C.sibling}if(!T)throw Error(r(189))}}if(o.alternate!==u)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:s}function y(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=y(i),s!==null)return s;i=i.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),P=Symbol.for("react.consumer"),k=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function H(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var L=Symbol.for("react.client.reference");function Xt(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===L?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case b:return"Fragment";case V:return"Profiler";case x:return"StrictMode";case q:return"Suspense";case Y:return"SuspenseList";case N:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case D:return"Portal";case k:return i.displayName||"Context";case P:return(i._context.displayName||"Context")+".Consumer";case K:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case R:return s=i.displayName||null,s!==null?s:Xt(i.type)||"Memo";case S:s=i._payload,i=i._init;try{return Xt(i(s))}catch{}}return null}var he=Array.isArray,tt=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ft={pending:!1,data:null,method:null,action:null},It=[],Dt=-1;function F(i){return{current:i}}function it(i){0>Dt||(i.current=It[Dt],It[Dt]=null,Dt--)}function lt(i,s){Dt++,It[Dt]=i.current,i.current=s}var ut=F(null),gt=F(null),Et=F(null),Ot=F(null);function Ge(i,s){switch(lt(Et,s),lt(gt,i),lt(ut,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?GE(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=GE(s),i=KE(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}it(ut),lt(ut,i)}function fe(){it(ut),it(gt),it(Et)}function Ci(i){i.memoizedState!==null&&lt(Ot,i);var s=ut.current,o=KE(s,i.type);s!==o&&(lt(gt,i),lt(ut,o))}function Ji(i){gt.current===i&&(it(ut),it(gt)),Ot.current===i&&(it(Ot),Nu._currentValue=ft)}var na,oo;function fi(i){if(na===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);na=s&&s[1]||"",oo=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+na+i+oo}var ia=!1;function lo(i,s){if(!i||ia)return"";ia=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(Z){var W=Z}Reflect.construct(i,[],st)}else{try{st.call()}catch(Z){W=Z}i.call(st.prototype)}}else{try{throw Error()}catch(Z){W=Z}(st=i())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),T=g[0],C=g[1];if(T&&C){var j=T.split(`
`),X=C.split(`
`);for(m=u=0;u<j.length&&!j[u].includes("DetermineComponentFrameRoot");)u++;for(;m<X.length&&!X[m].includes("DetermineComponentFrameRoot");)m++;if(u===j.length||m===X.length)for(u=j.length-1,m=X.length-1;1<=u&&0<=m&&j[u]!==X[m];)m--;for(;1<=u&&0<=m;u--,m--)if(j[u]!==X[m]){if(u!==1||m!==1)do if(u--,m--,0>m||j[u]!==X[m]){var et=`
`+j[u].replace(" at new "," at ");return i.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",i.displayName)),et}while(1<=u&&0<=m);break}}}finally{ia=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?fi(o):""}function mm(i,s){switch(i.tag){case 26:case 27:case 5:return fi(i.type);case 16:return fi("Lazy");case 13:return i.child!==s&&s!==null?fi("Suspense Fallback"):fi("Suspense");case 19:return fi("SuspenseList");case 0:case 15:return lo(i.type,!1);case 11:return lo(i.type.render,!1);case 1:return lo(i.type,!0);case 31:return fi("Activity");default:return""}}function Gc(i){try{var s="",o=null;do s+=mm(i,o),o=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var uo=Object.prototype.hasOwnProperty,ra=e.unstable_scheduleCallback,co=e.unstable_cancelCallback,pm=e.unstable_shouldYield,Vl=e.unstable_requestPaint,Ke=e.unstable_now,Kc=e.unstable_getCurrentPriorityLevel,Pe=e.unstable_ImmediatePriority,je=e.unstable_UserBlockingPriority,tr=e.unstable_NormalPriority,$c=e.unstable_LowPriority,kl=e.unstable_IdlePriority,gm=e.log,sa=e.unstable_setDisableYieldValue,Fr=null,rn=null;function Yn(i){if(typeof gm=="function"&&sa(i),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(Fr,i)}catch{}}var mn=Math.clz32?Math.clz32:Yc,ym=Math.log,Pl=Math.LN2;function Yc(i){return i>>>=0,i===0?32:31-(ym(i)/Pl|0)|0}var aa=256,xi=262144,Hr=4194304;function di(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Qn(i,s,o){var u=i.pendingLanes;if(u===0)return 0;var m=0,g=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var C=u&134217727;return C!==0?(u=C&~g,u!==0?m=di(u):(T&=C,T!==0?m=di(T):o||(o=C&~i,o!==0&&(m=di(o))))):(C=u&~g,C!==0?m=di(C):T!==0?m=di(T):o||(o=u&~i,o!==0&&(m=di(o)))),m===0?0:s!==0&&s!==m&&(s&g)===0&&(g=m&-m,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:m}function qr(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function ho(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ll(){var i=Hr;return Hr<<=1,(Hr&62914560)===0&&(Hr=4194304),i}function er(i){for(var s=[],o=0;31>o;o++)s.push(i);return s}function Gr(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function $e(i,s,o,u,m,g){var T=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var C=i.entanglements,j=i.expirationTimes,X=i.hiddenUpdates;for(o=T&~o;0<o;){var et=31-mn(o),st=1<<et;C[et]=0,j[et]=-1;var W=X[et];if(W!==null)for(X[et]=null,et=0;et<W.length;et++){var Z=W[et];Z!==null&&(Z.lane&=-536870913)}o&=~st}u!==0&&Ul(i,u,0),g!==0&&m===0&&i.tag!==0&&(i.suspendedLanes|=g&~(T&~s))}function Ul(i,s,o){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-mn(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|o&261930}function Kr(i,s){var o=i.entangledLanes|=s;for(i=i.entanglements;o;){var u=31-mn(o),m=1<<u;m&s|i[u]&s&&(i[u]|=s),o&=~m}}function $r(i,s){var o=s&-s;return o=(o&42)!==0?1:jl(o),(o&(i.suspendedLanes|s))!==0?0:o}function jl(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Bl(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function nr(){var i=ot.p;return i!==0?i:(i=window.event,i===void 0?32:pw(i.type))}function Qc(i,s){var o=ot.p;try{return ot.p=i,s()}finally{ot.p=o}}var Ii=Math.random().toString(36).slice(2),pe="__reactFiber$"+Ii,Ye="__reactProps$"+Ii,Di="__reactContainer$"+Ii,Yr="__reactEvents$"+Ii,Ni="__reactListeners$"+Ii,Xc="__reactHandles$"+Ii,zl="__reactResources$"+Ii,ir="__reactMarker$"+Ii;function oa(i){delete i[pe],delete i[Ye],delete i[Yr],delete i[Ni],delete i[Xc]}function rr(i){var s=i[pe];if(s)return s;for(var o=i.parentNode;o;){if(s=o[Di]||o[pe]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(i=JE(i);i!==null;){if(o=i[pe])return o;i=JE(i)}return s}i=o,o=i.parentNode}return null}function sr(i){if(i=i[pe]||i[Di]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function la(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function mi(i){var s=i[zl];return s||(s=i[zl]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function be(i){i[ir]=!0}var fo=new Set,Qr={};function pn(i,s){Mi(i,s),Mi(i+"Capture",s)}function Mi(i,s){for(Qr[i]=s,i=0;i<s.length;i++)fo.add(s[i])}var vm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fl={},Hl={};function Wc(i){return uo.call(Hl,i)?!0:uo.call(Fl,i)?!1:vm.test(i)?Hl[i]=!0:(Fl[i]=!0,!1)}function Xr(i,s,o){if(Wc(s))if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+o)}}function Wr(i,s,o){if(o===null)i.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+o)}}function Xn(i,s,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(s,o,""+u)}}function gn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Zc(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function _m(i,s,o){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,g=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return m.call(this)},set:function(T){o=""+T,g.call(this,T)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(T){o=""+T},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function mo(i){if(!i._valueTracker){var s=Zc(i)?"checked":"value";i._valueTracker=_m(i,s,""+i[s])}}function ql(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return i&&(u=Zc(i)?i.checked?"true":"false":i.value),i=u,i!==o?(s.setValue(i),!0):!1}function po(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ar=/[\n"\\]/g;function ge(i){return i.replace(ar,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Zr(i,s,o,u,m,g,T,C){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),s!=null?T==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+gn(s)):i.value!==""+gn(s)&&(i.value=""+gn(s)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),s!=null?go(i,T,gn(s)):o!=null?go(i,T,gn(o)):u!=null&&i.removeAttribute("value"),m==null&&g!=null&&(i.defaultChecked=!!g),m!=null&&(i.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+gn(C):i.removeAttribute("name")}function ua(i,s,o,u,m,g,T,C){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){mo(i);return}o=o!=null?""+gn(o):"",s=s!=null?""+gn(s):o,C||s===i.value||(i.value=s),i.defaultValue=s}u=u??m,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=C?i.checked:!!u,i.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),mo(i)}function go(i,s,o){s==="number"&&po(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Ft(i,s,o,u){if(i=i.options,s){s={};for(var m=0;m<o.length;m++)s["$"+o[m]]=!0;for(o=0;o<i.length;o++)m=s.hasOwnProperty("$"+i[o].value),i[o].selected!==m&&(i[o].selected=m),m&&u&&(i[o].defaultSelected=!0)}else{for(o=""+gn(o),s=null,m=0;m<i.length;m++){if(i[m].value===o){i[m].selected=!0,u&&(i[m].defaultSelected=!0);return}s!==null||i[m].disabled||(s=i[m])}s!==null&&(s.selected=!0)}}function ca(i,s,o){if(s!=null&&(s=""+gn(s),s!==i.value&&(i.value=s),o==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=o!=null?""+gn(o):""}function Jr(i,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(r(92));if(he(u)){if(1<u.length)throw Error(r(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=gn(s),i.defaultValue=o,u=i.textContent,u===o&&u!==""&&u!==null&&(i.value=u),mo(i)}function Wn(i,s){if(s){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=s;return}}i.textContent=s}var Tm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gl(i,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,o):typeof o!="number"||o===0||Tm.has(s)?s==="float"?i.cssFloat=o:i[s]=(""+o).trim():i[s]=o+"px"}function Jc(i,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var m in s)u=s[m],s.hasOwnProperty(m)&&o[m]!==u&&Gl(i,m,u)}else for(var g in s)s.hasOwnProperty(g)&&Gl(i,g,s[g])}function Kl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Em=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oi(i){return wm.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Be(){}var yo=null;function vo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var or=null,Vn=null;function th(i){var s=sr(i);if(s&&(i=s.stateNode)){var o=i[Ye]||null;t:switch(i=s.stateNode,s.type){case"input":if(Zr(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+ge(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==i&&u.form===i.form){var m=u[Ye]||null;if(!m)throw Error(r(90));Zr(u,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===i.form&&ql(u)}break t;case"textarea":ca(i,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&Ft(i,!!o.multiple,s,!1)}}}var $l=!1;function eh(i,s,o){if($l)return i(s,o);$l=!0;try{var u=i(s);return u}finally{if($l=!1,(or!==null||Vn!==null)&&(Wh(),or&&(s=or,i=Vn,Vn=or=null,th(s),i)))for(s=0;s<i.length;s++)th(i[s])}}function En(i,s){var o=i.stateNode;if(o===null)return null;var u=o[Ye]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yl=!1;if(pi)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){Yl=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{Yl=!1}var kn=null,_o=null,ki=null;function ts(){if(ki)return ki;var i,s=_o,o=s.length,u,m="value"in kn?kn.value:kn.textContent,g=m.length;for(i=0;i<o&&s[i]===m[i];i++);var T=o-i;for(u=1;u<=T&&s[o-u]===m[g-u];u++);return ki=m.slice(i,1<u?1-u:void 0)}function ha(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function es(){return!0}function ne(){return!1}function sn(i){function s(o,u,m,g,T){this._reactName=o,this._targetInst=m,this.type=u,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(o=i[C],this[C]=o?o(g):g[C]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?es:ne,this.isPropagationStopped=ne,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=es)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=es)},persist:function(){},isPersistent:es}),s}var lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fa=sn(lr),ns=_({},lr,{view:0,detail:0}),nh=sn(ns),is,To,yn,da=_({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ss,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yn&&(yn&&i.type==="mousemove"?(is=i.screenX-yn.screenX,To=i.screenY-yn.screenY):To=is=0,yn=i),is)},movementY:function(i){return"movementY"in i?i.movementY:To}}),ih=sn(da),ma=_({},da,{dataTransfer:0}),rh=sn(ma),Ql=_({},ns,{relatedTarget:0}),rs=sn(Ql),sh=_({},lr,{animationName:0,elapsedTime:0,pseudoElement:0}),Eo=sn(sh),bm=_({},lr,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ah=sn(bm),pa=_({},lr,{data:0}),Xl=sn(pa),oh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lh(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=Zl[i])?!!s[i]:!1}function ss(){return lh}var uh=_({},ns,{key:function(i){if(i.key){var s=oh[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ha(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Wl[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ss,charCode:function(i){return i.type==="keypress"?ha(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ha(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ch=sn(uh),ur=_({},da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jl=sn(ur),hh=_({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ss}),fh=sn(hh),dh=_({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),wo=sn(dh),vn=_({},da,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),mh=sn(vn),ph=_({},lr,{newState:0,oldState:0}),as=sn(ph),h=[9,13,27,32],v=pi&&"CompositionEvent"in window,w=null;pi&&"documentMode"in document&&(w=document.documentMode);var I=pi&&"TextEvent"in window&&!w,$=pi&&(!v||w&&8<w&&11>=w),J=" ",ct=!1;function Kt(i,s){switch(i){case"keyup":return h.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xe(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Nt=!1;function ze(i,s){switch(i){case"compositionend":return xe(s);case"keypress":return s.which!==32?null:(ct=!0,J);case"textInput":return i=s.data,i===J&&ct?null:i;default:return null}}function Fe(i,s){if(Nt)return i==="compositionend"||!v&&Kt(i,s)?(i=ts(),ki=_o=kn=null,Nt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return $&&s.locale!=="ko"?null:s.data;default:return null}}var os={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wn(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!os[i.type]:s==="textarea"}function ga(i,s,o,u){or?Vn?Vn.push(u):Vn=[u]:or=u,s=sf(s,"onChange"),0<s.length&&(o=new fa("onChange","change",null,o,u),i.push({event:o,listeners:s}))}var cr=null,tu=null;function eI(i){jE(i,0)}function gh(i){var s=la(i);if(ql(s))return i}function r_(i,s){if(i==="change")return s}var s_=!1;if(pi){var Sm;if(pi){var Am="oninput"in document;if(!Am){var a_=document.createElement("div");a_.setAttribute("oninput","return;"),Am=typeof a_.oninput=="function"}Sm=Am}else Sm=!1;s_=Sm&&(!document.documentMode||9<document.documentMode)}function o_(){cr&&(cr.detachEvent("onpropertychange",l_),tu=cr=null)}function l_(i){if(i.propertyName==="value"&&gh(tu)){var s=[];ga(s,tu,i,vo(i)),eh(eI,s)}}function nI(i,s,o){i==="focusin"?(o_(),cr=s,tu=o,cr.attachEvent("onpropertychange",l_)):i==="focusout"&&o_()}function iI(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return gh(tu)}function rI(i,s){if(i==="click")return gh(s)}function sI(i,s){if(i==="input"||i==="change")return gh(s)}function aI(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Pn=typeof Object.is=="function"?Object.is:aI;function eu(i,s){if(Pn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var o=Object.keys(i),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var m=o[u];if(!uo.call(s,m)||!Pn(i[m],s[m]))return!1}return!0}function u_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function c_(i,s){var o=u_(i);i=0;for(var u;o;){if(o.nodeType===3){if(u=i+o.textContent.length,i<=s&&u>=s)return{node:o,offset:s-i};i=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=u_(o)}}function h_(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?h_(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function f_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=po(i.document);s instanceof i.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)i=s.contentWindow;else break;s=po(i.document)}return s}function Rm(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var oI=pi&&"documentMode"in document&&11>=document.documentMode,bo=null,Cm=null,nu=null,xm=!1;function d_(i,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;xm||bo==null||bo!==po(u)||(u=bo,"selectionStart"in u&&Rm(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),nu&&eu(nu,u)||(nu=u,u=sf(Cm,"onSelect"),0<u.length&&(s=new fa("onSelect","select",null,s,o),i.push({event:s,listeners:u}),s.target=bo)))}function ya(i,s){var o={};return o[i.toLowerCase()]=s.toLowerCase(),o["Webkit"+i]="webkit"+s,o["Moz"+i]="moz"+s,o}var So={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionrun:ya("Transition","TransitionRun"),transitionstart:ya("Transition","TransitionStart"),transitioncancel:ya("Transition","TransitionCancel"),transitionend:ya("Transition","TransitionEnd")},Im={},m_={};pi&&(m_=document.createElement("div").style,"AnimationEvent"in window||(delete So.animationend.animation,delete So.animationiteration.animation,delete So.animationstart.animation),"TransitionEvent"in window||delete So.transitionend.transition);function va(i){if(Im[i])return Im[i];if(!So[i])return i;var s=So[i],o;for(o in s)if(s.hasOwnProperty(o)&&o in m_)return Im[i]=s[o];return i}var p_=va("animationend"),g_=va("animationiteration"),y_=va("animationstart"),lI=va("transitionrun"),uI=va("transitionstart"),cI=va("transitioncancel"),v_=va("transitionend"),__=new Map,Dm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dm.push("scrollEnd");function gi(i,s){__.set(i,s),pn(s,[i])}var yh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Zn=[],Ao=0,Nm=0;function vh(){for(var i=Ao,s=Nm=Ao=0;s<i;){var o=Zn[s];Zn[s++]=null;var u=Zn[s];Zn[s++]=null;var m=Zn[s];Zn[s++]=null;var g=Zn[s];if(Zn[s++]=null,u!==null&&m!==null){var T=u.pending;T===null?m.next=m:(m.next=T.next,T.next=m),u.pending=m}g!==0&&T_(o,m,g)}}function _h(i,s,o,u){Zn[Ao++]=i,Zn[Ao++]=s,Zn[Ao++]=o,Zn[Ao++]=u,Nm|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function Mm(i,s,o,u){return _h(i,s,o,u),Th(i)}function _a(i,s){return _h(i,null,null,s),Th(i)}function T_(i,s,o){i.lanes|=o;var u=i.alternate;u!==null&&(u.lanes|=o);for(var m=!1,g=i.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(m=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,m&&s!==null&&(m=31-mn(o),i=g.hiddenUpdates,u=i[m],u===null?i[m]=[s]:u.push(s),s.lane=o|536870912),g):null}function Th(i){if(50<Su)throw Su=0,zp=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Ro={};function hI(i,s,o,u){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(i,s,o,u){return new hI(i,s,o,u)}function Om(i){return i=i.prototype,!(!i||!i.isReactComponent)}function hr(i,s){var o=i.alternate;return o===null?(o=Ln(i.tag,s,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=s,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,s=i.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function E_(i,s){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,s=o.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Eh(i,s,o,u,m,g){var T=0;if(u=i,typeof i=="function")Om(i)&&(T=1);else if(typeof i=="string")T=gD(i,o,ut.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case N:return i=Ln(31,o,s,m),i.elementType=N,i.lanes=g,i;case b:return Ta(o.children,m,g,s);case x:T=8,m|=24;break;case V:return i=Ln(12,o,s,m|2),i.elementType=V,i.lanes=g,i;case q:return i=Ln(13,o,s,m),i.elementType=q,i.lanes=g,i;case Y:return i=Ln(19,o,s,m),i.elementType=Y,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case k:T=10;break t;case P:T=9;break t;case K:T=11;break t;case R:T=14;break t;case S:T=16,u=null;break t}T=29,o=Error(r(130,i===null?"null":typeof i,"")),u=null}return s=Ln(T,o,s,m),s.elementType=i,s.type=u,s.lanes=g,s}function Ta(i,s,o,u){return i=Ln(7,i,u,s),i.lanes=o,i}function Vm(i,s,o){return i=Ln(6,i,null,s),i.lanes=o,i}function w_(i){var s=Ln(18,null,null,0);return s.stateNode=i,s}function km(i,s,o){return s=Ln(4,i.children!==null?i.children:[],i.key,s),s.lanes=o,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var b_=new WeakMap;function Jn(i,s){if(typeof i=="object"&&i!==null){var o=b_.get(i);return o!==void 0?o:(s={value:i,source:s,stack:Gc(s)},b_.set(i,s),s)}return{value:i,source:s,stack:Gc(s)}}var Co=[],xo=0,wh=null,iu=0,ti=[],ei=0,ls=null,Pi=1,Li="";function fr(i,s){Co[xo++]=iu,Co[xo++]=wh,wh=i,iu=s}function S_(i,s,o){ti[ei++]=Pi,ti[ei++]=Li,ti[ei++]=ls,ls=i;var u=Pi;i=Li;var m=32-mn(u)-1;u&=~(1<<m),o+=1;var g=32-mn(s)+m;if(30<g){var T=m-m%5;g=(u&(1<<T)-1).toString(32),u>>=T,m-=T,Pi=1<<32-mn(s)+m|o<<m|u,Li=g+i}else Pi=1<<g|o<<m|u,Li=i}function Pm(i){i.return!==null&&(fr(i,1),S_(i,1,0))}function Lm(i){for(;i===wh;)wh=Co[--xo],Co[xo]=null,iu=Co[--xo],Co[xo]=null;for(;i===ls;)ls=ti[--ei],ti[ei]=null,Li=ti[--ei],ti[ei]=null,Pi=ti[--ei],ti[ei]=null}function A_(i,s){ti[ei++]=Pi,ti[ei++]=Li,ti[ei++]=ls,Pi=s.id,Li=s.overflow,ls=i}var Qe=null,ie=null,Bt=!1,us=null,ni=!1,Um=Error(r(519));function cs(i){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ru(Jn(s,i)),Um}function R_(i){var s=i.stateNode,o=i.type,u=i.memoizedProps;switch(s[pe]=i,s[Ye]=u,o){case"dialog":kt("cancel",s),kt("close",s);break;case"iframe":case"object":case"embed":kt("load",s);break;case"video":case"audio":for(o=0;o<Ru.length;o++)kt(Ru[o],s);break;case"source":kt("error",s);break;case"img":case"image":case"link":kt("error",s),kt("load",s);break;case"details":kt("toggle",s);break;case"input":kt("invalid",s),ua(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":kt("invalid",s);break;case"textarea":kt("invalid",s),Jr(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||HE(s.textContent,o)?(u.popover!=null&&(kt("beforetoggle",s),kt("toggle",s)),u.onScroll!=null&&kt("scroll",s),u.onScrollEnd!=null&&kt("scrollend",s),u.onClick!=null&&(s.onclick=Be),s=!0):s=!1,s||cs(i,!0)}function C_(i){for(Qe=i.return;Qe;)switch(Qe.tag){case 5:case 31:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:Qe=Qe.return}}function Io(i){if(i!==Qe)return!1;if(!Bt)return C_(i),Bt=!0,!1;var s=i.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||ng(i.type,i.memoizedProps)),o=!o),o&&ie&&cs(i),C_(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));ie=ZE(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));ie=ZE(i)}else s===27?(s=ie,Ss(i.type)?(i=og,og=null,ie=i):ie=s):ie=Qe?ri(i.stateNode.nextSibling):null;return!0}function Ea(){ie=Qe=null,Bt=!1}function jm(){var i=us;return i!==null&&(Rn===null?Rn=i:Rn.push.apply(Rn,i),us=null),i}function ru(i){us===null?us=[i]:us.push(i)}var Bm=F(null),wa=null,dr=null;function hs(i,s,o){lt(Bm,s._currentValue),s._currentValue=o}function mr(i){i._currentValue=Bm.current,it(Bm)}function zm(i,s,o){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===o)break;i=i.return}}function Fm(i,s,o,u){var m=i.child;for(m!==null&&(m.return=i);m!==null;){var g=m.dependencies;if(g!==null){var T=m.child;g=g.firstContext;t:for(;g!==null;){var C=g;g=m;for(var j=0;j<s.length;j++)if(C.context===s[j]){g.lanes|=o,C=g.alternate,C!==null&&(C.lanes|=o),zm(g.return,o,i),u||(T=null);break t}g=C.next}}else if(m.tag===18){if(T=m.return,T===null)throw Error(r(341));T.lanes|=o,g=T.alternate,g!==null&&(g.lanes|=o),zm(T,o,i),T=null}else T=m.child;if(T!==null)T.return=m;else for(T=m;T!==null;){if(T===i){T=null;break}if(m=T.sibling,m!==null){m.return=T.return,T=m;break}T=T.return}m=T}}function Do(i,s,o,u){i=null;for(var m=s,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var T=m.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var C=m.type;Pn(m.pendingProps.value,T.value)||(i!==null?i.push(C):i=[C])}}else if(m===Ot.current){if(T=m.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(i!==null?i.push(Nu):i=[Nu])}m=m.return}i!==null&&Fm(s,i,o,u),s.flags|=262144}function bh(i){for(i=i.firstContext;i!==null;){if(!Pn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ba(i){wa=i,dr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Xe(i){return x_(wa,i)}function Sh(i,s){return wa===null&&ba(i),x_(i,s)}function x_(i,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},dr===null){if(i===null)throw Error(r(308));dr=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else dr=dr.next=s;return o}var fI=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(o,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(o){return o()})}},dI=e.unstable_scheduleCallback,mI=e.unstable_NormalPriority,Ie={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hm(){return{controller:new fI,data:new Map,refCount:0}}function su(i){i.refCount--,i.refCount===0&&dI(mI,function(){i.controller.abort()})}var au=null,qm=0,No=0,Mo=null;function pI(i,s){if(au===null){var o=au=[];qm=0,No=$p(),Mo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return qm++,s.then(I_,I_),s}function I_(){if(--qm===0&&au!==null){Mo!==null&&(Mo.status="fulfilled");var i=au;au=null,No=0,Mo=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function gI(i,s){var o=[],u={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var m=0;m<o.length;m++)(0,o[m])(s)},function(m){for(u.status="rejected",u.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),u}var D_=tt.S;tt.S=function(i,s){dE=Ke(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&pI(i,s),D_!==null&&D_(i,s)};var Sa=F(null);function Gm(){var i=Sa.current;return i!==null?i:te.pooledCache}function Ah(i,s){s===null?lt(Sa,Sa.current):lt(Sa,s.pool)}function N_(){var i=Gm();return i===null?null:{parent:Ie._currentValue,pool:i}}var Oo=Error(r(460)),Km=Error(r(474)),Rh=Error(r(542)),Ch={then:function(){}};function M_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function O_(i,s,o){switch(o=i[o],o===void 0?i.push(s):o!==s&&(s.then(Be,Be),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,k_(i),i;default:if(typeof s.status=="string")s.then(Be,Be);else{if(i=te,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=u}},function(u){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,k_(i),i}throw Ra=s,Oo}}function Aa(i){try{var s=i._init;return s(i._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ra=o,Oo):o}}var Ra=null;function V_(){if(Ra===null)throw Error(r(459));var i=Ra;return Ra=null,i}function k_(i){if(i===Oo||i===Rh)throw Error(r(483))}var Vo=null,ou=0;function xh(i){var s=ou;return ou+=1,Vo===null&&(Vo=[]),O_(Vo,i,s)}function lu(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Ih(i,s){throw s.$$typeof===E?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function P_(i){function s(G,z){if(i){var Q=G.deletions;Q===null?(G.deletions=[z],G.flags|=16):Q.push(z)}}function o(G,z){if(!i)return null;for(;z!==null;)s(G,z),z=z.sibling;return null}function u(G){for(var z=new Map;G!==null;)G.key!==null?z.set(G.key,G):z.set(G.index,G),G=G.sibling;return z}function m(G,z){return G=hr(G,z),G.index=0,G.sibling=null,G}function g(G,z,Q){return G.index=Q,i?(Q=G.alternate,Q!==null?(Q=Q.index,Q<z?(G.flags|=67108866,z):Q):(G.flags|=67108866,z)):(G.flags|=1048576,z)}function T(G){return i&&G.alternate===null&&(G.flags|=67108866),G}function C(G,z,Q,rt){return z===null||z.tag!==6?(z=Vm(Q,G.mode,rt),z.return=G,z):(z=m(z,Q),z.return=G,z)}function j(G,z,Q,rt){var vt=Q.type;return vt===b?et(G,z,Q.props.children,rt,Q.key):z!==null&&(z.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===S&&Aa(vt)===z.type)?(z=m(z,Q.props),lu(z,Q),z.return=G,z):(z=Eh(Q.type,Q.key,Q.props,null,G.mode,rt),lu(z,Q),z.return=G,z)}function X(G,z,Q,rt){return z===null||z.tag!==4||z.stateNode.containerInfo!==Q.containerInfo||z.stateNode.implementation!==Q.implementation?(z=km(Q,G.mode,rt),z.return=G,z):(z=m(z,Q.children||[]),z.return=G,z)}function et(G,z,Q,rt,vt){return z===null||z.tag!==7?(z=Ta(Q,G.mode,rt,vt),z.return=G,z):(z=m(z,Q),z.return=G,z)}function st(G,z,Q){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Vm(""+z,G.mode,Q),z.return=G,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case A:return Q=Eh(z.type,z.key,z.props,null,G.mode,Q),lu(Q,z),Q.return=G,Q;case D:return z=km(z,G.mode,Q),z.return=G,z;case S:return z=Aa(z),st(G,z,Q)}if(he(z)||H(z))return z=Ta(z,G.mode,Q,null),z.return=G,z;if(typeof z.then=="function")return st(G,xh(z),Q);if(z.$$typeof===k)return st(G,Sh(G,z),Q);Ih(G,z)}return null}function W(G,z,Q,rt){var vt=z!==null?z.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return vt!==null?null:C(G,z,""+Q,rt);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:return Q.key===vt?j(G,z,Q,rt):null;case D:return Q.key===vt?X(G,z,Q,rt):null;case S:return Q=Aa(Q),W(G,z,Q,rt)}if(he(Q)||H(Q))return vt!==null?null:et(G,z,Q,rt,null);if(typeof Q.then=="function")return W(G,z,xh(Q),rt);if(Q.$$typeof===k)return W(G,z,Sh(G,Q),rt);Ih(G,Q)}return null}function Z(G,z,Q,rt,vt){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return G=G.get(Q)||null,C(z,G,""+rt,vt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case A:return G=G.get(rt.key===null?Q:rt.key)||null,j(z,G,rt,vt);case D:return G=G.get(rt.key===null?Q:rt.key)||null,X(z,G,rt,vt);case S:return rt=Aa(rt),Z(G,z,Q,rt,vt)}if(he(rt)||H(rt))return G=G.get(Q)||null,et(z,G,rt,vt,null);if(typeof rt.then=="function")return Z(G,z,Q,xh(rt),vt);if(rt.$$typeof===k)return Z(G,z,Q,Sh(z,rt),vt);Ih(z,rt)}return null}function mt(G,z,Q,rt){for(var vt=null,Ht=null,pt=z,xt=z=0,Lt=null;pt!==null&&xt<Q.length;xt++){pt.index>xt?(Lt=pt,pt=null):Lt=pt.sibling;var qt=W(G,pt,Q[xt],rt);if(qt===null){pt===null&&(pt=Lt);break}i&&pt&&qt.alternate===null&&s(G,pt),z=g(qt,z,xt),Ht===null?vt=qt:Ht.sibling=qt,Ht=qt,pt=Lt}if(xt===Q.length)return o(G,pt),Bt&&fr(G,xt),vt;if(pt===null){for(;xt<Q.length;xt++)pt=st(G,Q[xt],rt),pt!==null&&(z=g(pt,z,xt),Ht===null?vt=pt:Ht.sibling=pt,Ht=pt);return Bt&&fr(G,xt),vt}for(pt=u(pt);xt<Q.length;xt++)Lt=Z(pt,G,xt,Q[xt],rt),Lt!==null&&(i&&Lt.alternate!==null&&pt.delete(Lt.key===null?xt:Lt.key),z=g(Lt,z,xt),Ht===null?vt=Lt:Ht.sibling=Lt,Ht=Lt);return i&&pt.forEach(function(Is){return s(G,Is)}),Bt&&fr(G,xt),vt}function _t(G,z,Q,rt){if(Q==null)throw Error(r(151));for(var vt=null,Ht=null,pt=z,xt=z=0,Lt=null,qt=Q.next();pt!==null&&!qt.done;xt++,qt=Q.next()){pt.index>xt?(Lt=pt,pt=null):Lt=pt.sibling;var Is=W(G,pt,qt.value,rt);if(Is===null){pt===null&&(pt=Lt);break}i&&pt&&Is.alternate===null&&s(G,pt),z=g(Is,z,xt),Ht===null?vt=Is:Ht.sibling=Is,Ht=Is,pt=Lt}if(qt.done)return o(G,pt),Bt&&fr(G,xt),vt;if(pt===null){for(;!qt.done;xt++,qt=Q.next())qt=st(G,qt.value,rt),qt!==null&&(z=g(qt,z,xt),Ht===null?vt=qt:Ht.sibling=qt,Ht=qt);return Bt&&fr(G,xt),vt}for(pt=u(pt);!qt.done;xt++,qt=Q.next())qt=Z(pt,G,xt,qt.value,rt),qt!==null&&(i&&qt.alternate!==null&&pt.delete(qt.key===null?xt:qt.key),z=g(qt,z,xt),Ht===null?vt=qt:Ht.sibling=qt,Ht=qt);return i&&pt.forEach(function(CD){return s(G,CD)}),Bt&&fr(G,xt),vt}function Jt(G,z,Q,rt){if(typeof Q=="object"&&Q!==null&&Q.type===b&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case A:t:{for(var vt=Q.key;z!==null;){if(z.key===vt){if(vt=Q.type,vt===b){if(z.tag===7){o(G,z.sibling),rt=m(z,Q.props.children),rt.return=G,G=rt;break t}}else if(z.elementType===vt||typeof vt=="object"&&vt!==null&&vt.$$typeof===S&&Aa(vt)===z.type){o(G,z.sibling),rt=m(z,Q.props),lu(rt,Q),rt.return=G,G=rt;break t}o(G,z);break}else s(G,z);z=z.sibling}Q.type===b?(rt=Ta(Q.props.children,G.mode,rt,Q.key),rt.return=G,G=rt):(rt=Eh(Q.type,Q.key,Q.props,null,G.mode,rt),lu(rt,Q),rt.return=G,G=rt)}return T(G);case D:t:{for(vt=Q.key;z!==null;){if(z.key===vt)if(z.tag===4&&z.stateNode.containerInfo===Q.containerInfo&&z.stateNode.implementation===Q.implementation){o(G,z.sibling),rt=m(z,Q.children||[]),rt.return=G,G=rt;break t}else{o(G,z);break}else s(G,z);z=z.sibling}rt=km(Q,G.mode,rt),rt.return=G,G=rt}return T(G);case S:return Q=Aa(Q),Jt(G,z,Q,rt)}if(he(Q))return mt(G,z,Q,rt);if(H(Q)){if(vt=H(Q),typeof vt!="function")throw Error(r(150));return Q=vt.call(Q),_t(G,z,Q,rt)}if(typeof Q.then=="function")return Jt(G,z,xh(Q),rt);if(Q.$$typeof===k)return Jt(G,z,Sh(G,Q),rt);Ih(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,z!==null&&z.tag===6?(o(G,z.sibling),rt=m(z,Q),rt.return=G,G=rt):(o(G,z),rt=Vm(Q,G.mode,rt),rt.return=G,G=rt),T(G)):o(G,z)}return function(G,z,Q,rt){try{ou=0;var vt=Jt(G,z,Q,rt);return Vo=null,vt}catch(pt){if(pt===Oo||pt===Rh)throw pt;var Ht=Ln(29,pt,null,G.mode);return Ht.lanes=rt,Ht.return=G,Ht}finally{}}}var Ca=P_(!0),L_=P_(!1),fs=!1;function $m(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ym(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ds(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ms(i,s,o){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Gt&2)!==0){var m=u.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),u.pending=s,s=Th(i),T_(i,null,o),s}return _h(i,u,s,o),Th(i)}function uu(i,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Kr(i,o)}}function Qm(i,s){var o=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var m=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?m=g=T:g=g.next=T,o=o.next}while(o!==null);g===null?m=g=s:g=g.next=s}else m=g=s;o={baseState:u.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=s:i.next=s,o.lastBaseUpdate=s}var Xm=!1;function cu(){if(Xm){var i=Mo;if(i!==null)throw i}}function hu(i,s,o,u){Xm=!1;var m=i.updateQueue;fs=!1;var g=m.firstBaseUpdate,T=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var j=C,X=j.next;j.next=null,T===null?g=X:T.next=X,T=j;var et=i.alternate;et!==null&&(et=et.updateQueue,C=et.lastBaseUpdate,C!==T&&(C===null?et.firstBaseUpdate=X:C.next=X,et.lastBaseUpdate=j))}if(g!==null){var st=m.baseState;T=0,et=X=j=null,C=g;do{var W=C.lane&-536870913,Z=W!==C.lane;if(Z?(Pt&W)===W:(u&W)===W){W!==0&&W===No&&(Xm=!0),et!==null&&(et=et.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var mt=i,_t=C;W=s;var Jt=o;switch(_t.tag){case 1:if(mt=_t.payload,typeof mt=="function"){st=mt.call(Jt,st,W);break t}st=mt;break t;case 3:mt.flags=mt.flags&-65537|128;case 0:if(mt=_t.payload,W=typeof mt=="function"?mt.call(Jt,st,W):mt,W==null)break t;st=_({},st,W);break t;case 2:fs=!0}}W=C.callback,W!==null&&(i.flags|=64,Z&&(i.flags|=8192),Z=m.callbacks,Z===null?m.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:C.tag,payload:C.payload,callback:C.callback,next:null},et===null?(X=et=Z,j=st):et=et.next=Z,T|=W;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;Z=C,C=Z.next,Z.next=null,m.lastBaseUpdate=Z,m.shared.pending=null}}while(!0);et===null&&(j=st),m.baseState=j,m.firstBaseUpdate=X,m.lastBaseUpdate=et,g===null&&(m.shared.lanes=0),_s|=T,i.lanes=T,i.memoizedState=st}}function U_(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function j_(i,s){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)U_(o[i],s)}var ko=F(null),Dh=F(0);function B_(i,s){i=br,lt(Dh,i),lt(ko,s),br=i|s.baseLanes}function Wm(){lt(Dh,br),lt(ko,ko.current)}function Zm(){br=Dh.current,it(ko),it(Dh)}var Un=F(null),ii=null;function ps(i){var s=i.alternate;lt(Se,Se.current&1),lt(Un,i),ii===null&&(s===null||ko.current!==null||s.memoizedState!==null)&&(ii=i)}function Jm(i){lt(Se,Se.current),lt(Un,i),ii===null&&(ii=i)}function z_(i){i.tag===22?(lt(Se,Se.current),lt(Un,i),ii===null&&(ii=i)):gs()}function gs(){lt(Se,Se.current),lt(Un,Un.current)}function jn(i){it(Un),ii===i&&(ii=null),it(Se)}var Se=F(0);function Nh(i){for(var s=i;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||sg(o)||ag(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var pr=0,Ct=null,Wt=null,De=null,Mh=!1,Po=!1,xa=!1,Oh=0,fu=0,Lo=null,yI=0;function ye(){throw Error(r(321))}function tp(i,s){if(s===null)return!1;for(var o=0;o<s.length&&o<i.length;o++)if(!Pn(i[o],s[o]))return!1;return!0}function ep(i,s,o,u,m,g){return pr=g,Ct=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,tt.H=i===null||i.memoizedState===null?ST:gp,xa=!1,g=o(u,m),xa=!1,Po&&(g=H_(s,o,u,m)),F_(i),g}function F_(i){tt.H=pu;var s=Wt!==null&&Wt.next!==null;if(pr=0,De=Wt=Ct=null,Mh=!1,fu=0,Lo=null,s)throw Error(r(300));i===null||Ne||(i=i.dependencies,i!==null&&bh(i)&&(Ne=!0))}function H_(i,s,o,u){Ct=i;var m=0;do{if(Po&&(Lo=null),fu=0,Po=!1,25<=m)throw Error(r(301));if(m+=1,De=Wt=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}tt.H=AT,g=s(o,u)}while(Po);return g}function vI(){var i=tt.H,s=i.useState()[0];return s=typeof s.then=="function"?du(s):s,i=i.useState()[0],(Wt!==null?Wt.memoizedState:null)!==i&&(Ct.flags|=1024),s}function np(){var i=Oh!==0;return Oh=0,i}function ip(i,s,o){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~o}function rp(i){if(Mh){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Mh=!1}pr=0,De=Wt=Ct=null,Po=!1,fu=Oh=0,Lo=null}function _n(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?Ct.memoizedState=De=i:De=De.next=i,De}function Ae(){if(Wt===null){var i=Ct.alternate;i=i!==null?i.memoizedState:null}else i=Wt.next;var s=De===null?Ct.memoizedState:De.next;if(s!==null)De=s,Wt=i;else{if(i===null)throw Ct.alternate===null?Error(r(467)):Error(r(310));Wt=i,i={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},De===null?Ct.memoizedState=De=i:De=De.next=i}return De}function Vh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function du(i){var s=fu;return fu+=1,Lo===null&&(Lo=[]),i=O_(Lo,i,s),s=Ct,(De===null?s.memoizedState:De.next)===null&&(s=s.alternate,tt.H=s===null||s.memoizedState===null?ST:gp),i}function kh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return du(i);if(i.$$typeof===k)return Xe(i)}throw Error(r(438,String(i)))}function sp(i){var s=null,o=Ct.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Ct.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Vh(),Ct.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(i),u=0;u<i;u++)o[u]=U;return s.index++,o}function gr(i,s){return typeof s=="function"?s(i):s}function Ph(i){var s=Ae();return ap(s,Wt,i)}function ap(i,s,o){var u=i.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var m=i.baseQueue,g=u.pending;if(g!==null){if(m!==null){var T=m.next;m.next=g.next,g.next=T}s.baseQueue=m=g,u.pending=null}if(g=i.baseState,m===null)i.memoizedState=g;else{s=m.next;var C=T=null,j=null,X=s,et=!1;do{var st=X.lane&-536870913;if(st!==X.lane?(Pt&st)===st:(pr&st)===st){var W=X.revertLane;if(W===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),st===No&&(et=!0);else if((pr&W)===W){X=X.next,W===No&&(et=!0);continue}else st={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},j===null?(C=j=st,T=g):j=j.next=st,Ct.lanes|=W,_s|=W;st=X.action,xa&&o(g,st),g=X.hasEagerState?X.eagerState:o(g,st)}else W={lane:st,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},j===null?(C=j=W,T=g):j=j.next=W,Ct.lanes|=st,_s|=st;X=X.next}while(X!==null&&X!==s);if(j===null?T=g:j.next=C,!Pn(g,i.memoizedState)&&(Ne=!0,et&&(o=Mo,o!==null)))throw o;i.memoizedState=g,i.baseState=T,i.baseQueue=j,u.lastRenderedState=g}return m===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function op(i){var s=Ae(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var u=o.dispatch,m=o.pending,g=s.memoizedState;if(m!==null){o.pending=null;var T=m=m.next;do g=i(g,T.action),T=T.next;while(T!==m);Pn(g,s.memoizedState)||(Ne=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,u]}function q_(i,s,o){var u=Ct,m=Ae(),g=Bt;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=s();var T=!Pn((Wt||m).memoizedState,o);if(T&&(m.memoizedState=o,Ne=!0),m=m.queue,cp($_.bind(null,u,m,i),[i]),m.getSnapshot!==s||T||De!==null&&De.memoizedState.tag&1){if(u.flags|=2048,Uo(9,{destroy:void 0},K_.bind(null,u,m,o,s),null),te===null)throw Error(r(349));g||(pr&127)!==0||G_(u,s,o)}return o}function G_(i,s,o){i.flags|=16384,i={getSnapshot:s,value:o},s=Ct.updateQueue,s===null?(s=Vh(),Ct.updateQueue=s,s.stores=[i]):(o=s.stores,o===null?s.stores=[i]:o.push(i))}function K_(i,s,o,u){s.value=o,s.getSnapshot=u,Y_(s)&&Q_(i)}function $_(i,s,o){return o(function(){Y_(s)&&Q_(i)})}function Y_(i){var s=i.getSnapshot;i=i.value;try{var o=s();return!Pn(i,o)}catch{return!0}}function Q_(i){var s=_a(i,2);s!==null&&Cn(s,i,2)}function lp(i){var s=_n();if(typeof i=="function"){var o=i;if(i=o(),xa){Yn(!0);try{o()}finally{Yn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:i},s}function X_(i,s,o,u){return i.baseState=o,ap(i,Wt,typeof u=="function"?u:gr)}function _I(i,s,o,u,m){if(jh(i))throw Error(r(485));if(i=s.action,i!==null){var g={payload:m,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};tt.T!==null?o(!0):g.isTransition=!1,u(g),o=s.pending,o===null?(g.next=s.pending=g,W_(s,g)):(g.next=o.next,s.pending=o.next=g)}}function W_(i,s){var o=s.action,u=s.payload,m=i.state;if(s.isTransition){var g=tt.T,T={};tt.T=T;try{var C=o(m,u),j=tt.S;j!==null&&j(T,C),Z_(i,s,C)}catch(X){up(i,s,X)}finally{g!==null&&T.types!==null&&(g.types=T.types),tt.T=g}}else try{g=o(m,u),Z_(i,s,g)}catch(X){up(i,s,X)}}function Z_(i,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){J_(i,s,u)},function(u){return up(i,s,u)}):J_(i,s,o)}function J_(i,s,o){s.status="fulfilled",s.value=o,tT(s),i.state=o,s=i.pending,s!==null&&(o=s.next,o===s?i.pending=null:(o=o.next,s.next=o,W_(i,o)))}function up(i,s,o){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,tT(s),s=s.next;while(s!==u)}i.action=null}function tT(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function eT(i,s){return s}function nT(i,s){if(Bt){var o=te.formState;if(o!==null){t:{var u=Ct;if(Bt){if(ie){e:{for(var m=ie,g=ni;m.nodeType!==8;){if(!g){m=null;break e}if(m=ri(m.nextSibling),m===null){m=null;break e}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){ie=ri(m.nextSibling),u=m.data==="F!";break t}}cs(u)}u=!1}u&&(s=o[0])}}return o=_n(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eT,lastRenderedState:s},o.queue=u,o=ET.bind(null,Ct,u),u.dispatch=o,u=lp(!1),g=pp.bind(null,Ct,!1,u.queue),u=_n(),m={state:s,dispatch:null,action:i,pending:null},u.queue=m,o=_I.bind(null,Ct,m,g,o),m.dispatch=o,u.memoizedState=i,[s,o,!1]}function iT(i){var s=Ae();return rT(s,Wt,i)}function rT(i,s,o){if(s=ap(i,s,eT)[0],i=Ph(gr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=du(s)}catch(T){throw T===Oo?Rh:T}else u=s;s=Ae();var m=s.queue,g=m.dispatch;return o!==s.memoizedState&&(Ct.flags|=2048,Uo(9,{destroy:void 0},TI.bind(null,m,o),null)),[u,g,i]}function TI(i,s){i.action=s}function sT(i){var s=Ae(),o=Wt;if(o!==null)return rT(s,o,i);Ae(),s=s.memoizedState,o=Ae();var u=o.queue.dispatch;return o.memoizedState=i,[s,u,!1]}function Uo(i,s,o,u){return i={tag:i,create:o,deps:u,inst:s,next:null},s=Ct.updateQueue,s===null&&(s=Vh(),Ct.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=i.next=i:(u=o.next,o.next=i,i.next=u,s.lastEffect=i),i}function aT(){return Ae().memoizedState}function Lh(i,s,o,u){var m=_n();Ct.flags|=i,m.memoizedState=Uo(1|s,{destroy:void 0},o,u===void 0?null:u)}function Uh(i,s,o,u){var m=Ae();u=u===void 0?null:u;var g=m.memoizedState.inst;Wt!==null&&u!==null&&tp(u,Wt.memoizedState.deps)?m.memoizedState=Uo(s,g,o,u):(Ct.flags|=i,m.memoizedState=Uo(1|s,g,o,u))}function oT(i,s){Lh(8390656,8,i,s)}function cp(i,s){Uh(2048,8,i,s)}function EI(i){Ct.flags|=4;var s=Ct.updateQueue;if(s===null)s=Vh(),Ct.updateQueue=s,s.events=[i];else{var o=s.events;o===null?s.events=[i]:o.push(i)}}function lT(i){var s=Ae().memoizedState;return EI({ref:s,nextImpl:i}),function(){if((Gt&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function uT(i,s){return Uh(4,2,i,s)}function cT(i,s){return Uh(4,4,i,s)}function hT(i,s){if(typeof s=="function"){i=i();var o=s(i);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function fT(i,s,o){o=o!=null?o.concat([i]):null,Uh(4,4,hT.bind(null,s,i),o)}function hp(){}function dT(i,s){var o=Ae();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&tp(s,u[1])?u[0]:(o.memoizedState=[i,s],i)}function mT(i,s){var o=Ae();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&tp(s,u[1]))return u[0];if(u=i(),xa){Yn(!0);try{i()}finally{Yn(!1)}}return o.memoizedState=[u,s],u}function fp(i,s,o){return o===void 0||(pr&1073741824)!==0&&(Pt&261930)===0?i.memoizedState=s:(i.memoizedState=o,i=pE(),Ct.lanes|=i,_s|=i,o)}function pT(i,s,o,u){return Pn(o,s)?o:ko.current!==null?(i=fp(i,o,u),Pn(i,s)||(Ne=!0),i):(pr&42)===0||(pr&1073741824)!==0&&(Pt&261930)===0?(Ne=!0,i.memoizedState=o):(i=pE(),Ct.lanes|=i,_s|=i,s)}function gT(i,s,o,u,m){var g=ot.p;ot.p=g!==0&&8>g?g:8;var T=tt.T,C={};tt.T=C,pp(i,!1,s,o);try{var j=m(),X=tt.S;if(X!==null&&X(C,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var et=gI(j,u);mu(i,s,et,Fn(i))}else mu(i,s,u,Fn(i))}catch(st){mu(i,s,{then:function(){},status:"rejected",reason:st},Fn())}finally{ot.p=g,T!==null&&C.types!==null&&(T.types=C.types),tt.T=T}}function wI(){}function dp(i,s,o,u){if(i.tag!==5)throw Error(r(476));var m=yT(i).queue;gT(i,m,s,ft,o===null?wI:function(){return vT(i),o(u)})}function yT(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ft,baseState:ft,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:ft},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:o},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function vT(i){var s=yT(i);s.next===null&&(s=i.alternate.memoizedState),mu(i,s.next.queue,{},Fn())}function mp(){return Xe(Nu)}function _T(){return Ae().memoizedState}function TT(){return Ae().memoizedState}function bI(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var o=Fn();i=ds(o);var u=ms(s,i,o);u!==null&&(Cn(u,s,o),uu(u,s,o)),s={cache:Hm()},i.payload=s;return}s=s.return}}function SI(i,s,o){var u=Fn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},jh(i)?wT(s,o):(o=Mm(i,s,o,u),o!==null&&(Cn(o,i,u),bT(o,s,u)))}function ET(i,s,o){var u=Fn();mu(i,s,o,u)}function mu(i,s,o,u){var m={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(jh(i))wT(s,m);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var T=s.lastRenderedState,C=g(T,o);if(m.hasEagerState=!0,m.eagerState=C,Pn(C,T))return _h(i,s,m,0),te===null&&vh(),!1}catch{}finally{}if(o=Mm(i,s,m,u),o!==null)return Cn(o,i,u),bT(o,s,u),!0}return!1}function pp(i,s,o,u){if(u={lane:2,revertLane:$p(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},jh(i)){if(s)throw Error(r(479))}else s=Mm(i,o,u,2),s!==null&&Cn(s,i,2)}function jh(i){var s=i.alternate;return i===Ct||s!==null&&s===Ct}function wT(i,s){Po=Mh=!0;var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}function bT(i,s,o){if((o&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,o|=u,s.lanes=o,Kr(i,o)}}var pu={readContext:Xe,use:kh,useCallback:ye,useContext:ye,useEffect:ye,useImperativeHandle:ye,useLayoutEffect:ye,useInsertionEffect:ye,useMemo:ye,useReducer:ye,useRef:ye,useState:ye,useDebugValue:ye,useDeferredValue:ye,useTransition:ye,useSyncExternalStore:ye,useId:ye,useHostTransitionStatus:ye,useFormState:ye,useActionState:ye,useOptimistic:ye,useMemoCache:ye,useCacheRefresh:ye};pu.useEffectEvent=ye;var ST={readContext:Xe,use:kh,useCallback:function(i,s){return _n().memoizedState=[i,s===void 0?null:s],i},useContext:Xe,useEffect:oT,useImperativeHandle:function(i,s,o){o=o!=null?o.concat([i]):null,Lh(4194308,4,hT.bind(null,s,i),o)},useLayoutEffect:function(i,s){return Lh(4194308,4,i,s)},useInsertionEffect:function(i,s){Lh(4,2,i,s)},useMemo:function(i,s){var o=_n();s=s===void 0?null:s;var u=i();if(xa){Yn(!0);try{i()}finally{Yn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(i,s,o){var u=_n();if(o!==void 0){var m=o(s);if(xa){Yn(!0);try{o(s)}finally{Yn(!1)}}}else m=s;return u.memoizedState=u.baseState=m,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:m},u.queue=i,i=i.dispatch=SI.bind(null,Ct,i),[u.memoizedState,i]},useRef:function(i){var s=_n();return i={current:i},s.memoizedState=i},useState:function(i){i=lp(i);var s=i.queue,o=ET.bind(null,Ct,s);return s.dispatch=o,[i.memoizedState,o]},useDebugValue:hp,useDeferredValue:function(i,s){var o=_n();return fp(o,i,s)},useTransition:function(){var i=lp(!1);return i=gT.bind(null,Ct,i.queue,!0,!1),_n().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,o){var u=Ct,m=_n();if(Bt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),te===null)throw Error(r(349));(Pt&127)!==0||G_(u,s,o)}m.memoizedState=o;var g={value:o,getSnapshot:s};return m.queue=g,oT($_.bind(null,u,g,i),[i]),u.flags|=2048,Uo(9,{destroy:void 0},K_.bind(null,u,g,o,s),null),o},useId:function(){var i=_n(),s=te.identifierPrefix;if(Bt){var o=Li,u=Pi;o=(u&~(1<<32-mn(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Oh++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=yI++,s="_"+s+"r_"+o.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:mp,useFormState:nT,useActionState:nT,useOptimistic:function(i){var s=_n();s.memoizedState=s.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=pp.bind(null,Ct,!0,o),o.dispatch=s,[i,s]},useMemoCache:sp,useCacheRefresh:function(){return _n().memoizedState=bI.bind(null,Ct)},useEffectEvent:function(i){var s=_n(),o={impl:i};return s.memoizedState=o,function(){if((Gt&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},gp={readContext:Xe,use:kh,useCallback:dT,useContext:Xe,useEffect:cp,useImperativeHandle:fT,useInsertionEffect:uT,useLayoutEffect:cT,useMemo:mT,useReducer:Ph,useRef:aT,useState:function(){return Ph(gr)},useDebugValue:hp,useDeferredValue:function(i,s){var o=Ae();return pT(o,Wt.memoizedState,i,s)},useTransition:function(){var i=Ph(gr)[0],s=Ae().memoizedState;return[typeof i=="boolean"?i:du(i),s]},useSyncExternalStore:q_,useId:_T,useHostTransitionStatus:mp,useFormState:iT,useActionState:iT,useOptimistic:function(i,s){var o=Ae();return X_(o,Wt,i,s)},useMemoCache:sp,useCacheRefresh:TT};gp.useEffectEvent=lT;var AT={readContext:Xe,use:kh,useCallback:dT,useContext:Xe,useEffect:cp,useImperativeHandle:fT,useInsertionEffect:uT,useLayoutEffect:cT,useMemo:mT,useReducer:op,useRef:aT,useState:function(){return op(gr)},useDebugValue:hp,useDeferredValue:function(i,s){var o=Ae();return Wt===null?fp(o,i,s):pT(o,Wt.memoizedState,i,s)},useTransition:function(){var i=op(gr)[0],s=Ae().memoizedState;return[typeof i=="boolean"?i:du(i),s]},useSyncExternalStore:q_,useId:_T,useHostTransitionStatus:mp,useFormState:sT,useActionState:sT,useOptimistic:function(i,s){var o=Ae();return Wt!==null?X_(o,Wt,i,s):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:sp,useCacheRefresh:TT};AT.useEffectEvent=lT;function yp(i,s,o,u){s=i.memoizedState,o=o(u,s),o=o==null?s:_({},s,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var vp={enqueueSetState:function(i,s,o){i=i._reactInternals;var u=Fn(),m=ds(u);m.payload=s,o!=null&&(m.callback=o),s=ms(i,m,u),s!==null&&(Cn(s,i,u),uu(s,i,u))},enqueueReplaceState:function(i,s,o){i=i._reactInternals;var u=Fn(),m=ds(u);m.tag=1,m.payload=s,o!=null&&(m.callback=o),s=ms(i,m,u),s!==null&&(Cn(s,i,u),uu(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var o=Fn(),u=ds(o);u.tag=2,s!=null&&(u.callback=s),s=ms(i,u,o),s!==null&&(Cn(s,i,o),uu(s,i,o))}};function RT(i,s,o,u,m,g,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,g,T):s.prototype&&s.prototype.isPureReactComponent?!eu(o,u)||!eu(m,g):!0}function CT(i,s,o,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==i&&vp.enqueueReplaceState(s,s.state,null)}function Ia(i,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(i=i.defaultProps){o===s&&(o=_({},o));for(var m in i)o[m]===void 0&&(o[m]=i[m])}return o}function xT(i){yh(i)}function IT(i){console.error(i)}function DT(i){yh(i)}function Bh(i,s){try{var o=i.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function NT(i,s,o){try{var u=i.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function _p(i,s,o){return o=ds(o),o.tag=3,o.payload={element:null},o.callback=function(){Bh(i,s)},o}function MT(i){return i=ds(i),i.tag=3,i}function OT(i,s,o,u){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var g=u.value;i.payload=function(){return m(g)},i.callback=function(){NT(s,o,u)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){NT(s,o,u),typeof m!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function AI(i,s,o,u,m){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Do(s,o,m,!0),o=Un.current,o!==null){switch(o.tag){case 31:case 13:return ii===null?Zh():o.alternate===null&&ve===0&&(ve=3),o.flags&=-257,o.flags|=65536,o.lanes=m,u===Ch?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),qp(i,u,m)),!1;case 22:return o.flags|=65536,u===Ch?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),qp(i,u,m)),!1}throw Error(r(435,o.tag))}return qp(i,u,m),Zh(),!1}if(Bt)return s=Un.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,u!==Um&&(i=Error(r(422),{cause:u}),ru(Jn(i,o)))):(u!==Um&&(s=Error(r(423),{cause:u}),ru(Jn(s,o))),i=i.current.alternate,i.flags|=65536,m&=-m,i.lanes|=m,u=Jn(u,o),m=_p(i.stateNode,u,m),Qm(i,m),ve!==4&&(ve=2)),!1;var g=Error(r(520),{cause:u});if(g=Jn(g,o),bu===null?bu=[g]:bu.push(g),ve!==4&&(ve=2),s===null)return!0;u=Jn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,i=m&-m,o.lanes|=i,i=_p(o.stateNode,u,i),Qm(o,i),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ts===null||!Ts.has(g))))return o.flags|=65536,m&=-m,o.lanes|=m,m=MT(m),OT(m,i,o,u),Qm(o,m),!1}o=o.return}while(o!==null);return!1}var Tp=Error(r(461)),Ne=!1;function We(i,s,o,u){s.child=i===null?L_(s,null,o,u):Ca(s,i.child,o,u)}function VT(i,s,o,u,m){o=o.render;var g=s.ref;if("ref"in u){var T={};for(var C in u)C!=="ref"&&(T[C]=u[C])}else T=u;return ba(s),u=ep(i,s,o,T,g,m),C=np(),i!==null&&!Ne?(ip(i,s,m),yr(i,s,m)):(Bt&&C&&Pm(s),s.flags|=1,We(i,s,u,m),s.child)}function kT(i,s,o,u,m){if(i===null){var g=o.type;return typeof g=="function"&&!Om(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,PT(i,s,g,u,m)):(i=Eh(o.type,null,u,s,s.mode,m),i.ref=s.ref,i.return=s,s.child=i)}if(g=i.child,!xp(i,m)){var T=g.memoizedProps;if(o=o.compare,o=o!==null?o:eu,o(T,u)&&i.ref===s.ref)return yr(i,s,m)}return s.flags|=1,i=hr(g,u),i.ref=s.ref,i.return=s,s.child=i}function PT(i,s,o,u,m){if(i!==null){var g=i.memoizedProps;if(eu(g,u)&&i.ref===s.ref)if(Ne=!1,s.pendingProps=u=g,xp(i,m))(i.flags&131072)!==0&&(Ne=!0);else return s.lanes=i.lanes,yr(i,s,m)}return Ep(i,s,o,u,m)}function LT(i,s,o,u){var m=u.children,g=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,i!==null){for(u=s.child=i.child,m=0;u!==null;)m=m|u.lanes|u.childLanes,u=u.sibling;u=m&~g}else u=0,s.child=null;return UT(i,s,g,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ah(s,g!==null?g.cachePool:null),g!==null?B_(s,g):Wm(),z_(s);else return u=s.lanes=536870912,UT(i,s,g!==null?g.baseLanes|o:o,o,u)}else g!==null?(Ah(s,g.cachePool),B_(s,g),gs(),s.memoizedState=null):(i!==null&&Ah(s,null),Wm(),gs());return We(i,s,m,o),s.child}function gu(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function UT(i,s,o,u,m){var g=Gm();return g=g===null?null:{parent:Ie._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},i!==null&&Ah(s,null),Wm(),z_(s),i!==null&&Do(i,s,u,!0),s.childLanes=m,null}function zh(i,s){return s=Hh({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function jT(i,s,o){return Ca(s,i.child,null,o),i=zh(s,s.pendingProps),i.flags|=2,jn(s),s.memoizedState=null,i}function RI(i,s,o){var u=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Bt){if(u.mode==="hidden")return i=zh(s,u),s.lanes=536870912,gu(null,i);if(Jm(s),(i=ie)?(i=WE(i,ni),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ls!==null?{id:Pi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},o=w_(i),o.return=s,s.child=o,Qe=s,ie=null)):i=null,i===null)throw cs(s);return s.lanes=536870912,null}return zh(s,u)}var g=i.memoizedState;if(g!==null){var T=g.dehydrated;if(Jm(s),m)if(s.flags&256)s.flags&=-257,s=jT(i,s,o);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(r(558));else if(Ne||Do(i,s,o,!1),m=(o&i.childLanes)!==0,Ne||m){if(u=te,u!==null&&(T=$r(u,o),T!==0&&T!==g.retryLane))throw g.retryLane=T,_a(i,T),Cn(u,i,T),Tp;Zh(),s=jT(i,s,o)}else i=g.treeContext,ie=ri(T.nextSibling),Qe=s,Bt=!0,us=null,ni=!1,i!==null&&A_(s,i),s=zh(s,u),s.flags|=4096;return s}return i=hr(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function Fh(i,s){var o=s.ref;if(o===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(s.flags|=4194816)}}function Ep(i,s,o,u,m){return ba(s),o=ep(i,s,o,u,void 0,m),u=np(),i!==null&&!Ne?(ip(i,s,m),yr(i,s,m)):(Bt&&u&&Pm(s),s.flags|=1,We(i,s,o,m),s.child)}function BT(i,s,o,u,m,g){return ba(s),s.updateQueue=null,o=H_(s,u,o,m),F_(i),u=np(),i!==null&&!Ne?(ip(i,s,g),yr(i,s,g)):(Bt&&u&&Pm(s),s.flags|=1,We(i,s,o,g),s.child)}function zT(i,s,o,u,m){if(ba(s),s.stateNode===null){var g=Ro,T=o.contextType;typeof T=="object"&&T!==null&&(g=Xe(T)),g=new o(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=vp,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},$m(s),T=o.contextType,g.context=typeof T=="object"&&T!==null?Xe(T):Ro,g.state=s.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(yp(s,o,T,u),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&vp.enqueueReplaceState(g,g.state,null),hu(s,u,g,m),cu(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){g=s.stateNode;var C=s.memoizedProps,j=Ia(o,C);g.props=j;var X=g.context,et=o.contextType;T=Ro,typeof et=="object"&&et!==null&&(T=Xe(et));var st=o.getDerivedStateFromProps;et=typeof st=="function"||typeof g.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,et||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(C||X!==T)&&CT(s,g,u,T),fs=!1;var W=s.memoizedState;g.state=W,hu(s,u,g,m),cu(),X=s.memoizedState,C||W!==X||fs?(typeof st=="function"&&(yp(s,o,st,u),X=s.memoizedState),(j=fs||RT(s,o,j,u,W,X,T))?(et||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=X),g.props=u,g.state=X,g.context=T,u=j):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,Ym(i,s),T=s.memoizedProps,et=Ia(o,T),g.props=et,st=s.pendingProps,W=g.context,X=o.contextType,j=Ro,typeof X=="object"&&X!==null&&(j=Xe(X)),C=o.getDerivedStateFromProps,(X=typeof C=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==st||W!==j)&&CT(s,g,u,j),fs=!1,W=s.memoizedState,g.state=W,hu(s,u,g,m),cu();var Z=s.memoizedState;T!==st||W!==Z||fs||i!==null&&i.dependencies!==null&&bh(i.dependencies)?(typeof C=="function"&&(yp(s,o,C,u),Z=s.memoizedState),(et=fs||RT(s,o,et,u,W,Z,j)||i!==null&&i.dependencies!==null&&bh(i.dependencies))?(X||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,Z,j),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,Z,j)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Z),g.props=u,g.state=Z,g.context=j,u=et):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&W===i.memoizedState||(s.flags|=1024),u=!1)}return g=u,Fh(i,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,i!==null&&u?(s.child=Ca(s,i.child,null,m),s.child=Ca(s,null,o,m)):We(i,s,o,m),s.memoizedState=g.state,i=s.child):i=yr(i,s,m),i}function FT(i,s,o,u){return Ea(),s.flags|=256,We(i,s,o,u),s.child}var wp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bp(i){return{baseLanes:i,cachePool:N_()}}function Sp(i,s,o){return i=i!==null?i.childLanes&~o:0,s&&(i|=zn),i}function HT(i,s,o){var u=s.pendingProps,m=!1,g=(s.flags&128)!==0,T;if((T=g)||(T=i!==null&&i.memoizedState===null?!1:(Se.current&2)!==0),T&&(m=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,i===null){if(Bt){if(m?ps(s):gs(),(i=ie)?(i=WE(i,ni),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ls!==null?{id:Pi,overflow:Li}:null,retryLane:536870912,hydrationErrors:null},o=w_(i),o.return=s,s.child=o,Qe=s,ie=null)):i=null,i===null)throw cs(s);return ag(i)?s.lanes=32:s.lanes=536870912,null}var C=u.children;return u=u.fallback,m?(gs(),m=s.mode,C=Hh({mode:"hidden",children:C},m),u=Ta(u,m,o,null),C.return=s,u.return=s,C.sibling=u,s.child=C,u=s.child,u.memoizedState=bp(o),u.childLanes=Sp(i,T,o),s.memoizedState=wp,gu(null,u)):(ps(s),Ap(s,C))}var j=i.memoizedState;if(j!==null&&(C=j.dehydrated,C!==null)){if(g)s.flags&256?(ps(s),s.flags&=-257,s=Rp(i,s,o)):s.memoizedState!==null?(gs(),s.child=i.child,s.flags|=128,s=null):(gs(),C=u.fallback,m=s.mode,u=Hh({mode:"visible",children:u.children},m),C=Ta(C,m,o,null),C.flags|=2,u.return=s,C.return=s,u.sibling=C,s.child=u,Ca(s,i.child,null,o),u=s.child,u.memoizedState=bp(o),u.childLanes=Sp(i,T,o),s.memoizedState=wp,s=gu(null,u));else if(ps(s),ag(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var X=T.dgst;T=X,u=Error(r(419)),u.stack="",u.digest=T,ru({value:u,source:null,stack:null}),s=Rp(i,s,o)}else if(Ne||Do(i,s,o,!1),T=(o&i.childLanes)!==0,Ne||T){if(T=te,T!==null&&(u=$r(T,o),u!==0&&u!==j.retryLane))throw j.retryLane=u,_a(i,u),Cn(T,i,u),Tp;sg(C)||Zh(),s=Rp(i,s,o)}else sg(C)?(s.flags|=192,s.child=i.child,s=null):(i=j.treeContext,ie=ri(C.nextSibling),Qe=s,Bt=!0,us=null,ni=!1,i!==null&&A_(s,i),s=Ap(s,u.children),s.flags|=4096);return s}return m?(gs(),C=u.fallback,m=s.mode,j=i.child,X=j.sibling,u=hr(j,{mode:"hidden",children:u.children}),u.subtreeFlags=j.subtreeFlags&65011712,X!==null?C=hr(X,C):(C=Ta(C,m,o,null),C.flags|=2),C.return=s,u.return=s,u.sibling=C,s.child=u,gu(null,u),u=s.child,C=i.child.memoizedState,C===null?C=bp(o):(m=C.cachePool,m!==null?(j=Ie._currentValue,m=m.parent!==j?{parent:j,pool:j}:m):m=N_(),C={baseLanes:C.baseLanes|o,cachePool:m}),u.memoizedState=C,u.childLanes=Sp(i,T,o),s.memoizedState=wp,gu(i.child,u)):(ps(s),o=i.child,i=o.sibling,o=hr(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,i!==null&&(T=s.deletions,T===null?(s.deletions=[i],s.flags|=16):T.push(i)),s.child=o,s.memoizedState=null,o)}function Ap(i,s){return s=Hh({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Hh(i,s){return i=Ln(22,i,null,s),i.lanes=0,i}function Rp(i,s,o){return Ca(s,i.child,null,o),i=Ap(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function qT(i,s,o){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),zm(i.return,s,o)}function Cp(i,s,o,u,m,g){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:m,treeForkCount:g}:(T.isBackwards=s,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=o,T.tailMode=m,T.treeForkCount=g)}function GT(i,s,o){var u=s.pendingProps,m=u.revealOrder,g=u.tail;u=u.children;var T=Se.current,C=(T&2)!==0;if(C?(T=T&1|2,s.flags|=128):T&=1,lt(Se,T),We(i,s,u,o),u=Bt?iu:0,!C&&i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&qT(i,o,s);else if(i.tag===19)qT(i,o,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(m){case"forwards":for(o=s.child,m=null;o!==null;)i=o.alternate,i!==null&&Nh(i)===null&&(m=o),o=o.sibling;o=m,o===null?(m=s.child,s.child=null):(m=o.sibling,o.sibling=null),Cp(s,!1,m,o,g,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=s.child,s.child=null;m!==null;){if(i=m.alternate,i!==null&&Nh(i)===null){s.child=m;break}i=m.sibling,m.sibling=o,o=m,m=i}Cp(s,!0,o,null,g,u);break;case"together":Cp(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function yr(i,s,o){if(i!==null&&(s.dependencies=i.dependencies),_s|=s.lanes,(o&s.childLanes)===0)if(i!==null){if(Do(i,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,o=hr(i,i.pendingProps),s.child=o,o.return=s;i.sibling!==null;)i=i.sibling,o=o.sibling=hr(i,i.pendingProps),o.return=s;o.sibling=null}return s.child}function xp(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&bh(i)))}function CI(i,s,o){switch(s.tag){case 3:Ge(s,s.stateNode.containerInfo),hs(s,Ie,i.memoizedState.cache),Ea();break;case 27:case 5:Ci(s);break;case 4:Ge(s,s.stateNode.containerInfo);break;case 10:hs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Jm(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ps(s),s.flags|=128,null):(o&s.child.childLanes)!==0?HT(i,s,o):(ps(s),i=yr(i,s,o),i!==null?i.sibling:null);ps(s);break;case 19:var m=(i.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Do(i,s,o,!1),u=(o&s.childLanes)!==0),m){if(u)return GT(i,s,o);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),lt(Se,Se.current),u)break;return null;case 22:return s.lanes=0,LT(i,s,o,s.pendingProps);case 24:hs(s,Ie,i.memoizedState.cache)}return yr(i,s,o)}function KT(i,s,o){if(i!==null)if(i.memoizedProps!==s.pendingProps)Ne=!0;else{if(!xp(i,o)&&(s.flags&128)===0)return Ne=!1,CI(i,s,o);Ne=(i.flags&131072)!==0}else Ne=!1,Bt&&(s.flags&1048576)!==0&&S_(s,iu,s.index);switch(s.lanes=0,s.tag){case 16:t:{var u=s.pendingProps;if(i=Aa(s.elementType),s.type=i,typeof i=="function")Om(i)?(u=Ia(i,u),s.tag=1,s=zT(null,s,i,u,o)):(s.tag=0,s=Ep(null,s,i,u,o));else{if(i!=null){var m=i.$$typeof;if(m===K){s.tag=11,s=VT(null,s,i,u,o);break t}else if(m===R){s.tag=14,s=kT(null,s,i,u,o);break t}}throw s=Xt(i)||i,Error(r(306,s,""))}}return s;case 0:return Ep(i,s,s.type,s.pendingProps,o);case 1:return u=s.type,m=Ia(u,s.pendingProps),zT(i,s,u,m,o);case 3:t:{if(Ge(s,s.stateNode.containerInfo),i===null)throw Error(r(387));u=s.pendingProps;var g=s.memoizedState;m=g.element,Ym(i,s),hu(s,u,null,o);var T=s.memoizedState;if(u=T.cache,hs(s,Ie,u),u!==g.cache&&Fm(s,[Ie],o,!0),cu(),u=T.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=FT(i,s,u,o);break t}else if(u!==m){m=Jn(Error(r(424)),s),ru(m),s=FT(i,s,u,o);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ie=ri(i.firstChild),Qe=s,Bt=!0,us=null,ni=!0,o=L_(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ea(),u===m){s=yr(i,s,o);break t}We(i,s,u,o)}s=s.child}return s;case 26:return Fh(i,s),i===null?(o=iw(s.type,null,s.pendingProps,null))?s.memoizedState=o:Bt||(o=s.type,i=s.pendingProps,u=af(Et.current).createElement(o),u[pe]=s,u[Ye]=i,Ze(u,o,i),be(u),s.stateNode=u):s.memoizedState=iw(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return Ci(s),i===null&&Bt&&(u=s.stateNode=tw(s.type,s.pendingProps,Et.current),Qe=s,ni=!0,m=ie,Ss(s.type)?(og=m,ie=ri(u.firstChild)):ie=m),We(i,s,s.pendingProps.children,o),Fh(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Bt&&((m=u=ie)&&(u=iD(u,s.type,s.pendingProps,ni),u!==null?(s.stateNode=u,Qe=s,ie=ri(u.firstChild),ni=!1,m=!0):m=!1),m||cs(s)),Ci(s),m=s.type,g=s.pendingProps,T=i!==null?i.memoizedProps:null,u=g.children,ng(m,g)?u=null:T!==null&&ng(m,T)&&(s.flags|=32),s.memoizedState!==null&&(m=ep(i,s,vI,null,null,o),Nu._currentValue=m),Fh(i,s),We(i,s,u,o),s.child;case 6:return i===null&&Bt&&((i=o=ie)&&(o=rD(o,s.pendingProps,ni),o!==null?(s.stateNode=o,Qe=s,ie=null,i=!0):i=!1),i||cs(s)),null;case 13:return HT(i,s,o);case 4:return Ge(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Ca(s,null,u,o):We(i,s,u,o),s.child;case 11:return VT(i,s,s.type,s.pendingProps,o);case 7:return We(i,s,s.pendingProps,o),s.child;case 8:return We(i,s,s.pendingProps.children,o),s.child;case 12:return We(i,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,hs(s,s.type,u.value),We(i,s,u.children,o),s.child;case 9:return m=s.type._context,u=s.pendingProps.children,ba(s),m=Xe(m),u=u(m),s.flags|=1,We(i,s,u,o),s.child;case 14:return kT(i,s,s.type,s.pendingProps,o);case 15:return PT(i,s,s.type,s.pendingProps,o);case 19:return GT(i,s,o);case 31:return RI(i,s,o);case 22:return LT(i,s,o,s.pendingProps);case 24:return ba(s),u=Xe(Ie),i===null?(m=Gm(),m===null&&(m=te,g=Hm(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=o),m=g),s.memoizedState={parent:u,cache:m},$m(s),hs(s,Ie,m)):((i.lanes&o)!==0&&(Ym(i,s),hu(s,null,null,o),cu()),m=i.memoizedState,g=s.memoizedState,m.parent!==u?(m={parent:u,cache:u},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),hs(s,Ie,u)):(u=g.cache,hs(s,Ie,u),u!==m.cache&&Fm(s,[Ie],o,!0))),We(i,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function vr(i){i.flags|=4}function Ip(i,s,o,u,m){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(m&335544128)===m)if(i.stateNode.complete)i.flags|=8192;else if(_E())i.flags|=8192;else throw Ra=Ch,Km}else i.flags&=-16777217}function $T(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!lw(s))if(_E())i.flags|=8192;else throw Ra=Ch,Km}function qh(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Ll():536870912,i.lanes|=s,Fo|=s)}function yu(i,s){if(!Bt)switch(i.tailMode){case"hidden":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function re(i){var s=i.alternate!==null&&i.alternate.child===i.child,o=0,u=0;if(s)for(var m=i.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags&65011712,u|=m.flags&65011712,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)o|=m.lanes|m.childLanes,u|=m.subtreeFlags,u|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=u,i.childLanes=o,s}function xI(i,s,o){var u=s.pendingProps;switch(Lm(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return re(s),null;case 1:return re(s),null;case 3:return o=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),mr(Ie),fe(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Io(s)?vr(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jm())),re(s),null;case 26:var m=s.type,g=s.memoizedState;return i===null?(vr(s),g!==null?(re(s),$T(s,g)):(re(s),Ip(s,m,null,u,o))):g?g!==i.memoizedState?(vr(s),re(s),$T(s,g)):(re(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&vr(s),re(s),Ip(s,m,i,u,o)),null;case 27:if(Ji(s),o=Et.current,m=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&vr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return re(s),null}i=ut.current,Io(s)?R_(s):(i=tw(m,u,o),s.stateNode=i,vr(s))}return re(s),null;case 5:if(Ji(s),m=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&vr(s);else{if(!u){if(s.stateNode===null)throw Error(r(166));return re(s),null}if(g=ut.current,Io(s))R_(s);else{var T=af(Et.current);switch(g){case 1:g=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=T.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?T.createElement(m,{is:u.is}):T.createElement(m)}}g[pe]=s,g[Ye]=u;t:for(T=s.child;T!==null;){if(T.tag===5||T.tag===6)g.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===s)break t;for(;T.sibling===null;){if(T.return===null||T.return===s)break t;T=T.return}T.sibling.return=T.return,T=T.sibling}s.stateNode=g;t:switch(Ze(g,m,u),m){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&vr(s)}}return re(s),Ip(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,o),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&vr(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(r(166));if(i=Et.current,Io(s)){if(i=s.stateNode,o=s.memoizedProps,u=null,m=Qe,m!==null)switch(m.tag){case 27:case 5:u=m.memoizedProps}i[pe]=s,i=!!(i.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||HE(i.nodeValue,o)),i||cs(s,!0)}else i=af(i).createTextNode(u),i[pe]=s,s.stateNode=i}return re(s),null;case 31:if(o=s.memoizedState,i===null||i.memoizedState!==null){if(u=Io(s),o!==null){if(i===null){if(!u)throw Error(r(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[pe]=s}else Ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;re(s),i=!1}else o=jm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=o),i=!0;if(!i)return s.flags&256?(jn(s),s):(jn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return re(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(m=Io(s),u!==null&&u.dehydrated!==null){if(i===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[pe]=s}else Ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;re(s),m=!1}else m=jm(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(jn(s),s):(jn(s),null)}return jn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,i=i!==null&&i.memoizedState!==null,o&&(u=s.child,m=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(m=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==m&&(u.flags|=2048)),o!==i&&o&&(s.child.flags|=8192),qh(s,s.updateQueue),re(s),null);case 4:return fe(),i===null&&Wp(s.stateNode.containerInfo),re(s),null;case 10:return mr(s.type),re(s),null;case 19:if(it(Se),u=s.memoizedState,u===null)return re(s),null;if(m=(s.flags&128)!==0,g=u.rendering,g===null)if(m)yu(u,!1);else{if(ve!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(g=Nh(i),g!==null){for(s.flags|=128,yu(u,!1),i=g.updateQueue,s.updateQueue=i,qh(s,i),s.subtreeFlags=0,i=o,o=s.child;o!==null;)E_(o,i),o=o.sibling;return lt(Se,Se.current&1|2),Bt&&fr(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&Ke()>Qh&&(s.flags|=128,m=!0,yu(u,!1),s.lanes=4194304)}else{if(!m)if(i=Nh(g),i!==null){if(s.flags|=128,m=!0,i=i.updateQueue,s.updateQueue=i,qh(s,i),yu(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!Bt)return re(s),null}else 2*Ke()-u.renderingStartTime>Qh&&o!==536870912&&(s.flags|=128,m=!0,yu(u,!1),s.lanes=4194304);u.isBackwards?(g.sibling=s.child,s.child=g):(i=u.last,i!==null?i.sibling=g:s.child=g,u.last=g)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=Ke(),i.sibling=null,o=Se.current,lt(Se,m?o&1|2:o&1),Bt&&fr(s,u.treeForkCount),i):(re(s),null);case 22:case 23:return jn(s),Zm(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(re(s),s.subtreeFlags&6&&(s.flags|=8192)):re(s),o=s.updateQueue,o!==null&&qh(s,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),i!==null&&it(Sa),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),mr(Ie),re(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function II(i,s){switch(Lm(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return mr(Ie),fe(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Ji(s),null;case 31:if(s.memoizedState!==null){if(jn(s),s.alternate===null)throw Error(r(340));Ea()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(jn(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ea()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return it(Se),null;case 4:return fe(),null;case 10:return mr(s.type),null;case 22:case 23:return jn(s),Zm(),i!==null&&it(Sa),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return mr(Ie),null;case 25:return null;default:return null}}function YT(i,s){switch(Lm(s),s.tag){case 3:mr(Ie),fe();break;case 26:case 27:case 5:Ji(s);break;case 4:fe();break;case 31:s.memoizedState!==null&&jn(s);break;case 13:jn(s);break;case 19:it(Se);break;case 10:mr(s.type);break;case 22:case 23:jn(s),Zm(),i!==null&&it(Sa);break;case 24:mr(Ie)}}function vu(i,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var m=u.next;o=m;do{if((o.tag&i)===i){u=void 0;var g=o.create,T=o.inst;u=g(),T.destroy=u}o=o.next}while(o!==m)}}catch(C){Qt(s,s.return,C)}}function ys(i,s,o){try{var u=s.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var g=m.next;u=g;do{if((u.tag&i)===i){var T=u.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,m=s;var j=o,X=C;try{X()}catch(et){Qt(m,j,et)}}}u=u.next}while(u!==g)}}catch(et){Qt(s,s.return,et)}}function QT(i){var s=i.updateQueue;if(s!==null){var o=i.stateNode;try{j_(s,o)}catch(u){Qt(i,i.return,u)}}}function XT(i,s,o){o.props=Ia(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(u){Qt(i,s,u)}}function _u(i,s){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof o=="function"?i.refCleanup=o(u):o.current=u}}catch(m){Qt(i,s,m)}}function Ui(i,s){var o=i.ref,u=i.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(m){Qt(i,s,m)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){Qt(i,s,m)}else o.current=null}function WT(i){var s=i.type,o=i.memoizedProps,u=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(m){Qt(i,i.return,m)}}function Dp(i,s,o){try{var u=i.stateNode;WI(u,i.type,o,s),u[Ye]=s}catch(m){Qt(i,i.return,m)}}function ZT(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ss(i.type)||i.tag===4}function Np(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||ZT(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ss(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Mp(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(i),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Be));else if(u!==4&&(u===27&&Ss(i.type)&&(o=i.stateNode,s=null),i=i.child,i!==null))for(Mp(i,s,o),i=i.sibling;i!==null;)Mp(i,s,o),i=i.sibling}function Gh(i,s,o){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?o.insertBefore(i,s):o.appendChild(i);else if(u!==4&&(u===27&&Ss(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(Gh(i,s,o),i=i.sibling;i!==null;)Gh(i,s,o),i=i.sibling}function JT(i){var s=i.stateNode,o=i.memoizedProps;try{for(var u=i.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);Ze(s,u,o),s[pe]=i,s[Ye]=o}catch(g){Qt(i,i.return,g)}}var _r=!1,Me=!1,Op=!1,tE=typeof WeakSet=="function"?WeakSet:Set,He=null;function DI(i,s){if(i=i.containerInfo,tg=df,i=f_(i),Rm(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var m=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break t}var T=0,C=-1,j=-1,X=0,et=0,st=i,W=null;e:for(;;){for(var Z;st!==o||m!==0&&st.nodeType!==3||(C=T+m),st!==g||u!==0&&st.nodeType!==3||(j=T+u),st.nodeType===3&&(T+=st.nodeValue.length),(Z=st.firstChild)!==null;)W=st,st=Z;for(;;){if(st===i)break e;if(W===o&&++X===m&&(C=T),W===g&&++et===u&&(j=T),(Z=st.nextSibling)!==null)break;st=W,W=st.parentNode}st=Z}o=C===-1||j===-1?null:{start:C,end:j}}else o=null}o=o||{start:0,end:0}}else o=null;for(eg={focusedElem:i,selectionRange:o},df=!1,He=s;He!==null;)if(s=He,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,He=i;else for(;He!==null;){switch(s=He,g=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(o=0;o<i.length;o++)m=i[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,o=s,m=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var mt=Ia(o.type,m);i=u.getSnapshotBeforeUpdate(mt,g),u.__reactInternalSnapshotBeforeUpdate=i}catch(_t){Qt(o,o.return,_t)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,o=i.nodeType,o===9)rg(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":rg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,He=i;break}He=s.return}}function eE(i,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Er(i,o),u&4&&vu(5,o);break;case 1:if(Er(i,o),u&4)if(i=o.stateNode,s===null)try{i.componentDidMount()}catch(T){Qt(o,o.return,T)}else{var m=Ia(o.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(m,s,i.__reactInternalSnapshotBeforeUpdate)}catch(T){Qt(o,o.return,T)}}u&64&&QT(o),u&512&&_u(o,o.return);break;case 3:if(Er(i,o),u&64&&(i=o.updateQueue,i!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{j_(i,s)}catch(T){Qt(o,o.return,T)}}break;case 27:s===null&&u&4&&JT(o);case 26:case 5:Er(i,o),s===null&&u&4&&WT(o),u&512&&_u(o,o.return);break;case 12:Er(i,o);break;case 31:Er(i,o),u&4&&rE(i,o);break;case 13:Er(i,o),u&4&&sE(i,o),u&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=jI.bind(null,o),sD(i,o))));break;case 22:if(u=o.memoizedState!==null||_r,!u){s=s!==null&&s.memoizedState!==null||Me,m=_r;var g=Me;_r=u,(Me=s)&&!g?wr(i,o,(o.subtreeFlags&8772)!==0):Er(i,o),_r=m,Me=g}break;case 30:break;default:Er(i,o)}}function nE(i){var s=i.alternate;s!==null&&(i.alternate=null,nE(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&oa(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var le=null,bn=!1;function Tr(i,s,o){for(o=o.child;o!==null;)iE(i,s,o),o=o.sibling}function iE(i,s,o){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(Fr,o)}catch{}switch(o.tag){case 26:Me||Ui(o,s),Tr(i,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Me||Ui(o,s);var u=le,m=bn;Ss(o.type)&&(le=o.stateNode,bn=!1),Tr(i,s,o),xu(o.stateNode),le=u,bn=m;break;case 5:Me||Ui(o,s);case 6:if(u=le,m=bn,le=null,Tr(i,s,o),le=u,bn=m,le!==null)if(bn)try{(le.nodeType===9?le.body:le.nodeName==="HTML"?le.ownerDocument.body:le).removeChild(o.stateNode)}catch(g){Qt(o,s,g)}else try{le.removeChild(o.stateNode)}catch(g){Qt(o,s,g)}break;case 18:le!==null&&(bn?(i=le,QE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),Xo(i)):QE(le,o.stateNode));break;case 4:u=le,m=bn,le=o.stateNode.containerInfo,bn=!0,Tr(i,s,o),le=u,bn=m;break;case 0:case 11:case 14:case 15:ys(2,o,s),Me||ys(4,o,s),Tr(i,s,o);break;case 1:Me||(Ui(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&XT(o,s,u)),Tr(i,s,o);break;case 21:Tr(i,s,o);break;case 22:Me=(u=Me)||o.memoizedState!==null,Tr(i,s,o),Me=u;break;default:Tr(i,s,o)}}function rE(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Xo(i)}catch(o){Qt(s,s.return,o)}}}function sE(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Xo(i)}catch(o){Qt(s,s.return,o)}}function NI(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new tE),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new tE),s;default:throw Error(r(435,i.tag))}}function Kh(i,s){var o=NI(i);s.forEach(function(u){if(!o.has(u)){o.add(u);var m=BI.bind(null,i,u);u.then(m,m)}})}function Sn(i,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var m=o[u],g=i,T=s,C=T;t:for(;C!==null;){switch(C.tag){case 27:if(Ss(C.type)){le=C.stateNode,bn=!1;break t}break;case 5:le=C.stateNode,bn=!1;break t;case 3:case 4:le=C.stateNode.containerInfo,bn=!0;break t}C=C.return}if(le===null)throw Error(r(160));iE(g,T,m),le=null,bn=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)aE(s,i),s=s.sibling}var yi=null;function aE(i,s){var o=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Sn(s,i),An(i),u&4&&(ys(3,i,i.return),vu(3,i),ys(5,i,i.return));break;case 1:Sn(s,i),An(i),u&512&&(Me||o===null||Ui(o,o.return)),u&64&&_r&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var m=yi;if(Sn(s,i),An(i),u&512&&(Me||o===null||Ui(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=i.memoizedState,o===null)if(u===null)if(i.stateNode===null){t:{u=i.type,o=i.memoizedProps,m=m.ownerDocument||m;e:switch(u){case"title":g=m.getElementsByTagName("title")[0],(!g||g[ir]||g[pe]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(u),m.head.insertBefore(g,m.querySelector("head > title"))),Ze(g,u,o),g[pe]=i,be(g),u=g;break t;case"link":var T=aw("link","href",m).get(u+(o.href||""));if(T){for(var C=0;C<T.length;C++)if(g=T[C],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(C,1);break e}}g=m.createElement(u),Ze(g,u,o),m.head.appendChild(g);break;case"meta":if(T=aw("meta","content",m).get(u+(o.content||""))){for(C=0;C<T.length;C++)if(g=T[C],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(C,1);break e}}g=m.createElement(u),Ze(g,u,o),m.head.appendChild(g);break;default:throw Error(r(468,u))}g[pe]=i,be(g),u=g}i.stateNode=u}else ow(m,i.type,i.stateNode);else i.stateNode=sw(m,u,i.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?ow(m,i.type,i.stateNode):sw(m,u,i.memoizedProps)):u===null&&i.stateNode!==null&&Dp(i,i.memoizedProps,o.memoizedProps)}break;case 27:Sn(s,i),An(i),u&512&&(Me||o===null||Ui(o,o.return)),o!==null&&u&4&&Dp(i,i.memoizedProps,o.memoizedProps);break;case 5:if(Sn(s,i),An(i),u&512&&(Me||o===null||Ui(o,o.return)),i.flags&32){m=i.stateNode;try{Wn(m,"")}catch(mt){Qt(i,i.return,mt)}}u&4&&i.stateNode!=null&&(m=i.memoizedProps,Dp(i,m,o!==null?o.memoizedProps:m)),u&1024&&(Op=!0);break;case 6:if(Sn(s,i),An(i),u&4){if(i.stateNode===null)throw Error(r(162));u=i.memoizedProps,o=i.stateNode;try{o.nodeValue=u}catch(mt){Qt(i,i.return,mt)}}break;case 3:if(uf=null,m=yi,yi=of(s.containerInfo),Sn(s,i),yi=m,An(i),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Xo(s.containerInfo)}catch(mt){Qt(i,i.return,mt)}Op&&(Op=!1,oE(i));break;case 4:u=yi,yi=of(i.stateNode.containerInfo),Sn(s,i),An(i),yi=u;break;case 12:Sn(s,i),An(i);break;case 31:Sn(s,i),An(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Kh(i,u)));break;case 13:Sn(s,i),An(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Yh=Ke()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Kh(i,u)));break;case 22:m=i.memoizedState!==null;var j=o!==null&&o.memoizedState!==null,X=_r,et=Me;if(_r=X||m,Me=et||j,Sn(s,i),Me=et,_r=X,An(i),u&8192)t:for(s=i.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(o===null||j||_r||Me||Da(i)),o=null,s=i;;){if(s.tag===5||s.tag===26){if(o===null){j=o=s;try{if(g=j.stateNode,m)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=j.stateNode;var st=j.memoizedProps.style,W=st!=null&&st.hasOwnProperty("display")?st.display:null;C.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(mt){Qt(j,j.return,mt)}}}else if(s.tag===6){if(o===null){j=s;try{j.stateNode.nodeValue=m?"":j.memoizedProps}catch(mt){Qt(j,j.return,mt)}}}else if(s.tag===18){if(o===null){j=s;try{var Z=j.stateNode;m?XE(Z,!0):XE(j.stateNode,!1)}catch(mt){Qt(j,j.return,mt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Kh(i,o))));break;case 19:Sn(s,i),An(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Kh(i,u)));break;case 30:break;case 21:break;default:Sn(s,i),An(i)}}function An(i){var s=i.flags;if(s&2){try{for(var o,u=i.return;u!==null;){if(ZT(u)){o=u;break}u=u.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var m=o.stateNode,g=Np(i);Gh(i,g,m);break;case 5:var T=o.stateNode;o.flags&32&&(Wn(T,""),o.flags&=-33);var C=Np(i);Gh(i,C,T);break;case 3:case 4:var j=o.stateNode.containerInfo,X=Np(i);Mp(i,X,j);break;default:throw Error(r(161))}}catch(et){Qt(i,i.return,et)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function oE(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;oE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Er(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)eE(i,s.alternate,s),s=s.sibling}function Da(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:ys(4,s,s.return),Da(s);break;case 1:Ui(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&XT(s,s.return,o),Da(s);break;case 27:xu(s.stateNode);case 26:case 5:Ui(s,s.return),Da(s);break;case 22:s.memoizedState===null&&Da(s);break;case 30:Da(s);break;default:Da(s)}i=i.sibling}}function wr(i,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,m=i,g=s,T=g.flags;switch(g.tag){case 0:case 11:case 15:wr(m,g,o),vu(4,g);break;case 1:if(wr(m,g,o),u=g,m=u.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(X){Qt(u,u.return,X)}if(u=g,m=u.updateQueue,m!==null){var C=u.stateNode;try{var j=m.shared.hiddenCallbacks;if(j!==null)for(m.shared.hiddenCallbacks=null,m=0;m<j.length;m++)U_(j[m],C)}catch(X){Qt(u,u.return,X)}}o&&T&64&&QT(g),_u(g,g.return);break;case 27:JT(g);case 26:case 5:wr(m,g,o),o&&u===null&&T&4&&WT(g),_u(g,g.return);break;case 12:wr(m,g,o);break;case 31:wr(m,g,o),o&&T&4&&rE(m,g);break;case 13:wr(m,g,o),o&&T&4&&sE(m,g);break;case 22:g.memoizedState===null&&wr(m,g,o),_u(g,g.return);break;case 30:break;default:wr(m,g,o)}s=s.sibling}}function Vp(i,s){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&su(o))}function kp(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&su(i))}function vi(i,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)lE(i,s,o,u),s=s.sibling}function lE(i,s,o,u){var m=s.flags;switch(s.tag){case 0:case 11:case 15:vi(i,s,o,u),m&2048&&vu(9,s);break;case 1:vi(i,s,o,u);break;case 3:vi(i,s,o,u),m&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&su(i)));break;case 12:if(m&2048){vi(i,s,o,u),i=s.stateNode;try{var g=s.memoizedProps,T=g.id,C=g.onPostCommit;typeof C=="function"&&C(T,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(j){Qt(s,s.return,j)}}else vi(i,s,o,u);break;case 31:vi(i,s,o,u);break;case 13:vi(i,s,o,u);break;case 23:break;case 22:g=s.stateNode,T=s.alternate,s.memoizedState!==null?g._visibility&2?vi(i,s,o,u):Tu(i,s):g._visibility&2?vi(i,s,o,u):(g._visibility|=2,jo(i,s,o,u,(s.subtreeFlags&10256)!==0||!1)),m&2048&&Vp(T,s);break;case 24:vi(i,s,o,u),m&2048&&kp(s.alternate,s);break;default:vi(i,s,o,u)}}function jo(i,s,o,u,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=i,T=s,C=o,j=u,X=T.flags;switch(T.tag){case 0:case 11:case 15:jo(g,T,C,j,m),vu(8,T);break;case 23:break;case 22:var et=T.stateNode;T.memoizedState!==null?et._visibility&2?jo(g,T,C,j,m):Tu(g,T):(et._visibility|=2,jo(g,T,C,j,m)),m&&X&2048&&Vp(T.alternate,T);break;case 24:jo(g,T,C,j,m),m&&X&2048&&kp(T.alternate,T);break;default:jo(g,T,C,j,m)}s=s.sibling}}function Tu(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=i,u=s,m=u.flags;switch(u.tag){case 22:Tu(o,u),m&2048&&Vp(u.alternate,u);break;case 24:Tu(o,u),m&2048&&kp(u.alternate,u);break;default:Tu(o,u)}s=s.sibling}}var Eu=8192;function Bo(i,s,o){if(i.subtreeFlags&Eu)for(i=i.child;i!==null;)uE(i,s,o),i=i.sibling}function uE(i,s,o){switch(i.tag){case 26:Bo(i,s,o),i.flags&Eu&&i.memoizedState!==null&&yD(o,yi,i.memoizedState,i.memoizedProps);break;case 5:Bo(i,s,o);break;case 3:case 4:var u=yi;yi=of(i.stateNode.containerInfo),Bo(i,s,o),yi=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=Eu,Eu=16777216,Bo(i,s,o),Eu=u):Bo(i,s,o));break;default:Bo(i,s,o)}}function cE(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function wu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];He=u,fE(u,i)}cE(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)hE(i),i=i.sibling}function hE(i){switch(i.tag){case 0:case 11:case 15:wu(i),i.flags&2048&&ys(9,i,i.return);break;case 3:wu(i);break;case 12:wu(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,$h(i)):wu(i);break;default:wu(i)}}function $h(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];He=u,fE(u,i)}cE(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:ys(8,s,s.return),$h(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,$h(s));break;default:$h(s)}i=i.sibling}}function fE(i,s){for(;He!==null;){var o=He;switch(o.tag){case 0:case 11:case 15:ys(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:su(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,He=u;else t:for(o=i;He!==null;){u=He;var m=u.sibling,g=u.return;if(nE(u),u===o){He=null;break t}if(m!==null){m.return=g,He=m;break t}He=g}}}var MI={getCacheForType:function(i){var s=Xe(Ie),o=s.data.get(i);return o===void 0&&(o=i(),s.data.set(i,o)),o},cacheSignal:function(){return Xe(Ie).controller.signal}},OI=typeof WeakMap=="function"?WeakMap:Map,Gt=0,te=null,Vt=null,Pt=0,Yt=0,Bn=null,vs=!1,zo=!1,Pp=!1,br=0,ve=0,_s=0,Na=0,Lp=0,zn=0,Fo=0,bu=null,Rn=null,Up=!1,Yh=0,dE=0,Qh=1/0,Xh=null,Ts=null,Le=0,Es=null,Ho=null,Sr=0,jp=0,Bp=null,mE=null,Su=0,zp=null;function Fn(){return(Gt&2)!==0&&Pt!==0?Pt&-Pt:tt.T!==null?$p():nr()}function pE(){if(zn===0)if((Pt&536870912)===0||Bt){var i=xi;xi<<=1,(xi&3932160)===0&&(xi=262144),zn=i}else zn=536870912;return i=Un.current,i!==null&&(i.flags|=32),zn}function Cn(i,s,o){(i===te&&(Yt===2||Yt===9)||i.cancelPendingCommit!==null)&&(qo(i,0),ws(i,Pt,zn,!1)),Gr(i,o),((Gt&2)===0||i!==te)&&(i===te&&((Gt&2)===0&&(Na|=o),ve===4&&ws(i,Pt,zn,!1)),ji(i))}function gE(i,s,o){if((Gt&6)!==0)throw Error(r(327));var u=!o&&(s&127)===0&&(s&i.expiredLanes)===0||qr(i,s),m=u?PI(i,s):Hp(i,s,!0),g=u;do{if(m===0){zo&&!u&&ws(i,s,0,!1);break}else{if(o=i.current.alternate,g&&!VI(o)){m=Hp(i,s,!1),g=!1;continue}if(m===2){if(g=s,i.errorRecoveryDisabledLanes&g)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;t:{var C=i;m=bu;var j=C.current.memoizedState.isDehydrated;if(j&&(qo(C,T).flags|=256),T=Hp(C,T,!1),T!==2){if(Pp&&!j){C.errorRecoveryDisabledLanes|=g,Na|=g,m=4;break t}g=Rn,Rn=m,g!==null&&(Rn===null?Rn=g:Rn.push.apply(Rn,g))}m=T}if(g=!1,m!==2)continue}}if(m===1){qo(i,0),ws(i,s,0,!0);break}t:{switch(u=i,g=m,g){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:ws(u,s,zn,!vs);break t;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(m=Yh+300-Ke(),10<m)){if(ws(u,s,zn,!vs),Qn(u,0,!0)!==0)break t;Sr=s,u.timeoutHandle=$E(yE.bind(null,u,o,Rn,Xh,Up,s,zn,Na,Fo,vs,g,"Throttled",-0,0),m);break t}yE(u,o,Rn,Xh,Up,s,zn,Na,Fo,vs,g,null,-0,0)}}break}while(!0);ji(i)}function yE(i,s,o,u,m,g,T,C,j,X,et,st,W,Z){if(i.timeoutHandle=-1,st=s.subtreeFlags,st&8192||(st&16785408)===16785408){st={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Be},uE(s,g,st);var mt=(g&62914560)===g?Yh-Ke():(g&4194048)===g?dE-Ke():0;if(mt=vD(st,mt),mt!==null){Sr=g,i.cancelPendingCommit=mt(AE.bind(null,i,s,g,o,u,m,T,C,j,et,st,null,W,Z)),ws(i,g,T,!X);return}}AE(i,s,g,o,u,m,T,C,j)}function VI(i){for(var s=i;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var m=o[u],g=m.getSnapshot;m=m.value;try{if(!Pn(g(),m))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ws(i,s,o,u){s&=~Lp,s&=~Na,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var m=s;0<m;){var g=31-mn(m),T=1<<g;u[g]=-1,m&=~T}o!==0&&Ul(i,o,s)}function Wh(){return(Gt&6)===0?(Au(0),!1):!0}function Fp(){if(Vt!==null){if(Yt===0)var i=Vt.return;else i=Vt,dr=wa=null,rp(i),Vo=null,ou=0,i=Vt;for(;i!==null;)YT(i.alternate,i),i=i.return;Vt=null}}function qo(i,s){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,tD(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Sr=0,Fp(),te=i,Vt=o=hr(i.current,null),Pt=s,Yt=0,Bn=null,vs=!1,zo=qr(i,s),Pp=!1,Fo=zn=Lp=Na=_s=ve=0,Rn=bu=null,Up=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var m=31-mn(u),g=1<<m;s|=i[m],u&=~g}return br=s,vh(),o}function vE(i,s){Ct=null,tt.H=pu,s===Oo||s===Rh?(s=V_(),Yt=3):s===Km?(s=V_(),Yt=4):Yt=s===Tp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Bn=s,Vt===null&&(ve=1,Bh(i,Jn(s,i.current)))}function _E(){var i=Un.current;return i===null?!0:(Pt&4194048)===Pt?ii===null:(Pt&62914560)===Pt||(Pt&536870912)!==0?i===ii:!1}function TE(){var i=tt.H;return tt.H=pu,i===null?pu:i}function EE(){var i=tt.A;return tt.A=MI,i}function Zh(){ve=4,vs||(Pt&4194048)!==Pt&&Un.current!==null||(zo=!0),(_s&134217727)===0&&(Na&134217727)===0||te===null||ws(te,Pt,zn,!1)}function Hp(i,s,o){var u=Gt;Gt|=2;var m=TE(),g=EE();(te!==i||Pt!==s)&&(Xh=null,qo(i,s)),s=!1;var T=ve;t:do try{if(Yt!==0&&Vt!==null){var C=Vt,j=Bn;switch(Yt){case 8:Fp(),T=6;break t;case 3:case 2:case 9:case 6:Un.current===null&&(s=!0);var X=Yt;if(Yt=0,Bn=null,Go(i,C,j,X),o&&zo){T=0;break t}break;default:X=Yt,Yt=0,Bn=null,Go(i,C,j,X)}}kI(),T=ve;break}catch(et){vE(i,et)}while(!0);return s&&i.shellSuspendCounter++,dr=wa=null,Gt=u,tt.H=m,tt.A=g,Vt===null&&(te=null,Pt=0,vh()),T}function kI(){for(;Vt!==null;)wE(Vt)}function PI(i,s){var o=Gt;Gt|=2;var u=TE(),m=EE();te!==i||Pt!==s?(Xh=null,Qh=Ke()+500,qo(i,s)):zo=qr(i,s);t:do try{if(Yt!==0&&Vt!==null){s=Vt;var g=Bn;e:switch(Yt){case 1:Yt=0,Bn=null,Go(i,s,g,1);break;case 2:case 9:if(M_(g)){Yt=0,Bn=null,bE(s);break}s=function(){Yt!==2&&Yt!==9||te!==i||(Yt=7),ji(i)},g.then(s,s);break t;case 3:Yt=7;break t;case 4:Yt=5;break t;case 7:M_(g)?(Yt=0,Bn=null,bE(s)):(Yt=0,Bn=null,Go(i,s,g,7));break;case 5:var T=null;switch(Vt.tag){case 26:T=Vt.memoizedState;case 5:case 27:var C=Vt;if(T?lw(T):C.stateNode.complete){Yt=0,Bn=null;var j=C.sibling;if(j!==null)Vt=j;else{var X=C.return;X!==null?(Vt=X,Jh(X)):Vt=null}break e}}Yt=0,Bn=null,Go(i,s,g,5);break;case 6:Yt=0,Bn=null,Go(i,s,g,6);break;case 8:Fp(),ve=6;break t;default:throw Error(r(462))}}LI();break}catch(et){vE(i,et)}while(!0);return dr=wa=null,tt.H=u,tt.A=m,Gt=o,Vt!==null?0:(te=null,Pt=0,vh(),ve)}function LI(){for(;Vt!==null&&!pm();)wE(Vt)}function wE(i){var s=KT(i.alternate,i,br);i.memoizedProps=i.pendingProps,s===null?Jh(i):Vt=s}function bE(i){var s=i,o=s.alternate;switch(s.tag){case 15:case 0:s=BT(o,s,s.pendingProps,s.type,void 0,Pt);break;case 11:s=BT(o,s,s.pendingProps,s.type.render,s.ref,Pt);break;case 5:rp(s);default:YT(o,s),s=Vt=E_(s,br),s=KT(o,s,br)}i.memoizedProps=i.pendingProps,s===null?Jh(i):Vt=s}function Go(i,s,o,u){dr=wa=null,rp(s),Vo=null,ou=0;var m=s.return;try{if(AI(i,m,s,o,Pt)){ve=1,Bh(i,Jn(o,i.current)),Vt=null;return}}catch(g){if(m!==null)throw Vt=m,g;ve=1,Bh(i,Jn(o,i.current)),Vt=null;return}s.flags&32768?(Bt||u===1?i=!0:zo||(Pt&536870912)!==0?i=!1:(vs=i=!0,(u===2||u===9||u===3||u===6)&&(u=Un.current,u!==null&&u.tag===13&&(u.flags|=16384))),SE(s,i)):Jh(s)}function Jh(i){var s=i;do{if((s.flags&32768)!==0){SE(s,vs);return}i=s.return;var o=xI(s.alternate,s,br);if(o!==null){Vt=o;return}if(s=s.sibling,s!==null){Vt=s;return}Vt=s=i}while(s!==null);ve===0&&(ve=5)}function SE(i,s){do{var o=II(i.alternate,i);if(o!==null){o.flags&=32767,Vt=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(i=i.sibling,i!==null)){Vt=i;return}Vt=i=o}while(i!==null);ve=6,Vt=null}function AE(i,s,o,u,m,g,T,C,j){i.cancelPendingCommit=null;do tf();while(Le!==0);if((Gt&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(g=s.lanes|s.childLanes,g|=Nm,$e(i,o,g,T,C,j),i===te&&(Vt=te=null,Pt=0),Ho=s,Es=i,Sr=o,jp=g,Bp=m,mE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,zI(tr,function(){return DE(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=tt.T,tt.T=null,m=ot.p,ot.p=2,T=Gt,Gt|=4;try{DI(i,s,o)}finally{Gt=T,ot.p=m,tt.T=u}}Le=1,RE(),CE(),xE()}}function RE(){if(Le===1){Le=0;var i=Es,s=Ho,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=tt.T,tt.T=null;var u=ot.p;ot.p=2;var m=Gt;Gt|=4;try{aE(s,i);var g=eg,T=f_(i.containerInfo),C=g.focusedElem,j=g.selectionRange;if(T!==C&&C&&C.ownerDocument&&h_(C.ownerDocument.documentElement,C)){if(j!==null&&Rm(C)){var X=j.start,et=j.end;if(et===void 0&&(et=X),"selectionStart"in C)C.selectionStart=X,C.selectionEnd=Math.min(et,C.value.length);else{var st=C.ownerDocument||document,W=st&&st.defaultView||window;if(W.getSelection){var Z=W.getSelection(),mt=C.textContent.length,_t=Math.min(j.start,mt),Jt=j.end===void 0?_t:Math.min(j.end,mt);!Z.extend&&_t>Jt&&(T=Jt,Jt=_t,_t=T);var G=c_(C,_t),z=c_(C,Jt);if(G&&z&&(Z.rangeCount!==1||Z.anchorNode!==G.node||Z.anchorOffset!==G.offset||Z.focusNode!==z.node||Z.focusOffset!==z.offset)){var Q=st.createRange();Q.setStart(G.node,G.offset),Z.removeAllRanges(),_t>Jt?(Z.addRange(Q),Z.extend(z.node,z.offset)):(Q.setEnd(z.node,z.offset),Z.addRange(Q))}}}}for(st=[],Z=C;Z=Z.parentNode;)Z.nodeType===1&&st.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<st.length;C++){var rt=st[C];rt.element.scrollLeft=rt.left,rt.element.scrollTop=rt.top}}df=!!tg,eg=tg=null}finally{Gt=m,ot.p=u,tt.T=o}}i.current=s,Le=2}}function CE(){if(Le===2){Le=0;var i=Es,s=Ho,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=tt.T,tt.T=null;var u=ot.p;ot.p=2;var m=Gt;Gt|=4;try{eE(i,s.alternate,s)}finally{Gt=m,ot.p=u,tt.T=o}}Le=3}}function xE(){if(Le===4||Le===3){Le=0,Vl();var i=Es,s=Ho,o=Sr,u=mE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Le=5:(Le=0,Ho=Es=null,IE(i,i.pendingLanes));var m=i.pendingLanes;if(m===0&&(Ts=null),Bl(o),s=s.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(Fr,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=tt.T,m=ot.p,ot.p=2,tt.T=null;try{for(var g=i.onRecoverableError,T=0;T<u.length;T++){var C=u[T];g(C.value,{componentStack:C.stack})}}finally{tt.T=s,ot.p=m}}(Sr&3)!==0&&tf(),ji(i),m=i.pendingLanes,(o&261930)!==0&&(m&42)!==0?i===zp?Su++:(Su=0,zp=i):Su=0,Au(0)}}function IE(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,su(s)))}function tf(){return RE(),CE(),xE(),DE()}function DE(){if(Le!==5)return!1;var i=Es,s=jp;jp=0;var o=Bl(Sr),u=tt.T,m=ot.p;try{ot.p=32>o?32:o,tt.T=null,o=Bp,Bp=null;var g=Es,T=Sr;if(Le=0,Ho=Es=null,Sr=0,(Gt&6)!==0)throw Error(r(331));var C=Gt;if(Gt|=4,hE(g.current),lE(g,g.current,T,o),Gt=C,Au(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(Fr,g)}catch{}return!0}finally{ot.p=m,tt.T=u,IE(i,s)}}function NE(i,s,o){s=Jn(o,s),s=_p(i.stateNode,s,2),i=ms(i,s,2),i!==null&&(Gr(i,2),ji(i))}function Qt(i,s,o){if(i.tag===3)NE(i,i,o);else for(;s!==null;){if(s.tag===3){NE(s,i,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ts===null||!Ts.has(u))){i=Jn(o,i),o=MT(2),u=ms(s,o,2),u!==null&&(OT(o,u,s,i),Gr(u,2),ji(u));break}}s=s.return}}function qp(i,s,o){var u=i.pingCache;if(u===null){u=i.pingCache=new OI;var m=new Set;u.set(s,m)}else m=u.get(s),m===void 0&&(m=new Set,u.set(s,m));m.has(o)||(Pp=!0,m.add(o),i=UI.bind(null,i,s,o),s.then(i,i))}function UI(i,s,o){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,te===i&&(Pt&o)===o&&(ve===4||ve===3&&(Pt&62914560)===Pt&&300>Ke()-Yh?(Gt&2)===0&&qo(i,0):Lp|=o,Fo===Pt&&(Fo=0)),ji(i)}function ME(i,s){s===0&&(s=Ll()),i=_a(i,s),i!==null&&(Gr(i,s),ji(i))}function jI(i){var s=i.memoizedState,o=0;s!==null&&(o=s.retryLane),ME(i,o)}function BI(i,s){var o=0;switch(i.tag){case 31:case 13:var u=i.stateNode,m=i.memoizedState;m!==null&&(o=m.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(s),ME(i,o)}function zI(i,s){return ra(i,s)}var ef=null,Ko=null,Gp=!1,nf=!1,Kp=!1,bs=0;function ji(i){i!==Ko&&i.next===null&&(Ko===null?ef=Ko=i:Ko=Ko.next=i),nf=!0,Gp||(Gp=!0,HI())}function Au(i,s){if(!Kp&&nf){Kp=!0;do for(var o=!1,u=ef;u!==null;){if(i!==0){var m=u.pendingLanes;if(m===0)var g=0;else{var T=u.suspendedLanes,C=u.pingedLanes;g=(1<<31-mn(42|i)+1)-1,g&=m&~(T&~C),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,PE(u,g))}else g=Pt,g=Qn(u,u===te?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||qr(u,g)||(o=!0,PE(u,g));u=u.next}while(o);Kp=!1}}function FI(){OE()}function OE(){nf=Gp=!1;var i=0;bs!==0&&JI()&&(i=bs);for(var s=Ke(),o=null,u=ef;u!==null;){var m=u.next,g=VE(u,s);g===0?(u.next=null,o===null?ef=m:o.next=m,m===null&&(Ko=o)):(o=u,(i!==0||(g&3)!==0)&&(nf=!0)),u=m}Le!==0&&Le!==5||Au(i),bs!==0&&(bs=0)}function VE(i,s){for(var o=i.suspendedLanes,u=i.pingedLanes,m=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var T=31-mn(g),C=1<<T,j=m[T];j===-1?((C&o)===0||(C&u)!==0)&&(m[T]=ho(C,s)):j<=s&&(i.expiredLanes|=C),g&=~C}if(s=te,o=Pt,o=Qn(i,i===s?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,o===0||i===s&&(Yt===2||Yt===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&co(u),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||qr(i,o)){if(s=o&-o,s===i.callbackPriority)return s;switch(u!==null&&co(u),Bl(o)){case 2:case 8:o=je;break;case 32:o=tr;break;case 268435456:o=kl;break;default:o=tr}return u=kE.bind(null,i),o=ra(o,u),i.callbackPriority=s,i.callbackNode=o,s}return u!==null&&u!==null&&co(u),i.callbackPriority=2,i.callbackNode=null,2}function kE(i,s){if(Le!==0&&Le!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(tf()&&i.callbackNode!==o)return null;var u=Pt;return u=Qn(i,i===te?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(gE(i,u,s),VE(i,Ke()),i.callbackNode!=null&&i.callbackNode===o?kE.bind(null,i):null)}function PE(i,s){if(tf())return null;gE(i,s,!0)}function HI(){eD(function(){(Gt&6)!==0?ra(Pe,FI):OE()})}function $p(){if(bs===0){var i=No;i===0&&(i=aa,aa<<=1,(aa&261888)===0&&(aa=256)),bs=i}return bs}function LE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Oi(""+i)}function UE(i,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,i.id&&o.setAttribute("form",i.id),s.parentNode.insertBefore(o,s),i=new FormData(i),o.parentNode.removeChild(o),i}function qI(i,s,o,u,m){if(s==="submit"&&o&&o.stateNode===m){var g=LE((m[Ye]||null).action),T=u.submitter;T&&(s=(s=T[Ye]||null)?LE(s.formAction):T.getAttribute("formAction"),s!==null&&(g=s,T=null));var C=new fa("action","action",null,u,m);i.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(bs!==0){var j=T?UE(m,T):new FormData(m);dp(o,{pending:!0,data:j,method:m.method,action:g},null,j)}}else typeof g=="function"&&(C.preventDefault(),j=T?UE(m,T):new FormData(m),dp(o,{pending:!0,data:j,method:m.method,action:g},g,j))},currentTarget:m}]})}}for(var Yp=0;Yp<Dm.length;Yp++){var Qp=Dm[Yp],GI=Qp.toLowerCase(),KI=Qp[0].toUpperCase()+Qp.slice(1);gi(GI,"on"+KI)}gi(p_,"onAnimationEnd"),gi(g_,"onAnimationIteration"),gi(y_,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(lI,"onTransitionRun"),gi(uI,"onTransitionStart"),gi(cI,"onTransitionCancel"),gi(v_,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$I=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ru));function jE(i,s){s=(s&4)!==0;for(var o=0;o<i.length;o++){var u=i[o],m=u.event;u=u.listeners;t:{var g=void 0;if(s)for(var T=u.length-1;0<=T;T--){var C=u[T],j=C.instance,X=C.currentTarget;if(C=C.listener,j!==g&&m.isPropagationStopped())break t;g=C,m.currentTarget=X;try{g(m)}catch(et){yh(et)}m.currentTarget=null,g=j}else for(T=0;T<u.length;T++){if(C=u[T],j=C.instance,X=C.currentTarget,C=C.listener,j!==g&&m.isPropagationStopped())break t;g=C,m.currentTarget=X;try{g(m)}catch(et){yh(et)}m.currentTarget=null,g=j}}}}function kt(i,s){var o=s[Yr];o===void 0&&(o=s[Yr]=new Set);var u=i+"__bubble";o.has(u)||(BE(s,i,2,!1),o.add(u))}function Xp(i,s,o){var u=0;s&&(u|=4),BE(o,i,u,s)}var rf="_reactListening"+Math.random().toString(36).slice(2);function Wp(i){if(!i[rf]){i[rf]=!0,fo.forEach(function(o){o!=="selectionchange"&&($I.has(o)||Xp(o,!1,i),Xp(o,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[rf]||(s[rf]=!0,Xp("selectionchange",!1,s))}}function BE(i,s,o,u){switch(pw(s)){case 2:var m=ED;break;case 8:m=wD;break;default:m=fg}o=m.bind(null,s,o,i),m=void 0,!Yl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),u?m!==void 0?i.addEventListener(s,o,{capture:!0,passive:m}):i.addEventListener(s,o,!0):m!==void 0?i.addEventListener(s,o,{passive:m}):i.addEventListener(s,o,!1)}function Zp(i,s,o,u,m){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var C=u.stateNode.containerInfo;if(C===m)break;if(T===4)for(T=u.return;T!==null;){var j=T.tag;if((j===3||j===4)&&T.stateNode.containerInfo===m)return;T=T.return}for(;C!==null;){if(T=rr(C),T===null)return;if(j=T.tag,j===5||j===6||j===26||j===27){u=g=T;continue t}C=C.parentNode}}u=u.return}eh(function(){var X=g,et=vo(o),st=[];t:{var W=__.get(i);if(W!==void 0){var Z=fa,mt=i;switch(i){case"keypress":if(ha(o)===0)break t;case"keydown":case"keyup":Z=ch;break;case"focusin":mt="focus",Z=rs;break;case"focusout":mt="blur",Z=rs;break;case"beforeblur":case"afterblur":Z=rs;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=ih;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=rh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=fh;break;case p_:case g_:case y_:Z=Eo;break;case v_:Z=wo;break;case"scroll":case"scrollend":Z=nh;break;case"wheel":Z=mh;break;case"copy":case"cut":case"paste":Z=ah;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Jl;break;case"toggle":case"beforetoggle":Z=as}var _t=(s&4)!==0,Jt=!_t&&(i==="scroll"||i==="scrollend"),G=_t?W!==null?W+"Capture":null:W;_t=[];for(var z=X,Q;z!==null;){var rt=z;if(Q=rt.stateNode,rt=rt.tag,rt!==5&&rt!==26&&rt!==27||Q===null||G===null||(rt=En(z,G),rt!=null&&_t.push(Cu(z,rt,Q))),Jt)break;z=z.return}0<_t.length&&(W=new Z(W,mt,null,o,et),st.push({event:W,listeners:_t}))}}if((s&7)===0){t:{if(W=i==="mouseover"||i==="pointerover",Z=i==="mouseout"||i==="pointerout",W&&o!==yo&&(mt=o.relatedTarget||o.fromElement)&&(rr(mt)||mt[Di]))break t;if((Z||W)&&(W=et.window===et?et:(W=et.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(mt=o.relatedTarget||o.toElement,Z=X,mt=mt?rr(mt):null,mt!==null&&(Jt=l(mt),_t=mt.tag,mt!==Jt||_t!==5&&_t!==27&&_t!==6)&&(mt=null)):(Z=null,mt=X),Z!==mt)){if(_t=ih,rt="onMouseLeave",G="onMouseEnter",z="mouse",(i==="pointerout"||i==="pointerover")&&(_t=Jl,rt="onPointerLeave",G="onPointerEnter",z="pointer"),Jt=Z==null?W:la(Z),Q=mt==null?W:la(mt),W=new _t(rt,z+"leave",Z,o,et),W.target=Jt,W.relatedTarget=Q,rt=null,rr(et)===X&&(_t=new _t(G,z+"enter",mt,o,et),_t.target=Q,_t.relatedTarget=Jt,rt=_t),Jt=rt,Z&&mt)e:{for(_t=YI,G=Z,z=mt,Q=0,rt=G;rt;rt=_t(rt))Q++;rt=0;for(var vt=z;vt;vt=_t(vt))rt++;for(;0<Q-rt;)G=_t(G),Q--;for(;0<rt-Q;)z=_t(z),rt--;for(;Q--;){if(G===z||z!==null&&G===z.alternate){_t=G;break e}G=_t(G),z=_t(z)}_t=null}else _t=null;Z!==null&&zE(st,W,Z,_t,!1),mt!==null&&Jt!==null&&zE(st,Jt,mt,_t,!0)}}t:{if(W=X?la(X):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var Ht=r_;else if(wn(W))if(s_)Ht=sI;else{Ht=iI;var pt=nI}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?X&&Kl(X.elementType)&&(Ht=r_):Ht=rI;if(Ht&&(Ht=Ht(i,X))){ga(st,Ht,o,et);break t}pt&&pt(i,W,X),i==="focusout"&&X&&W.type==="number"&&X.memoizedProps.value!=null&&go(W,"number",W.value)}switch(pt=X?la(X):window,i){case"focusin":(wn(pt)||pt.contentEditable==="true")&&(bo=pt,Cm=X,nu=null);break;case"focusout":nu=Cm=bo=null;break;case"mousedown":xm=!0;break;case"contextmenu":case"mouseup":case"dragend":xm=!1,d_(st,o,et);break;case"selectionchange":if(oI)break;case"keydown":case"keyup":d_(st,o,et)}var xt;if(v)t:{switch(i){case"compositionstart":var Lt="onCompositionStart";break t;case"compositionend":Lt="onCompositionEnd";break t;case"compositionupdate":Lt="onCompositionUpdate";break t}Lt=void 0}else Nt?Kt(i,o)&&(Lt="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Lt="onCompositionStart");Lt&&($&&o.locale!=="ko"&&(Nt||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&Nt&&(xt=ts()):(kn=et,_o="value"in kn?kn.value:kn.textContent,Nt=!0)),pt=sf(X,Lt),0<pt.length&&(Lt=new Xl(Lt,i,null,o,et),st.push({event:Lt,listeners:pt}),xt?Lt.data=xt:(xt=xe(o),xt!==null&&(Lt.data=xt)))),(xt=I?ze(i,o):Fe(i,o))&&(Lt=sf(X,"onBeforeInput"),0<Lt.length&&(pt=new Xl("onBeforeInput","beforeinput",null,o,et),st.push({event:pt,listeners:Lt}),pt.data=xt)),qI(st,i,X,o,et)}jE(st,s)})}function Cu(i,s,o){return{instance:i,listener:s,currentTarget:o}}function sf(i,s){for(var o=s+"Capture",u=[];i!==null;){var m=i,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=En(i,o),m!=null&&u.unshift(Cu(i,m,g)),m=En(i,s),m!=null&&u.push(Cu(i,m,g))),i.tag===3)return u;i=i.return}return[]}function YI(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function zE(i,s,o,u,m){for(var g=s._reactName,T=[];o!==null&&o!==u;){var C=o,j=C.alternate,X=C.stateNode;if(C=C.tag,j!==null&&j===u)break;C!==5&&C!==26&&C!==27||X===null||(j=X,m?(X=En(o,g),X!=null&&T.unshift(Cu(o,X,j))):m||(X=En(o,g),X!=null&&T.push(Cu(o,X,j)))),o=o.return}T.length!==0&&i.push({event:s,listeners:T})}var QI=/\r\n?/g,XI=/\u0000|\uFFFD/g;function FE(i){return(typeof i=="string"?i:""+i).replace(QI,`
`).replace(XI,"")}function HE(i,s){return s=FE(s),FE(i)===s}function Zt(i,s,o,u,m,g){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Wn(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Wn(i,""+u);break;case"className":Wr(i,"class",u);break;case"tabIndex":Wr(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Wr(i,o,u);break;case"style":Jc(i,u,g);break;case"data":if(s!=="object"){Wr(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){i.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Oi(""+u),i.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&Zt(i,s,"name",m.name,m,null),Zt(i,s,"formEncType",m.formEncType,m,null),Zt(i,s,"formMethod",m.formMethod,m,null),Zt(i,s,"formTarget",m.formTarget,m,null)):(Zt(i,s,"encType",m.encType,m,null),Zt(i,s,"method",m.method,m,null),Zt(i,s,"target",m.target,m,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(o);break}u=Oi(""+u),i.setAttribute(o,u);break;case"onClick":u!=null&&(i.onclick=Be);break;case"onScroll":u!=null&&kt("scroll",i);break;case"onScrollEnd":u!=null&&kt("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}o=Oi(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""+u):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":u===!0?i.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(o,u):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(o,u):i.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(o):i.setAttribute(o,u);break;case"popover":kt("beforetoggle",i),kt("toggle",i),Xr(i,"popover",u);break;case"xlinkActuate":Xn(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Xn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Xn(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Xn(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Xn(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Xn(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Xn(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Xn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Xn(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Xr(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Em.get(o)||o,Xr(i,o,u))}}function Jp(i,s,o,u,m,g){switch(o){case"style":Jc(i,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(o=u.__html,o!=null){if(m.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof u=="string"?Wn(i,u):(typeof u=="number"||typeof u=="bigint")&&Wn(i,""+u);break;case"onScroll":u!=null&&kt("scroll",i);break;case"onScrollEnd":u!=null&&kt("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Be);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qr.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),s=o.slice(2,m?o.length-7:void 0),g=i[Ye]||null,g=g!=null?g[o]:null,typeof g=="function"&&i.removeEventListener(s,g,m),typeof u=="function")){typeof g!="function"&&g!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(s,u,m);break t}o in i?i[o]=u:u===!0?i.setAttribute(o,""):Xr(i,o,u)}}}function Ze(i,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",i),kt("load",i);var u=!1,m=!1,g;for(g in o)if(o.hasOwnProperty(g)){var T=o[g];if(T!=null)switch(g){case"src":u=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Zt(i,s,g,T,o,null)}}m&&Zt(i,s,"srcSet",o.srcSet,o,null),u&&Zt(i,s,"src",o.src,o,null);return;case"input":kt("invalid",i);var C=g=T=m=null,j=null,X=null;for(u in o)if(o.hasOwnProperty(u)){var et=o[u];if(et!=null)switch(u){case"name":m=et;break;case"type":T=et;break;case"checked":j=et;break;case"defaultChecked":X=et;break;case"value":g=et;break;case"defaultValue":C=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(r(137,s));break;default:Zt(i,s,u,et,o,null)}}ua(i,g,C,j,X,T,m,!1);return;case"select":kt("invalid",i),u=T=g=null;for(m in o)if(o.hasOwnProperty(m)&&(C=o[m],C!=null))switch(m){case"value":g=C;break;case"defaultValue":T=C;break;case"multiple":u=C;default:Zt(i,s,m,C,o,null)}s=g,o=T,i.multiple=!!u,s!=null?Ft(i,!!u,s,!1):o!=null&&Ft(i,!!u,o,!0);return;case"textarea":kt("invalid",i),g=m=u=null;for(T in o)if(o.hasOwnProperty(T)&&(C=o[T],C!=null))switch(T){case"value":u=C;break;case"defaultValue":m=C;break;case"children":g=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:Zt(i,s,T,C,o,null)}Jr(i,u,m,g);return;case"option":for(j in o)if(o.hasOwnProperty(j)&&(u=o[j],u!=null))switch(j){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Zt(i,s,j,u,o,null)}return;case"dialog":kt("beforetoggle",i),kt("toggle",i),kt("cancel",i),kt("close",i);break;case"iframe":case"object":kt("load",i);break;case"video":case"audio":for(u=0;u<Ru.length;u++)kt(Ru[u],i);break;case"image":kt("error",i),kt("load",i);break;case"details":kt("toggle",i);break;case"embed":case"source":case"link":kt("error",i),kt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in o)if(o.hasOwnProperty(X)&&(u=o[X],u!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Zt(i,s,X,u,o,null)}return;default:if(Kl(s)){for(et in o)o.hasOwnProperty(et)&&(u=o[et],u!==void 0&&Jp(i,s,et,u,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null&&Zt(i,s,C,u,o,null))}function WI(i,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,T=null,C=null,j=null,X=null,et=null;for(Z in o){var st=o[Z];if(o.hasOwnProperty(Z)&&st!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":j=st;default:u.hasOwnProperty(Z)||Zt(i,s,Z,null,u,st)}}for(var W in u){var Z=u[W];if(st=o[W],u.hasOwnProperty(W)&&(Z!=null||st!=null))switch(W){case"type":g=Z;break;case"name":m=Z;break;case"checked":X=Z;break;case"defaultChecked":et=Z;break;case"value":T=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:Z!==st&&Zt(i,s,W,Z,u,st)}}Zr(i,T,C,j,X,et,g,m);return;case"select":Z=T=C=W=null;for(g in o)if(j=o[g],o.hasOwnProperty(g)&&j!=null)switch(g){case"value":break;case"multiple":Z=j;default:u.hasOwnProperty(g)||Zt(i,s,g,null,u,j)}for(m in u)if(g=u[m],j=o[m],u.hasOwnProperty(m)&&(g!=null||j!=null))switch(m){case"value":W=g;break;case"defaultValue":C=g;break;case"multiple":T=g;default:g!==j&&Zt(i,s,m,g,u,j)}s=C,o=T,u=Z,W!=null?Ft(i,!!o,W,!1):!!u!=!!o&&(s!=null?Ft(i,!!o,s,!0):Ft(i,!!o,o?[]:"",!1));return;case"textarea":Z=W=null;for(C in o)if(m=o[C],o.hasOwnProperty(C)&&m!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Zt(i,s,C,null,u,m)}for(T in u)if(m=u[T],g=o[T],u.hasOwnProperty(T)&&(m!=null||g!=null))switch(T){case"value":W=m;break;case"defaultValue":Z=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==g&&Zt(i,s,T,m,u,g)}ca(i,W,Z);return;case"option":for(var mt in o)if(W=o[mt],o.hasOwnProperty(mt)&&W!=null&&!u.hasOwnProperty(mt))switch(mt){case"selected":i.selected=!1;break;default:Zt(i,s,mt,null,u,W)}for(j in u)if(W=u[j],Z=o[j],u.hasOwnProperty(j)&&W!==Z&&(W!=null||Z!=null))switch(j){case"selected":i.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Zt(i,s,j,W,u,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _t in o)W=o[_t],o.hasOwnProperty(_t)&&W!=null&&!u.hasOwnProperty(_t)&&Zt(i,s,_t,null,u,W);for(X in u)if(W=u[X],Z=o[X],u.hasOwnProperty(X)&&W!==Z&&(W!=null||Z!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(r(137,s));break;default:Zt(i,s,X,W,u,Z)}return;default:if(Kl(s)){for(var Jt in o)W=o[Jt],o.hasOwnProperty(Jt)&&W!==void 0&&!u.hasOwnProperty(Jt)&&Jp(i,s,Jt,void 0,u,W);for(et in u)W=u[et],Z=o[et],!u.hasOwnProperty(et)||W===Z||W===void 0&&Z===void 0||Jp(i,s,et,W,u,Z);return}}for(var G in o)W=o[G],o.hasOwnProperty(G)&&W!=null&&!u.hasOwnProperty(G)&&Zt(i,s,G,null,u,W);for(st in u)W=u[st],Z=o[st],!u.hasOwnProperty(st)||W===Z||W==null&&Z==null||Zt(i,s,st,W,u,Z)}function qE(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZI(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var m=o[u],g=m.transferSize,T=m.initiatorType,C=m.duration;if(g&&C&&qE(T)){for(T=0,C=m.responseEnd,u+=1;u<o.length;u++){var j=o[u],X=j.startTime;if(X>C)break;var et=j.transferSize,st=j.initiatorType;et&&qE(st)&&(j=j.responseEnd,T+=et*(j<C?1:(C-X)/(j-X)))}if(--u,s+=8*(g+T)/(m.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var tg=null,eg=null;function af(i){return i.nodeType===9?i:i.ownerDocument}function GE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function KE(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function ng(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ig=null;function JI(){var i=window.event;return i&&i.type==="popstate"?i===ig?!1:(ig=i,!0):(ig=null,!1)}var $E=typeof setTimeout=="function"?setTimeout:void 0,tD=typeof clearTimeout=="function"?clearTimeout:void 0,YE=typeof Promise=="function"?Promise:void 0,eD=typeof queueMicrotask=="function"?queueMicrotask:typeof YE<"u"?function(i){return YE.resolve(null).then(i).catch(nD)}:$E;function nD(i){setTimeout(function(){throw i})}function Ss(i){return i==="head"}function QE(i,s){var o=s,u=0;do{var m=o.nextSibling;if(i.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(u===0){i.removeChild(m),Xo(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")xu(i.ownerDocument.documentElement);else if(o==="head"){o=i.ownerDocument.head,xu(o);for(var g=o.firstChild;g;){var T=g.nextSibling,C=g.nodeName;g[ir]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=T}}else o==="body"&&xu(i.ownerDocument.body);o=m}while(o);Xo(s)}function XE(i,s){var o=i;i=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(i===0)break;i--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||i++;o=u}while(o)}function rg(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":rg(o),oa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function iD(i,s,o,u){for(;i.nodeType===1;){var m=o;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[ir])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==m.rel||i.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||i.getAttribute("title")!==(m.title==null?null:m.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(m.src==null?null:m.src)||i.getAttribute("type")!==(m.type==null?null:m.type)||i.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=ri(i.nextSibling),i===null)break}return null}function rD(i,s,o){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=ri(i.nextSibling),i===null))return null;return i}function WE(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=ri(i.nextSibling),i===null))return null;return i}function sg(i){return i.data==="$?"||i.data==="$~"}function ag(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function sD(i,s){var o=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function ri(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var og=null;function ZE(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="/$"||o==="/&"){if(s===0)return ri(i.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}i=i.nextSibling}return null}function JE(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return i;s--}else o!=="/$"&&o!=="/&"||s++}i=i.previousSibling}return null}function tw(i,s,o){switch(s=af(o),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function xu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);oa(i)}var si=new Map,ew=new Set;function of(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ar=ot.d;ot.d={f:aD,r:oD,D:lD,C:uD,L:cD,m:hD,X:dD,S:fD,M:mD};function aD(){var i=Ar.f(),s=Wh();return i||s}function oD(i){var s=sr(i);s!==null&&s.tag===5&&s.type==="form"?vT(s):Ar.r(i)}var $o=typeof document>"u"?null:document;function nw(i,s,o){var u=$o;if(u&&typeof s=="string"&&s){var m=ge(s);m='link[rel="'+i+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),ew.has(m)||(ew.add(m),i={rel:i,crossOrigin:o,href:s},u.querySelector(m)===null&&(s=u.createElement("link"),Ze(s,"link",i),be(s),u.head.appendChild(s)))}}function lD(i){Ar.D(i),nw("dns-prefetch",i,null)}function uD(i,s){Ar.C(i,s),nw("preconnect",i,s)}function cD(i,s,o){Ar.L(i,s,o);var u=$o;if(u&&i&&s){var m='link[rel="preload"][as="'+ge(s)+'"]';s==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+ge(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+ge(o.imageSizes)+'"]')):m+='[href="'+ge(i)+'"]';var g=m;switch(s){case"style":g=Yo(i);break;case"script":g=Qo(i)}si.has(g)||(i=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:i,as:s},o),si.set(g,i),u.querySelector(m)!==null||s==="style"&&u.querySelector(Iu(g))||s==="script"&&u.querySelector(Du(g))||(s=u.createElement("link"),Ze(s,"link",i),be(s),u.head.appendChild(s)))}}function hD(i,s){Ar.m(i,s);var o=$o;if(o&&i){var u=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+ge(u)+'"][href="'+ge(i)+'"]',g=m;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Qo(i)}if(!si.has(g)&&(i=_({rel:"modulepreload",href:i},s),si.set(g,i),o.querySelector(m)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Du(g)))return}u=o.createElement("link"),Ze(u,"link",i),be(u),o.head.appendChild(u)}}}function fD(i,s,o){Ar.S(i,s,o);var u=$o;if(u&&i){var m=mi(u).hoistableStyles,g=Yo(i);s=s||"default";var T=m.get(g);if(!T){var C={loading:0,preload:null};if(T=u.querySelector(Iu(g)))C.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":s},o),(o=si.get(g))&&lg(i,o);var j=T=u.createElement("link");be(j),Ze(j,"link",i),j._p=new Promise(function(X,et){j.onload=X,j.onerror=et}),j.addEventListener("load",function(){C.loading|=1}),j.addEventListener("error",function(){C.loading|=2}),C.loading|=4,lf(T,s,u)}T={type:"stylesheet",instance:T,count:1,state:C},m.set(g,T)}}}function dD(i,s){Ar.X(i,s);var o=$o;if(o&&i){var u=mi(o).hoistableScripts,m=Qo(i),g=u.get(m);g||(g=o.querySelector(Du(m)),g||(i=_({src:i,async:!0},s),(s=si.get(m))&&ug(i,s),g=o.createElement("script"),be(g),Ze(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function mD(i,s){Ar.M(i,s);var o=$o;if(o&&i){var u=mi(o).hoistableScripts,m=Qo(i),g=u.get(m);g||(g=o.querySelector(Du(m)),g||(i=_({src:i,async:!0,type:"module"},s),(s=si.get(m))&&ug(i,s),g=o.createElement("script"),be(g),Ze(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(m,g))}}function iw(i,s,o,u){var m=(m=Et.current)?of(m):null;if(!m)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Yo(o.href),o=mi(m).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Yo(o.href);var g=mi(m).hoistableStyles,T=g.get(i);if(T||(m=m.ownerDocument||m,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,T),(g=m.querySelector(Iu(i)))&&!g._p&&(T.instance=g,T.state.loading=5),si.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},si.set(i,o),g||pD(m,i,o,T.state))),s&&u===null)throw Error(r(528,""));return T}if(s&&u!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Qo(o),o=mi(m).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Yo(i){return'href="'+ge(i)+'"'}function Iu(i){return'link[rel="stylesheet"]['+i+"]"}function rw(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function pD(i,s,o,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Ze(s,"link",o),be(s),i.head.appendChild(s))}function Qo(i){return'[src="'+ge(i)+'"]'}function Du(i){return"script[async]"+i}function sw(i,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+ge(o.href)+'"]');if(u)return s.instance=u,be(u),u;var m=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),be(u),Ze(u,"style",m),lf(u,o.precedence,i),s.instance=u;case"stylesheet":m=Yo(o.href);var g=i.querySelector(Iu(m));if(g)return s.state.loading|=4,s.instance=g,be(g),g;u=rw(o),(m=si.get(m))&&lg(u,m),g=(i.ownerDocument||i).createElement("link"),be(g);var T=g;return T._p=new Promise(function(C,j){T.onload=C,T.onerror=j}),Ze(g,"link",u),s.state.loading|=4,lf(g,o.precedence,i),s.instance=g;case"script":return g=Qo(o.src),(m=i.querySelector(Du(g)))?(s.instance=m,be(m),m):(u=o,(m=si.get(g))&&(u=_({},o),ug(u,m)),i=i.ownerDocument||i,m=i.createElement("script"),be(m),Ze(m,"link",u),i.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,lf(u,o.precedence,i));return s.instance}function lf(i,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=u.length?u[u.length-1]:null,g=m,T=0;T<u.length;T++){var C=u[T];if(C.dataset.precedence===s)g=C;else if(g!==m)break}g?g.parentNode.insertBefore(i,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(i,s.firstChild))}function lg(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function ug(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var uf=null;function aw(i,s,o){if(uf===null){var u=new Map,m=uf=new Map;m.set(o,u)}else m=uf,u=m.get(o),u||(u=new Map,m.set(o,u));if(u.has(i))return u;for(u.set(i,null),o=o.getElementsByTagName(i),m=0;m<o.length;m++){var g=o[m];if(!(g[ir]||g[pe]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(s)||"";T=i+T;var C=u.get(T);C?C.push(g):u.set(T,[g])}}return u}function ow(i,s,o){i=i.ownerDocument||i,i.head.insertBefore(o,s==="title"?i.querySelector("head > title"):null)}function gD(i,s,o){if(o===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function lw(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function yD(i,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=Yo(u.href),g=s.querySelector(Iu(m));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=cf.bind(i),s.then(i,i)),o.state.loading|=4,o.instance=g,be(g);return}g=s.ownerDocument||s,u=rw(u),(m=si.get(m))&&lg(u,m),g=g.createElement("link"),be(g);var T=g;T._p=new Promise(function(C,j){T.onload=C,T.onerror=j}),Ze(g,"link",u),o.instance=g}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(i.count++,o=cf.bind(i),s.addEventListener("load",o),s.addEventListener("error",o))}}var cg=0;function vD(i,s){return i.stylesheets&&i.count===0&&ff(i,i.stylesheets),0<i.count||0<i.imgCount?function(o){var u=setTimeout(function(){if(i.stylesheets&&ff(i,i.stylesheets),i.unsuspend){var g=i.unsuspend;i.unsuspend=null,g()}},6e4+s);0<i.imgBytes&&cg===0&&(cg=62500*ZI());var m=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&ff(i,i.stylesheets),i.unsuspend)){var g=i.unsuspend;i.unsuspend=null,g()}},(i.imgBytes>cg?50:800)+s);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(m)}}:null}function cf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ff(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var hf=null;function ff(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,hf=new Map,s.forEach(_D,i),hf=null,cf.call(i))}function _D(i,s){if(!(s.state.loading&4)){var o=hf.get(i);if(o)var u=o.get(null);else{o=new Map,hf.set(i,o);for(var m=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var T=m[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),u=T)}u&&o.set(null,u)}m=s.instance,T=m.getAttribute("data-precedence"),g=o.get(T)||u,g===u&&o.set(null,m),o.set(T,m),this.count++,u=cf.bind(this),m.addEventListener("load",u),m.addEventListener("error",u),g?g.parentNode.insertBefore(m,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(m,i.firstChild)),s.state.loading|=4}}var Nu={$$typeof:k,Provider:null,Consumer:null,_currentValue:ft,_currentValue2:ft,_threadCount:0};function TD(i,s,o,u,m,g,T,C,j){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=er(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=er(0),this.hiddenUpdates=er(null),this.identifierPrefix=u,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function uw(i,s,o,u,m,g,T,C,j,X,et,st){return i=new TD(i,s,o,T,j,X,et,st,C),s=1,g===!0&&(s|=24),g=Ln(3,null,null,s),i.current=g,g.stateNode=i,s=Hm(),s.refCount++,i.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:s},$m(g),i}function cw(i){return i?(i=Ro,i):Ro}function hw(i,s,o,u,m,g){m=cw(m),u.context===null?u.context=m:u.pendingContext=m,u=ds(s),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=ms(i,u,s),o!==null&&(Cn(o,i,s),uu(o,i,s))}function fw(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<s?o:s}}function hg(i,s){fw(i,s),(i=i.alternate)&&fw(i,s)}function dw(i){if(i.tag===13||i.tag===31){var s=_a(i,67108864);s!==null&&Cn(s,i,67108864),hg(i,67108864)}}function mw(i){if(i.tag===13||i.tag===31){var s=Fn();s=jl(s);var o=_a(i,s);o!==null&&Cn(o,i,s),hg(i,s)}}var df=!0;function ED(i,s,o,u){var m=tt.T;tt.T=null;var g=ot.p;try{ot.p=2,fg(i,s,o,u)}finally{ot.p=g,tt.T=m}}function wD(i,s,o,u){var m=tt.T;tt.T=null;var g=ot.p;try{ot.p=8,fg(i,s,o,u)}finally{ot.p=g,tt.T=m}}function fg(i,s,o,u){if(df){var m=dg(u);if(m===null)Zp(i,s,u,mf,o),gw(i,u);else if(SD(m,i,s,o,u))u.stopPropagation();else if(gw(i,u),s&4&&-1<bD.indexOf(i)){for(;m!==null;){var g=sr(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=di(g.pendingLanes);if(T!==0){var C=g;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var j=1<<31-mn(T);C.entanglements[1]|=j,T&=~j}ji(g),(Gt&6)===0&&(Qh=Ke()+500,Au(0))}}break;case 31:case 13:C=_a(g,2),C!==null&&Cn(C,g,2),Wh(),hg(g,2)}if(g=dg(u),g===null&&Zp(i,s,u,mf,o),g===m)break;m=g}m!==null&&u.stopPropagation()}else Zp(i,s,u,null,o)}}function dg(i){return i=vo(i),mg(i)}var mf=null;function mg(i){if(mf=null,i=rr(i),i!==null){var s=l(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=c(s),i!==null)return i;i=null}else if(o===31){if(i=f(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return mf=i,null}function pw(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Kc()){case Pe:return 2;case je:return 8;case tr:case $c:return 32;case kl:return 268435456;default:return 32}default:return 32}}var pg=!1,As=null,Rs=null,Cs=null,Mu=new Map,Ou=new Map,xs=[],bD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gw(i,s){switch(i){case"focusin":case"focusout":As=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":Mu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ou.delete(s.pointerId)}}function Vu(i,s,o,u,m,g){return i===null||i.nativeEvent!==g?(i={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[m]},s!==null&&(s=sr(s),s!==null&&dw(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),i)}function SD(i,s,o,u,m){switch(s){case"focusin":return As=Vu(As,i,s,o,u,m),!0;case"dragenter":return Rs=Vu(Rs,i,s,o,u,m),!0;case"mouseover":return Cs=Vu(Cs,i,s,o,u,m),!0;case"pointerover":var g=m.pointerId;return Mu.set(g,Vu(Mu.get(g)||null,i,s,o,u,m)),!0;case"gotpointercapture":return g=m.pointerId,Ou.set(g,Vu(Ou.get(g)||null,i,s,o,u,m)),!0}return!1}function yw(i){var s=rr(i.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){i.blockedOn=s,Qc(i.priority,function(){mw(o)});return}}else if(s===31){if(s=f(o),s!==null){i.blockedOn=s,Qc(i.priority,function(){mw(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function pf(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var o=dg(i.nativeEvent);if(o===null){o=i.nativeEvent;var u=new o.constructor(o.type,o);yo=u,o.target.dispatchEvent(u),yo=null}else return s=sr(o),s!==null&&dw(s),i.blockedOn=o,!1;s.shift()}return!0}function vw(i,s,o){pf(i)&&o.delete(s)}function AD(){pg=!1,As!==null&&pf(As)&&(As=null),Rs!==null&&pf(Rs)&&(Rs=null),Cs!==null&&pf(Cs)&&(Cs=null),Mu.forEach(vw),Ou.forEach(vw)}function gf(i,s){i.blockedOn===s&&(i.blockedOn=null,pg||(pg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,AD)))}var yf=null;function _w(i){yf!==i&&(yf=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){yf===i&&(yf=null);for(var s=0;s<i.length;s+=3){var o=i[s],u=i[s+1],m=i[s+2];if(typeof u!="function"){if(mg(u||o)===null)continue;break}var g=sr(o);g!==null&&(i.splice(s,3),s-=3,dp(g,{pending:!0,data:m,method:o.method,action:u},u,m))}}))}function Xo(i){function s(j){return gf(j,i)}As!==null&&gf(As,i),Rs!==null&&gf(Rs,i),Cs!==null&&gf(Cs,i),Mu.forEach(s),Ou.forEach(s);for(var o=0;o<xs.length;o++){var u=xs[o];u.blockedOn===i&&(u.blockedOn=null)}for(;0<xs.length&&(o=xs[0],o.blockedOn===null);)yw(o),o.blockedOn===null&&xs.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var m=o[u],g=o[u+1],T=m[Ye]||null;if(typeof g=="function")T||_w(o);else if(T){var C=null;if(g&&g.hasAttribute("formAction")){if(m=g,T=g[Ye]||null)C=T.formAction;else if(mg(m)!==null)continue}else C=T.action;typeof C=="function"?o[u+1]=C:(o.splice(u,3),u-=3),_w(o)}}}function Tw(){function i(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(T){return m=T})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,m=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function gg(i){this._internalRoot=i}vf.prototype.render=gg.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,u=Fn();hw(o,u,i,s,null,null)},vf.prototype.unmount=gg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;hw(i.current,2,null,i,null,null),Wh(),s[Di]=null}};function vf(i){this._internalRoot=i}vf.prototype.unstable_scheduleHydration=function(i){if(i){var s=nr();i={blockedOn:null,target:i,priority:s};for(var o=0;o<xs.length&&s!==0&&s<xs[o].priority;o++);xs.splice(o,0,i),o===0&&yw(i)}};var Ew=t.version;if(Ew!=="19.2.0")throw Error(r(527,Ew,"19.2.0"));ot.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=p(s),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var RD={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:tt,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_f.isDisabled&&_f.supportsFiber)try{Fr=_f.inject(RD),rn=_f}catch{}}return Pu.createRoot=function(i,s){if(!a(i))throw Error(r(299));var o=!1,u="",m=xT,g=IT,T=DT;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError)),s=uw(i,1,!1,null,null,o,u,null,m,g,T,Tw),i[Di]=s.current,Wp(i),new gg(s)},Pu.hydrateRoot=function(i,s,o){if(!a(i))throw Error(r(299));var u=!1,m="",g=xT,T=IT,C=DT,j=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.formState!==void 0&&(j=o.formState)),s=uw(i,1,!0,s,o??null,u,m,j,g,T,C,Tw),s.context=cw(null),o=s.current,u=Fn(),u=jl(u),m=ds(u),m.callback=null,ms(o,m,u),o=u,s.current.lanes=o,Gr(s,o),ji(s),i[Di]=s.current,Wp(i),new vf(s)},Pu.version="19.2.0",Pu}var Nw;function PD(){if(Nw)return _g.exports;Nw=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),_g.exports=kD(),_g.exports}var LD=PD();var Mw="popstate";function UD(e={}){function t(a,l){let{pathname:c="/",search:f="",hash:d=""}=Ja(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),oy("",{pathname:c,search:f,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(a,l){let c=a.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let d=a.location.href,p=d.indexOf("#");f=p===-1?d:d.slice(0,p)}return f+"#"+(typeof l=="string"?l:sc(l))}function r(a,l){Kn(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return BD(t,n,r,e)}function ce(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function jD(){return Math.random().toString(36).substring(2,10)}function Ow(e,t){return{usr:e.state,key:e.key,idx:t}}function oy(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ja(t):t,state:n,key:t&&t.key||r||jD()}}function sc({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ja(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function BD(e,t,n,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,c=a.history,f="POP",d=null,p=y();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function y(){return(c.state||{idx:null}).idx}function _(){f="POP";let x=y(),V=x==null?null:x-p;p=x,d&&d({action:f,location:b.location,delta:V})}function E(x,V){f="PUSH";let P=oy(b.location,x,V);n&&n(P,x),p=y()+1;let k=Ow(P,p),K=b.createHref(P);try{c.pushState(k,"",K)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;a.location.assign(K)}l&&d&&d({action:f,location:b.location,delta:1})}function A(x,V){f="REPLACE";let P=oy(b.location,x,V);n&&n(P,x),p=y();let k=Ow(P,p),K=b.createHref(P);c.replaceState(k,"",K),l&&d&&d({action:f,location:b.location,delta:0})}function D(x){return zD(x)}let b={get action(){return f},get location(){return e(a,c)},listen(x){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Mw,_),d=x,()=>{a.removeEventListener(Mw,_),d=null}},createHref(x){return t(a,x)},createURL:D,encodeLocation(x){let V=D(x);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:E,replace:A,go(x){return c.go(x)}};return b}function zD(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ce(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:sc(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function XA(e,t,n="/"){return FD(e,t,n,!1)}function FD(e,t,n,r){let a=typeof t=="string"?Ja(t):t,l=kr(a.pathname||"/",n);if(l==null)return null;let c=WA(e);HD(c);let f=null;for(let d=0;f==null&&d<c.length;++d){let p=tN(l);f=ZD(c[d],p,r)}return f}function WA(e,t=[],n=[],r="",a=!1){let l=(c,f,d=a,p)=>{let y={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&d)return;ce(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let _=Dr([r,y.relativePath]),E=n.concat(y);c.children&&c.children.length>0&&(ce(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),WA(c.children,t,E,_,d)),!(c.path==null&&!c.index)&&t.push({path:_,score:XD(_,c.index),routesMeta:E})};return e.forEach((c,f)=>{if(c.path===""||!c.path?.includes("?"))l(c,f);else for(let d of ZA(c.path))l(c,f,!0,d)}),t}function ZA(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let c=ZA(r.join("/")),f=[];return f.push(...c.map(d=>d===""?l:[l,d].join("/"))),a&&f.push(...c),f.map(d=>e.startsWith("/")&&d===""?"/":d)}function HD(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:WD(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var qD=/^:[\w-]+$/,GD=3,KD=2,$D=1,YD=10,QD=-2,Vw=e=>e==="*";function XD(e,t){let n=e.split("/"),r=n.length;return n.some(Vw)&&(r+=QD),t&&(r+=KD),n.filter(a=>!Vw(a)).reduce((a,l)=>a+(qD.test(l)?GD:l===""?$D:YD),r)}function WD(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function ZD(e,t,n=!1){let{routesMeta:r}=e,a={},l="/",c=[];for(let f=0;f<r.length;++f){let d=r[f],p=f===r.length-1,y=l==="/"?t:t.slice(l.length)||"/",_=Zf({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),E=d.route;if(!_&&p&&n&&!r[r.length-1].route.index&&(_=Zf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!_)return null;Object.assign(a,_.params),c.push({params:a,pathname:Dr([l,_.pathname]),pathnameBase:sN(Dr([l,_.pathnameBase])),route:E}),_.pathnameBase!=="/"&&(l=Dr([l,_.pathnameBase]))}return c}function Zf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=JD(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:_},E)=>{if(y==="*"){let D=f[E]||"";c=l.slice(0,l.length-D.length).replace(/(.)\/+$/,"$1")}const A=f[E];return _&&!A?p[y]=void 0:p[y]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:e}}function JD(e,t=!1,n=!0){Kn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,d)=>(r.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function tN(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Kn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function kr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var eN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nN=e=>eN.test(e);function iN(e,t="/"){let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Ja(e):e,l;if(n)if(nN(n))l=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),Kn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${n}`)}n.startsWith("/")?l=kw(n.substring(1),"/"):l=kw(n,t)}else l=t;return{pathname:l,search:aN(r),hash:oN(a)}}function kw(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function bg(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rN(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function iv(e){let t=rN(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function rv(e,t,n,r=!1){let a;typeof e=="string"?a=Ja(e):(a={...e},ce(!a.pathname||!a.pathname.includes("?"),bg("?","pathname","search",a)),ce(!a.pathname||!a.pathname.includes("#"),bg("#","pathname","hash",a)),ce(!a.search||!a.search.includes("#"),bg("#","search","hash",a)));let l=e===""||a.pathname==="",c=l?"/":a.pathname,f;if(c==null)f=n;else{let _=t.length-1;if(!r&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),_-=1;a.pathname=E.join("/")}f=_>=0?t[_]:"/"}let d=iN(a,f),p=c&&c!=="/"&&c.endsWith("/"),y=(l||c===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}var Dr=e=>e.join("/").replace(/\/\/+/g,"/"),sN=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),aN=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,oN=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function lN(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var JA=["POST","PUT","PATCH","DELETE"];new Set(JA);var uN=["GET",...JA];new Set(uN);var Al=M.createContext(null);Al.displayName="DataRouter";var Id=M.createContext(null);Id.displayName="DataRouterState";M.createContext(!1);var t1=M.createContext({isTransitioning:!1});t1.displayName="ViewTransition";var cN=M.createContext(new Map);cN.displayName="Fetchers";var hN=M.createContext(null);hN.displayName="Await";var Ai=M.createContext(null);Ai.displayName="Navigation";var Ac=M.createContext(null);Ac.displayName="Location";var Wi=M.createContext({outlet:null,matches:[],isDataRoute:!1});Wi.displayName="Route";var sv=M.createContext(null);sv.displayName="RouteError";function fN(e,{relative:t}={}){ce(Rl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=M.useContext(Ai),{hash:a,pathname:l,search:c}=Rc(e,{relative:t}),f=l;return n!=="/"&&(f=l==="/"?n:Dr([n,l])),r.createHref({pathname:f,search:c,hash:a})}function Rl(){return M.useContext(Ac)!=null}function Ws(){return ce(Rl(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Ac).location}var e1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function n1(e){M.useContext(Ai).static||M.useLayoutEffect(e)}function i1(){let{isDataRoute:e}=M.useContext(Wi);return e?AN():dN()}function dN(){ce(Rl(),"useNavigate() may be used only in the context of a <Router> component.");let e=M.useContext(Al),{basename:t,navigator:n}=M.useContext(Ai),{matches:r}=M.useContext(Wi),{pathname:a}=Ws(),l=JSON.stringify(iv(r)),c=M.useRef(!1);return n1(()=>{c.current=!0}),M.useCallback((d,p={})=>{if(Kn(c.current,e1),!c.current)return;if(typeof d=="number"){n.go(d);return}let y=rv(d,JSON.parse(l),a,p.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:Dr([t,y.pathname])),(p.replace?n.replace:n.push)(y,p.state,p)},[t,n,l,a,e])}M.createContext(null);function Rc(e,{relative:t}={}){let{matches:n}=M.useContext(Wi),{pathname:r}=Ws(),a=JSON.stringify(iv(n));return M.useMemo(()=>rv(e,JSON.parse(a),r,t==="path"),[e,a,r,t])}function mN(e,t){return r1(e,t)}function r1(e,t,n,r,a){ce(Rl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=M.useContext(Ai),{matches:c}=M.useContext(Wi),f=c[c.length-1],d=f?f.params:{},p=f?f.pathname:"/",y=f?f.pathnameBase:"/",_=f&&f.route;{let P=_&&_.path||"";s1(p,!_||P.endsWith("*")||P.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P==="/"?"*":`${P}/*`}">.`)}let E=Ws(),A;if(t){let P=typeof t=="string"?Ja(t):t;ce(y==="/"||P.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${P.pathname}" was given in the \`location\` prop.`),A=P}else A=E;let D=A.pathname||"/",b=D;if(y!=="/"){let P=y.replace(/^\//,"").split("/");b="/"+D.replace(/^\//,"").split("/").slice(P.length).join("/")}let x=XA(e,{pathname:b});Kn(_||x!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Kn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=_N(x&&x.map(P=>Object.assign({},P,{params:Object.assign({},d,P.params),pathname:Dr([y,l.encodeLocation?l.encodeLocation(P.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?y:Dr([y,l.encodeLocation?l.encodeLocation(P.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:P.pathnameBase])})),c,n,r,a);return t&&V?M.createElement(Ac.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},V):V}function pN(){let e=SN(),t=lN(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:l},"ErrorBoundary")," or"," ",M.createElement("code",{style:l},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),n?M.createElement("pre",{style:a},n):null,c)}var gN=M.createElement(pN,null),yN=class extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?M.createElement(Wi.Provider,{value:this.props.routeContext},M.createElement(sv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vN({routeContext:e,match:t,children:n}){let r=M.useContext(Al);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(Wi.Provider,{value:e},n)}function _N(e,t=[],n=null,r=null,a=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,c=n?.errors;if(c!=null){let y=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);ce(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,d=-1;if(n)for(let y=0;y<l.length;y++){let _=l[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(d=y),_.route.id){let{loaderData:E,errors:A}=n,D=_.route.loader&&!E.hasOwnProperty(_.route.id)&&(!A||A[_.route.id]===void 0);if(_.route.lazy||D){f=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let p=n&&r?(y,_)=>{r(y,{location:n.location,params:n.matches?.[0]?.params??{},errorInfo:_})}:void 0;return l.reduceRight((y,_,E)=>{let A,D=!1,b=null,x=null;n&&(A=c&&_.route.id?c[_.route.id]:void 0,b=_.route.errorElement||gN,f&&(d<0&&E===0?(s1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,x=null):d===E&&(D=!0,x=_.route.hydrateFallbackElement||null)));let V=t.concat(l.slice(0,E+1)),P=()=>{let k;return A?k=b:D?k=x:_.route.Component?k=M.createElement(_.route.Component,null):_.route.element?k=_.route.element:k=y,M.createElement(vN,{match:_,routeContext:{outlet:y,matches:V,isDataRoute:n!=null},children:k})};return n&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?M.createElement(yN,{location:n.location,revalidation:n.revalidation,component:b,error:A,children:P(),routeContext:{outlet:null,matches:V,isDataRoute:!0},onError:p}):P()},null)}function av(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TN(e){let t=M.useContext(Al);return ce(t,av(e)),t}function EN(e){let t=M.useContext(Id);return ce(t,av(e)),t}function wN(e){let t=M.useContext(Wi);return ce(t,av(e)),t}function ov(e){let t=wN(e),n=t.matches[t.matches.length-1];return ce(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function bN(){return ov("useRouteId")}function SN(){let e=M.useContext(sv),t=EN("useRouteError"),n=ov("useRouteError");return e!==void 0?e:t.errors?.[n]}function AN(){let{router:e}=TN("useNavigate"),t=ov("useNavigate"),n=M.useRef(!1);return n1(()=>{n.current=!0}),M.useCallback(async(a,l={})=>{Kn(n.current,e1),n.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...l}))},[e,t])}var Pw={};function s1(e,t,n){!t&&!Pw[e]&&(Pw[e]=!0,Kn(!1,n))}M.memo(RN);function RN({routes:e,future:t,state:n,unstable_onError:r}){return r1(e,void 0,n,r,t)}function lv({to:e,replace:t,state:n,relative:r}){ce(Rl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=M.useContext(Ai);Kn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=M.useContext(Wi),{pathname:c}=Ws(),f=i1(),d=rv(e,iv(l),c,r==="path"),p=JSON.stringify(d);return M.useEffect(()=>{f(JSON.parse(p),{replace:t,state:n,relative:r})},[f,p,r,t,n]),null}function Pf(e){ce(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function CN({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:a,static:l=!1}){ce(!Rl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),f=M.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof n=="string"&&(n=Ja(n));let{pathname:d="/",search:p="",hash:y="",state:_=null,key:E="default"}=n,A=M.useMemo(()=>{let D=kr(d,c);return D==null?null:{location:{pathname:D,search:p,hash:y,state:_,key:E},navigationType:r}},[c,d,p,y,_,E,r]);return Kn(A!=null,`<Router basename="${c}"> is not able to match the URL "${d}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:M.createElement(Ai.Provider,{value:f},M.createElement(Ac.Provider,{children:t,value:A}))}function xN({children:e,location:t}){return mN(ly(e),t)}function ly(e,t=[]){let n=[];return M.Children.forEach(e,(r,a)=>{if(!M.isValidElement(r))return;let l=[...t,a];if(r.type===M.Fragment){n.push.apply(n,ly(r.props.children,l));return}ce(r.type===Pf,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ce(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=ly(r.props.children,l)),n.push(c)}),n}var Lf="get",Uf="application/x-www-form-urlencoded";function Dd(e){return e!=null&&typeof e.tagName=="string"}function IN(e){return Dd(e)&&e.tagName.toLowerCase()==="button"}function DN(e){return Dd(e)&&e.tagName.toLowerCase()==="form"}function NN(e){return Dd(e)&&e.tagName.toLowerCase()==="input"}function MN(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ON(e,t){return e.button===0&&(!t||t==="_self")&&!MN(e)}var Tf=null;function VN(){if(Tf===null)try{new FormData(document.createElement("form"),0),Tf=!1}catch{Tf=!0}return Tf}var kN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sg(e){return e!=null&&!kN.has(e)?(Kn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Uf}"`),null):e}function PN(e,t){let n,r,a,l,c;if(DN(e)){let f=e.getAttribute("action");r=f?kr(f,t):null,n=e.getAttribute("method")||Lf,a=Sg(e.getAttribute("enctype"))||Uf,l=new FormData(e)}else if(IN(e)||NN(e)&&(e.type==="submit"||e.type==="image")){let f=e.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||f.getAttribute("action");if(r=d?kr(d,t):null,n=e.getAttribute("formmethod")||f.getAttribute("method")||Lf,a=Sg(e.getAttribute("formenctype"))||Sg(f.getAttribute("enctype"))||Uf,l=new FormData(f,e),!VN()){let{name:p,type:y,value:_}=e;if(y==="image"){let E=p?`${p}.`:"";l.append(`${E}x`,"0"),l.append(`${E}y`,"0")}else p&&l.append(p,_)}}else{if(Dd(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Lf,r=null,a=Uf,c=e}return l&&a==="text/plain"&&(c=l,l=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uv(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function LN(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&kr(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function UN(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jN(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function BN(e,t,n){let r=await Promise.all(e.map(async a=>{let l=t.routes[a.route.id];if(l){let c=await UN(l,n);return c.links?c.links():[]}return[]}));return qN(r.flat(1).filter(jN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Lw(e,t,n,r,a,l){let c=(d,p)=>n[p]?d.route.id!==n[p].route.id:!0,f=(d,p)=>n[p].pathname!==d.pathname||n[p].route.path?.endsWith("*")&&n[p].params["*"]!==d.params["*"];return l==="assets"?t.filter((d,p)=>c(d,p)||f(d,p)):l==="data"?t.filter((d,p)=>{let y=r.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(c(d,p)||f(d,p))return!0;if(d.route.shouldRevalidate){let _=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function zN(e,t,{includeHydrateFallback:n}={}){return FN(e.map(r=>{let a=t.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function FN(e){return[...new Set(e)]}function HN(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function qN(e,t){let n=new Set;return new Set(t),e.reduce((r,a)=>{let l=JSON.stringify(HN(a));return n.has(l)||(n.add(l),r.push({key:l,link:a})),r},[])}function a1(){let e=M.useContext(Al);return uv(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function GN(){let e=M.useContext(Id);return uv(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var cv=M.createContext(void 0);cv.displayName="FrameworkContext";function o1(){let e=M.useContext(cv);return uv(e,"You must render this element inside a <HydratedRouter> element"),e}function KN(e,t){let n=M.useContext(cv),[r,a]=M.useState(!1),[l,c]=M.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:p,onMouseLeave:y,onTouchStart:_}=t,E=M.useRef(null);M.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let b=V=>{V.forEach(P=>{c(P.isIntersecting)})},x=new IntersectionObserver(b,{threshold:.5});return E.current&&x.observe(E.current),()=>{x.disconnect()}}},[e]),M.useEffect(()=>{if(r){let b=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(b)}}},[r]);let A=()=>{a(!0)},D=()=>{a(!1),c(!1)};return n?e!=="intent"?[l,E,{}]:[l,E,{onFocus:Lu(f,A),onBlur:Lu(d,D),onMouseEnter:Lu(p,A),onMouseLeave:Lu(y,D),onTouchStart:Lu(_,A)}]:[!1,E,{}]}function Lu(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function $N({page:e,...t}){let{router:n}=a1(),r=M.useMemo(()=>XA(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?M.createElement(QN,{page:e,matches:r,...t}):null}function YN(e){let{manifest:t,routeModules:n}=o1(),[r,a]=M.useState([]);return M.useEffect(()=>{let l=!1;return BN(e,t,n).then(c=>{l||a(c)}),()=>{l=!0}},[e,t,n]),r}function QN({page:e,matches:t,...n}){let r=Ws(),{manifest:a,routeModules:l}=o1(),{basename:c}=a1(),{loaderData:f,matches:d}=GN(),p=M.useMemo(()=>Lw(e,t,d,a,r,"data"),[e,t,d,a,r]),y=M.useMemo(()=>Lw(e,t,d,a,r,"assets"),[e,t,d,a,r]),_=M.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let D=new Set,b=!1;if(t.forEach(V=>{let P=a.routes[V.route.id];!P||!P.hasLoader||(!p.some(k=>k.route.id===V.route.id)&&V.route.id in f&&l[V.route.id]?.shouldRevalidate||P.hasClientLoader?b=!0:D.add(V.route.id))}),D.size===0)return[];let x=LN(e,c,"data");return b&&D.size>0&&x.searchParams.set("_routes",t.filter(V=>D.has(V.route.id)).map(V=>V.route.id).join(",")),[x.pathname+x.search]},[c,f,r,a,p,t,e,l]),E=M.useMemo(()=>zN(y,a),[y,a]),A=YN(y);return M.createElement(M.Fragment,null,_.map(D=>M.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...n})),E.map(D=>M.createElement("link",{key:D,rel:"modulepreload",href:D,...n})),A.map(({key:D,link:b})=>M.createElement("link",{key:D,nonce:n.nonce,...b})))}function XN(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var l1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{l1&&(window.__reactRouterVersion="7.9.6")}catch{}function WN({basename:e,children:t,window:n}){let r=M.useRef();r.current==null&&(r.current=UD({window:n,v5Compat:!0}));let a=r.current,[l,c]=M.useState({action:a.action,location:a.location}),f=M.useCallback(d=>{M.startTransition(()=>c(d))},[c]);return M.useLayoutEffect(()=>a.listen(f),[a,f]),M.createElement(CN,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a})}var u1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,c1=M.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:a,reloadDocument:l,replace:c,state:f,target:d,to:p,preventScrollReset:y,viewTransition:_,...E},A){let{basename:D}=M.useContext(Ai),b=typeof p=="string"&&u1.test(p),x,V=!1;if(typeof p=="string"&&b&&(x=p,l1))try{let N=new URL(window.location.href),U=p.startsWith("//")?new URL(N.protocol+p):new URL(p),B=kr(U.pathname,D);U.origin===N.origin&&B!=null?p=B+U.search+U.hash:V=!0}catch{Kn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let P=fN(p,{relative:a}),[k,K,q]=KN(r,E),Y=eM(p,{replace:c,state:f,target:d,preventScrollReset:y,relative:a,viewTransition:_});function R(N){t&&t(N),N.defaultPrevented||Y(N)}let S=M.createElement("a",{...E,...q,href:x||P,onClick:V||l?t:R,ref:XN(A,K),target:d,"data-discover":!b&&n==="render"?"true":void 0});return k&&!b?M.createElement(M.Fragment,null,S,M.createElement($N,{page:P})):S});c1.displayName="Link";var ZN=M.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:a=!1,style:l,to:c,viewTransition:f,children:d,...p},y){let _=Rc(c,{relative:p.relative}),E=Ws(),A=M.useContext(Id),{navigator:D,basename:b}=M.useContext(Ai),x=A!=null&&aM(_)&&f===!0,V=D.encodeLocation?D.encodeLocation(_).pathname:_.pathname,P=E.pathname,k=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;n||(P=P.toLowerCase(),k=k?k.toLowerCase():null,V=V.toLowerCase()),k&&b&&(k=kr(k,b)||k);const K=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let q=P===V||!a&&P.startsWith(V)&&P.charAt(K)==="/",Y=k!=null&&(k===V||!a&&k.startsWith(V)&&k.charAt(V.length)==="/"),R={isActive:q,isPending:Y,isTransitioning:x},S=q?t:void 0,N;typeof r=="function"?N=r(R):N=[r,q?"active":null,Y?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(R):l;return M.createElement(c1,{...p,"aria-current":S,className:N,ref:y,style:U,to:c,viewTransition:f},typeof d=="function"?d(R):d)});ZN.displayName="NavLink";var JN=M.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:a,state:l,method:c=Lf,action:f,onSubmit:d,relative:p,preventScrollReset:y,viewTransition:_,...E},A)=>{let D=rM(),b=sM(f,{relative:p}),x=c.toLowerCase()==="get"?"get":"post",V=typeof f=="string"&&u1.test(f),P=k=>{if(d&&d(k),k.defaultPrevented)return;k.preventDefault();let K=k.nativeEvent.submitter,q=K?.getAttribute("formmethod")||c;D(K||k.currentTarget,{fetcherKey:t,method:q,navigate:n,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:_})};return M.createElement("form",{ref:A,method:x,action:b,onSubmit:r?d:P,...E,"data-discover":!V&&e==="render"?"true":void 0})});JN.displayName="Form";function tM(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h1(e){let t=M.useContext(Al);return ce(t,tM(e)),t}function eM(e,{target:t,replace:n,state:r,preventScrollReset:a,relative:l,viewTransition:c}={}){let f=i1(),d=Ws(),p=Rc(e,{relative:l});return M.useCallback(y=>{if(ON(y,t)){y.preventDefault();let _=n!==void 0?n:sc(d)===sc(p);f(e,{replace:_,state:r,preventScrollReset:a,relative:l,viewTransition:c})}},[d,f,p,n,r,t,e,a,l,c])}var nM=0,iM=()=>`__${String(++nM)}__`;function rM(){let{router:e}=h1("useSubmit"),{basename:t}=M.useContext(Ai),n=bN();return M.useCallback(async(r,a={})=>{let{action:l,method:c,encType:f,formData:d,body:p}=PN(r,t);if(a.navigate===!1){let y=a.fetcherKey||iM();await e.fetch(y,n,a.action||l,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||c,formEncType:a.encType||f,flushSync:a.flushSync})}else await e.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:d,body:p,formMethod:a.method||c,formEncType:a.encType||f,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,n])}function sM(e,{relative:t}={}){let{basename:n}=M.useContext(Ai),r=M.useContext(Wi);ce(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...Rc(e||".",{relative:t})},c=Ws();if(e==null){l.search=c.search;let f=new URLSearchParams(l.search),d=f.getAll("index");if(d.some(y=>y==="")){f.delete("index"),d.filter(_=>_).forEach(_=>f.append("index",_));let y=f.toString();l.search=y?`?${y}`:""}}return(!e||e===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:Dr([n,l.pathname])),sc(l)}function aM(e,{relative:t}={}){let n=M.useContext(t1);ce(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=h1("useViewTransitionState"),a=Rc(e,{relative:t});if(!n.isTransitioning)return!1;let l=kr(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=kr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Zf(a.pathname,c)!=null||Zf(a.pathname,l)!=null}const oM=()=>{};var Uw={};const f1=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=a&63|128):(a&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=a&63|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=a&63|128)}return t},lM=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=e[n++];t[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=e[n++],c=e[n++],f=e[n++],d=((a&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;t[r++]=String.fromCharCode(55296+(d>>10)),t[r++]=String.fromCharCode(56320+(d&1023))}else{const l=e[n++],c=e[n++];t[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},d1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<e.length;a+=3){const l=e[a],c=a+1<e.length,f=c?e[a+1]:0,d=a+2<e.length,p=d?e[a+2]:0,y=l>>2,_=(l&3)<<4|f>>4;let E=(f&15)<<2|p>>6,A=p&63;d||(A=64,c||(E=64)),r.push(n[y],n[_],n[E],n[A])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(f1(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):lM(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<e.length;){const l=n[e.charAt(a++)],f=a<e.length?n[e.charAt(a)]:0;++a;const p=a<e.length?n[e.charAt(a)]:64;++a;const _=a<e.length?n[e.charAt(a)]:64;if(++a,l==null||f==null||p==null||_==null)throw new uM;const E=l<<2|f>>4;if(r.push(E),p!==64){const A=f<<4&240|p>>2;if(r.push(A),_!==64){const D=p<<6&192|_;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class uM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cM=function(e){const t=f1(e);return d1.encodeByteArray(t,!0)},Jf=function(e){return cM(e).replace(/\./g,"")},m1=function(e){try{return d1.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function hM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const fM=()=>hM().__FIREBASE_DEFAULTS__,dM=()=>{if(typeof process>"u"||typeof Uw>"u")return;const e=Uw.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},mM=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&m1(e[1]);return t&&JSON.parse(t)},Nd=()=>{try{return oM()||fM()||dM()||mM()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},p1=e=>{var t,n;return(n=(t=Nd())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},g1=e=>{const t=p1(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},y1=()=>{var e;return(e=Nd())===null||e===void 0?void 0:e.config},v1=e=>{var t;return(t=Nd())===null||t===void 0?void 0:t[`_${e}`]};class pM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}function Zs(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hv(e){return(await fetch(e,{credentials:"include"})).ok}function _1(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",a=e.iat||0,l=e.sub||e.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Jf(JSON.stringify(n)),Jf(JSON.stringify(c)),""].join(".")}const Qu={};function gM(){const e={prod:[],emulator:[]};for(const t of Object.keys(Qu))Qu[t]?e.emulator.push(t):e.prod.push(t);return e}function yM(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let jw=!1;function fv(e,t){if(typeof window>"u"||typeof document>"u"||!Zs(window.location.host)||Qu[e]===t||Qu[e]||jw)return;Qu[e]=t;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",l=gM().prod.length>0;function c(){const E=document.getElementById(r);E&&E.remove()}function f(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function d(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{jw=!0,c()},E}function y(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function _(){const E=yM(r),A=n("text"),D=document.getElementById(A)||document.createElement("span"),b=n("learnmore"),x=document.getElementById(b)||document.createElement("a"),V=n("preprendIcon"),P=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const k=E.element;f(k),y(x,b);const K=p();d(P,V),k.append(P,D,x,K),document.body.appendChild(k)}l?(D.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function _M(){var e;const t=(e=Nd())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EM(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function wM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bM(){const e=dn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function SM(){return!_M()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T1(){try{return typeof indexedDB=="object"}catch{return!1}}function E1(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;t(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){t(n)}})}function AM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const RM="FirebaseError";class Ri extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=RM,Object.setPrototypeOf(this,Ri.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,to.prototype.create)}}class to{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?CM(l,r):"Error",f=`${this.serviceName}: ${c} (${a}).`;return new Ri(a,f,r)}}function CM(e,t){return e.replace(xM,(n,r)=>{const a=t[r];return a!=null?String(a):`<${r}?>`})}const xM=/\{\$([^}]+)}/g;function IM(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ka(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const a of n){if(!r.includes(a))return!1;const l=e[a],c=t[a];if(Bw(l)&&Bw(c)){if(!Ka(l,c))return!1}else if(l!==c)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function Bw(e){return e!==null&&typeof e=="object"}function Cc(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(a=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function DM(e,t){const n=new NM(e,t);return n.subscribe.bind(n)}class NM{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let a;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");MM(t,["next","error","complete"])?a=t:a={next:t,error:n,complete:r},a.next===void 0&&(a.next=Ag),a.error===void 0&&(a.error=Ag),a.complete===void 0&&(a.complete=Ag);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MM(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Ag(){}function oe(e){return e&&e._delegate?e._delegate:e}class hi{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Oa="[DEFAULT]";class OM{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new pM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t?.identifier),a=(n=t?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(kM(t))try{this.getOrInitializeService({instanceIdentifier:Oa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(t=Oa){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Oa){return this.instances.has(t)}getOptions(t=Oa){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);r===f&&c.resolve(a)}return a}onInit(t,n){var r;const a=this.normalizeInstanceIdentifier(n),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(t),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&t(c,a),()=>{l.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const a of r)try{a(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VM(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Oa){return this.component?this.component.multipleInstances?t:Oa:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VM(e){return e===Oa?void 0:e}function kM(e){return e.instantiationMode==="EAGER"}class PM{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new OM(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}var Ut;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ut||(Ut={}));const LM={debug:Ut.DEBUG,verbose:Ut.VERBOSE,info:Ut.INFO,warn:Ut.WARN,error:Ut.ERROR,silent:Ut.SILENT},UM=Ut.INFO,jM={[Ut.DEBUG]:"log",[Ut.VERBOSE]:"log",[Ut.INFO]:"info",[Ut.WARN]:"warn",[Ut.ERROR]:"error"},BM=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),a=jM[t];if(a)console[a](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class dv{constructor(t){this.name=t,this._logLevel=UM,this._logHandler=BM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ut))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?LM[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ut.DEBUG,...t),this._logHandler(this,Ut.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ut.VERBOSE,...t),this._logHandler(this,Ut.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ut.INFO,...t),this._logHandler(this,Ut.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ut.WARN,...t),this._logHandler(this,Ut.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ut.ERROR,...t),this._logHandler(this,Ut.ERROR,...t)}}const zM=(e,t)=>t.some(n=>e instanceof n);let zw,Fw;function FM(){return zw||(zw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HM(){return Fw||(Fw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const w1=new WeakMap,uy=new WeakMap,b1=new WeakMap,Rg=new WeakMap,mv=new WeakMap;function qM(e){const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("success",l),e.removeEventListener("error",c)},l=()=>{n(Nr(e.result)),a()},c=()=>{r(e.error),a()};e.addEventListener("success",l),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&w1.set(n,e)}).catch(()=>{}),mv.set(t,e),t}function GM(e){if(uy.has(e))return;const t=new Promise((n,r)=>{const a=()=>{e.removeEventListener("complete",l),e.removeEventListener("error",c),e.removeEventListener("abort",c)},l=()=>{n(),a()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",l),e.addEventListener("error",c),e.addEventListener("abort",c)});uy.set(e,t)}let cy={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return uy.get(e);if(t==="objectStoreNames")return e.objectStoreNames||b1.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nr(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function KM(e){cy=e(cy)}function $M(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Cg(this),t,...n);return b1.set(r,t.sort?t.sort():[t]),Nr(r)}:HM().includes(e)?function(...t){return e.apply(Cg(this),t),Nr(w1.get(this))}:function(...t){return Nr(e.apply(Cg(this),t))}}function YM(e){return typeof e=="function"?$M(e):(e instanceof IDBTransaction&&GM(e),zM(e,FM())?new Proxy(e,cy):e)}function Nr(e){if(e instanceof IDBRequest)return qM(e);if(Rg.has(e))return Rg.get(e);const t=YM(e);return t!==e&&(Rg.set(e,t),mv.set(t,e)),t}const Cg=e=>mv.get(e);function Md(e,t,{blocked:n,upgrade:r,blocking:a,terminated:l}={}){const c=indexedDB.open(e,t),f=Nr(c);return r&&c.addEventListener("upgradeneeded",d=>{r(Nr(c.result),d.oldVersion,d.newVersion,Nr(c.transaction),d)}),n&&c.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),f.then(d=>{l&&d.addEventListener("close",()=>l()),a&&d.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}function xg(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",r=>t(r.oldVersion,r)),Nr(n).then(()=>{})}const QM=["get","getKey","getAll","getAllKeys","count"],XM=["put","add","delete","clear"],Ig=new Map;function Hw(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Ig.get(t))return Ig.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=XM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||QM.includes(n)))return;const l=async function(c,...f){const d=this.transaction(c,a?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(f.shift())),(await Promise.all([p[n](...f),a&&d.done]))[0]};return Ig.set(t,l),l}KM(e=>({...e,get:(t,n,r)=>Hw(t,n)||e.get(t,n,r),has:(t,n)=>!!Hw(t,n)||e.has(t,n)}));class WM{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ZM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ZM(e){const t=e.getComponent();return t?.type==="VERSION"}const hy="@firebase/app",qw="0.13.2";const Pr=new dv("@firebase/app"),JM="@firebase/app-compat",tO="@firebase/analytics-compat",eO="@firebase/analytics",nO="@firebase/app-check-compat",iO="@firebase/app-check",rO="@firebase/auth",sO="@firebase/auth-compat",aO="@firebase/database",oO="@firebase/data-connect",lO="@firebase/database-compat",uO="@firebase/functions",cO="@firebase/functions-compat",hO="@firebase/installations",fO="@firebase/installations-compat",dO="@firebase/messaging",mO="@firebase/messaging-compat",pO="@firebase/performance",gO="@firebase/performance-compat",yO="@firebase/remote-config",vO="@firebase/remote-config-compat",_O="@firebase/storage",TO="@firebase/storage-compat",EO="@firebase/firestore",wO="@firebase/ai",bO="@firebase/firestore-compat",SO="firebase",AO="11.10.0";const fy="[DEFAULT]",RO={[hy]:"fire-core",[JM]:"fire-core-compat",[eO]:"fire-analytics",[tO]:"fire-analytics-compat",[iO]:"fire-app-check",[nO]:"fire-app-check-compat",[rO]:"fire-auth",[sO]:"fire-auth-compat",[aO]:"fire-rtdb",[oO]:"fire-data-connect",[lO]:"fire-rtdb-compat",[uO]:"fire-fn",[cO]:"fire-fn-compat",[hO]:"fire-iid",[fO]:"fire-iid-compat",[dO]:"fire-fcm",[mO]:"fire-fcm-compat",[pO]:"fire-perf",[gO]:"fire-perf-compat",[yO]:"fire-rc",[vO]:"fire-rc-compat",[_O]:"fire-gcs",[TO]:"fire-gcs-compat",[EO]:"fire-fst",[bO]:"fire-fst-compat",[wO]:"fire-vertex","fire-js":"fire-js",[SO]:"fire-js-all"};const td=new Map,CO=new Map,dy=new Map;function Gw(e,t){try{e.container.addComponent(t)}catch(n){Pr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function bi(e){const t=e.name;if(dy.has(t))return Pr.debug(`There were multiple attempts to register component ${t}.`),!1;dy.set(t,e);for(const n of td.values())Gw(n,e);for(const n of CO.values())Gw(n,e);return!0}function eo(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function li(e){return e==null?!1:e.settings!==void 0}const xO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},js=new to("app","Firebase",xO);class IO{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw js.create("app-deleted",{appName:this._name})}}const no=AO;function S1(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:fy,automaticDataCollectionEnabled:!0},t),a=r.name;if(typeof a!="string"||!a)throw js.create("bad-app-name",{appName:String(a)});if(n||(n=y1()),!n)throw js.create("no-options");const l=td.get(a);if(l){if(Ka(n,l.options)&&Ka(r,l.config))return l;throw js.create("duplicate-app",{appName:a})}const c=new PM(a);for(const d of dy.values())c.addComponent(d);const f=new IO(n,r,c);return td.set(a,f),f}function Od(e=fy){const t=td.get(e);if(!t&&e===fy&&y1())return S1();if(!t)throw js.create("no-app",{appName:e});return t}function Mn(e,t,n){var r;let a=(r=RO[e])!==null&&r!==void 0?r:e;n&&(a+=`-${n}`);const l=a.match(/\s|\//),c=t.match(/\s|\//);if(l||c){const f=[`Unable to register library "${a}" with version "${t}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Pr.warn(f.join(" "));return}bi(new hi(`${a}-version`,()=>({library:a,version:t}),"VERSION"))}const DO="firebase-heartbeat-database",NO=1,ac="firebase-heartbeat-store";let Dg=null;function A1(){return Dg||(Dg=Md(DO,NO,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(ac)}catch(n){console.warn(n)}}}}).catch(e=>{throw js.create("idb-open",{originalErrorMessage:e.message})})),Dg}async function MO(e){try{const n=(await A1()).transaction(ac),r=await n.objectStore(ac).get(R1(e));return await n.done,r}catch(t){if(t instanceof Ri)Pr.warn(t.message);else{const n=js.create("idb-get",{originalErrorMessage:t?.message});Pr.warn(n.message)}}}async function Kw(e,t){try{const r=(await A1()).transaction(ac,"readwrite");await r.objectStore(ac).put(t,R1(e)),await r.done}catch(n){if(n instanceof Ri)Pr.warn(n.message);else{const r=js.create("idb-set",{originalErrorMessage:n?.message});Pr.warn(r.message)}}}function R1(e){return`${e.name}!${e.options.appId}`}const OO=1024,VO=30;class kO{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LO(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=$w();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>VO){const c=UO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Pr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$w(),{heartbeatsToSend:r,unsentEntries:a}=PO(this._heartbeatsCache.heartbeats),l=Jf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Pr.warn(n),""}}}function $w(){return new Date().toISOString().substring(0,10)}function PO(e,t=OO){const n=[];let r=e.slice();for(const a of e){const l=n.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Yw(n)>t){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Yw(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LO{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return T1()?E1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await MO(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Kw(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Kw(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...t.heartbeats]})}else return}}function Yw(e){return Jf(JSON.stringify({version:2,heartbeats:e})).length}function UO(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}function jO(e){bi(new hi("platform-logger",t=>new WM(t),"PRIVATE")),bi(new hi("heartbeat",t=>new kO(t),"PRIVATE")),Mn(hy,qw,e),Mn(hy,qw,"esm2017"),Mn("fire-js","")}jO("");function pv(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function C1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BO=C1,x1=new to("auth","Firebase",C1());const ed=new dv("@firebase/auth");function zO(e,...t){ed.logLevel<=Ut.WARN&&ed.warn(`Auth (${no}): ${e}`,...t)}function jf(e,...t){ed.logLevel<=Ut.ERROR&&ed.error(`Auth (${no}): ${e}`,...t)}function Qi(e,...t){throw yv(e,...t)}function wi(e,...t){return yv(e,...t)}function gv(e,t,n){const r=Object.assign(Object.assign({},BO()),{[t]:n});return new to("auth","Firebase",r).create(t,{appName:e.name})}function za(e){return gv(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FO(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Qi(e,"argument-error"),gv(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yv(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return x1.create(e,...t)}function bt(e,t,...n){if(!e)throw yv(t,...n)}function xr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw jf(t),new Error(t)}function Lr(e,t){e||xr(t)}function my(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function HO(){return Qw()==="http:"||Qw()==="https:"}function Qw(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}function qO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HO()||EM()||"connection"in navigator)?navigator.onLine:!0}function GO(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}class xc{constructor(t,n){this.shortDelay=t,this.longDelay=n,Lr(n>t,"Short delay should be less than long delay!"),this.isMobile=vM()||wM()}get(){return qO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vv(e,t){Lr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class I1{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const KO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const $O=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YO=new xc(3e4,6e4);function _v(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Cl(e,t,n,r,a={}){return D1(e,a,async()=>{let l={},c={};r&&(t==="GET"?c=r:l={body:JSON.stringify(r)});const f=Cc(Object.assign({key:e.config.apiKey},c)).slice(1),d=await e._getAdditionalHeaders();d["Content-Type"]="application/json",e.languageCode&&(d["X-Firebase-Locale"]=e.languageCode);const p=Object.assign({method:t,headers:d},l);return TM()||(p.referrerPolicy="no-referrer"),e.emulatorConfig&&Zs(e.emulatorConfig.host)&&(p.credentials="include"),I1.fetch()(await N1(e,e.config.apiHost,n,f),p)})}async function D1(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},KO),t);try{const a=new XO(e),l=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Ef(e,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[d,p]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ef(e,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Ef(e,"email-already-in-use",c);if(d==="USER_DISABLED")throw Ef(e,"user-disabled",c);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw gv(e,y,p);Qi(e,y)}}catch(a){if(a instanceof Ri)throw a;Qi(e,"network-request-failed",{message:String(a)})}}async function QO(e,t,n,r,a={}){const l=await Cl(e,t,n,r,a);return"mfaPendingCredential"in l&&Qi(e,"multi-factor-auth-required",{_serverResponse:l}),l}async function N1(e,t,n,r){const a=`${t}${n}?${r}`,l=e,c=l.config.emulator?vv(e.config,a):`${e.config.apiScheme}://${a}`;return $O.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class XO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wi(this.auth,"network-request-failed")),YO.get())})}}function Ef(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=wi(e,t,r);return a.customData._tokenResponse=n,a}async function WO(e,t){return Cl(e,"POST","/v1/accounts:delete",t)}async function nd(e,t){return Cl(e,"POST","/v1/accounts:lookup",t)}function Xu(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ZO(e,t=!1){const n=oe(e),r=await n.getIdToken(t),a=Tv(r);bt(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:r,authTime:Xu(Ng(a.auth_time)),issuedAtTime:Xu(Ng(a.iat)),expirationTime:Xu(Ng(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Ng(e){return Number(e)*1e3}function Tv(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return jf("JWT malformed, contained fewer than 3 sections"),null;try{const a=m1(n);return a?JSON.parse(a):(jf("Failed to decode base64 JWT payload"),null)}catch(a){return jf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Xw(e){const t=Tv(e);return bt(t,"internal-error"),bt(typeof t.exp<"u","internal-error"),bt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function oc(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Ri&&JO(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function JO({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}class tV{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class py{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xu(this.lastLoginAt),this.creationTime=Xu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function id(e){var t;const n=e.auth,r=await e.getIdToken(),a=await oc(e,nd(n,{idToken:r}));bt(a?.users.length,n,"internal-error");const l=a.users[0];e._notifyReloadListener(l);const c=!((t=l.providerUserInfo)===null||t===void 0)&&t.length?M1(l.providerUserInfo):[],f=nV(e.providerData,c),d=e.isAnonymous,p=!(e.email&&l.passwordHash)&&!f?.length,y=d?p:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new py(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(e,_)}async function eV(e){const t=oe(e);await id(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function nV(e,t){return[...e.filter(r=>!t.some(a=>a.providerId===r.providerId)),...t]}function M1(e){return e.map(t=>{var{providerId:n}=t,r=pv(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function iV(e,t){const n=await D1(e,{},async()=>{const r=Cc({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=e.config,c=await N1(e,a,"/v1/token",`key=${l}`),f=await e._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:f,body:r};return e.emulatorConfig&&Zs(e.emulatorConfig.host)&&(d.credentials="include"),I1.fetch()(c,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rV(e,t){return Cl(e,"POST","/v2/accounts:revokeToken",_v(e,t))}class ul{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){bt(t.idToken,"internal-error"),bt(typeof t.idToken<"u","internal-error"),bt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Xw(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){bt(t.length!==0,"internal-error");const n=Xw(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(bt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:a,expiresIn:l}=await iV(t,n);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:a,expirationTime:l}=n,c=new ul;return r&&(bt(typeof r=="string","internal-error",{appName:t}),c.refreshToken=r),a&&(bt(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(bt(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new ul,this.toJSON())}_performRefresh(){return xr("not implemented")}}function Ds(e,t){bt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Ei{constructor(t){var{uid:n,auth:r,stsTokenManager:a}=t,l=pv(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new py(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const n=await oc(this,this.stsTokenManager.getToken(this.auth,t));return bt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return ZO(this,t)}reload(){return eV(this)}_assign(t){this!==t&&(bt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Ei(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){bt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await id(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(li(this.auth.app))return Promise.reject(za(this.auth));const t=await this.getIdToken();return await oc(this,WO(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,a,l,c,f,d,p,y;const _=(r=n.displayName)!==null&&r!==void 0?r:void 0,E=(a=n.email)!==null&&a!==void 0?a:void 0,A=(l=n.phoneNumber)!==null&&l!==void 0?l:void 0,D=(c=n.photoURL)!==null&&c!==void 0?c:void 0,b=(f=n.tenantId)!==null&&f!==void 0?f:void 0,x=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,V=(p=n.createdAt)!==null&&p!==void 0?p:void 0,P=(y=n.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:k,emailVerified:K,isAnonymous:q,providerData:Y,stsTokenManager:R}=n;bt(k&&R,t,"internal-error");const S=ul.fromJSON(this.name,R);bt(typeof k=="string",t,"internal-error"),Ds(_,t.name),Ds(E,t.name),bt(typeof K=="boolean",t,"internal-error"),bt(typeof q=="boolean",t,"internal-error"),Ds(A,t.name),Ds(D,t.name),Ds(b,t.name),Ds(x,t.name),Ds(V,t.name),Ds(P,t.name);const N=new Ei({uid:k,auth:t,email:E,emailVerified:K,displayName:_,isAnonymous:q,photoURL:D,phoneNumber:A,tenantId:b,stsTokenManager:S,createdAt:V,lastLoginAt:P});return Y&&Array.isArray(Y)&&(N.providerData=Y.map(U=>Object.assign({},U))),x&&(N._redirectEventId=x),N}static async _fromIdTokenResponse(t,n,r=!1){const a=new ul;a.updateFromServerResponse(n);const l=new Ei({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:r});return await id(l),l}static async _fromGetAccountInfoResponse(t,n,r){const a=n.users[0];bt(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?M1(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,f=new ul;f.updateFromIdToken(r);const d=new Ei({uid:a.localId,auth:t,stsTokenManager:f,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new py(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(d,p),d}}const Ww=new Map;function Ir(e){Lr(e instanceof Function,"Expected a class definition");let t=Ww.get(e);return t?(Lr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ww.set(e,t),t)}class O1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}O1.type="NONE";const Zw=O1;function Bf(e,t,n){return`firebase:${e}:${t}:${n}`}class cl{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Bf(this.userKey,a.apiKey,l),this.fullPersistenceKey=Bf("persistence",a.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await nd(this.auth,{idToken:t}).catch(()=>{});return n?Ei._fromGetAccountInfoResponse(this.auth,n,t):null}return Ei._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new cl(Ir(Zw),t,r);const a=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Ir(Zw);const c=Bf(r,t.config.apiKey,t.name);let f=null;for(const p of n)try{const y=await p._get(c);if(y){let _;if(typeof y=="string"){const E=await nd(t,{idToken:y}).catch(()=>{});if(!E)break;_=await Ei._fromGetAccountInfoResponse(t,E,y)}else _=Ei._fromJSON(t,y);p!==l&&(f=_),l=p;break}}catch{}const d=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new cl(l,t,r):(l=d[0],f&&await l._set(c,f.toJSON()),await Promise.all(n.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new cl(l,t,r))}}function Jw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(L1(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(V1(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(j1(t))return"Blackberry";if(B1(t))return"Webos";if(k1(t))return"Safari";if((t.includes("chrome/")||P1(t))&&!t.includes("edge/"))return"Chrome";if(U1(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if(r?.length===2)return r[1]}return"Other"}function V1(e=dn()){return/firefox\//i.test(e)}function k1(e=dn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function P1(e=dn()){return/crios\//i.test(e)}function L1(e=dn()){return/iemobile/i.test(e)}function U1(e=dn()){return/android/i.test(e)}function j1(e=dn()){return/blackberry/i.test(e)}function B1(e=dn()){return/webos/i.test(e)}function Ev(e=dn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function sV(e=dn()){var t;return Ev(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function aV(){return bM()&&document.documentMode===10}function z1(e=dn()){return Ev(e)||U1(e)||B1(e)||j1(e)||/windows phone/i.test(e)||L1(e)}function F1(e,t=[]){let n;switch(e){case"Browser":n=Jw(dn());break;case"Worker":n=`${Jw(dn())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${no}/${r}`}class oV{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=l=>new Promise((c,f)=>{try{const d=t(l);c(d)}catch(d){f(d)}});r.onAbort=n,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function lV(e,t={}){return Cl(e,"GET","/v2/passwordPolicy",_v(e,t))}const uV=6;class cV{constructor(t){var n,r,a,l;const c=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=c.minPasswordLength)!==null&&n!==void 0?n:uV,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=t.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,a,l,c,f;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,d),this.validatePasswordCharacterOptions(t,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsUppercaseLetter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(c=d.containsNumericCharacter)!==null&&c!==void 0?c:!0),d.isValid&&(d.isValid=(f=d.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),d}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),a&&(n.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let a=0;a<t.length;a++)r=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}class hV{constructor(t,n,r,a){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tb(this),this.idTokenSubscription=new tb(this),this.beforeStateQueue=new oV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Ir(n)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await cl.create(this,t),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await nd(this,{idToken:t}),r=await Ei._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(li(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,f=a?._redirectEventId,d=await this.tryRedirectSignIn(t);(!c||c===f)&&d?.user&&(a=d.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return bt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await id(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=GO()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(li(this.app))return Promise.reject(za(this));const n=t?oe(t):null;return n&&bt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&bt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return li(this.app)?Promise.reject(za(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return li(this.app)?Promise.reject(za(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ir(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await lV(this),n=new cV(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new to("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rV(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Ir(t)||this._popupRedirectResolver;bt(n,this,"argument-error"),this.redirectPersistenceManager=await cl.create(this,[Ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,a){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(bt(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof n=="function"){const d=t.addObserver(n,r,a);return()=>{c=!0,d()}}else{const d=t.addObserver(n);return()=>{c=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return bt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=F1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(n["X-Firebase-AppCheck"]=a),n}async _getAppCheckToken(){var t;if(li(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n?.error&&zO(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Vd(e){return oe(e)}class tb{constructor(t){this.auth=t,this.observer=null,this.addObserver=DM(n=>this.observer=n)}get next(){return bt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let wv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fV(e){wv=e}function dV(e){return wv.loadJS(e)}function mV(){return wv.gapiScript}function pV(e){return`__${e}${Math.floor(Math.random()*1e6)}`}function gV(e,t){const n=eo(e,"auth");if(n.isInitialized()){const a=n.getImmediate(),l=n.getOptions();if(Ka(l,t??{}))return a;Qi(a,"already-initialized")}return n.initialize({options:t})}function yV(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ir);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}function vV(e,t,n){const r=Vd(e);bt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!1,l=H1(t),{host:c,port:f}=_V(t),d=f===null?"":`:${f}`,p={url:`${l}//${c}${d}/`},y=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){bt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),bt(Ka(p,r.config.emulator)&&Ka(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Zs(c)?(hv(`${l}//${c}${d}`),fv("Auth",!0)):TV()}function H1(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function _V(e){const t=H1(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:eb(r.substr(l.length+1))}}else{const[l,c]=r.split(":");return{host:l,port:eb(c)}}}function eb(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function TV(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}class q1{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return xr("not implemented")}_getIdTokenResponse(t){return xr("not implemented")}_linkToIdToken(t,n){return xr("not implemented")}_getReauthenticationResolver(t){return xr("not implemented")}}async function hl(e,t){return QO(e,"POST","/v1/accounts:signInWithIdp",_v(e,t))}const EV="http://localhost";class $a extends q1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new $a(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Qi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:a}=n,l=pv(n,["providerId","signInMethod"]);if(!r||!a)return null;const c=new $a(r,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const n=this.buildRequest();return hl(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,hl(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,hl(t,n)}buildRequest(){const t={requestUri:EV,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Cc(n)}return t}}class bv{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Ic extends bv{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class Vs extends Ic{constructor(){super("facebook.com")}static credential(t){return $a._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Vs.credentialFromTaggedObject(t)}static credentialFromError(t){return Vs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Vs.credential(t.oauthAccessToken)}catch{return null}}}Vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vs.PROVIDER_ID="facebook.com";class Cr extends Ic{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return $a._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Cr.credentialFromTaggedObject(t)}static credentialFromError(t){return Cr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Cr.credential(n,r)}catch{return null}}}Cr.GOOGLE_SIGN_IN_METHOD="google.com";Cr.PROVIDER_ID="google.com";class ks extends Ic{constructor(){super("github.com")}static credential(t){return $a._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ks.credentialFromTaggedObject(t)}static credentialFromError(t){return ks.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ks.credential(t.oauthAccessToken)}catch{return null}}}ks.GITHUB_SIGN_IN_METHOD="github.com";ks.PROVIDER_ID="github.com";class Ps extends Ic{constructor(){super("twitter.com")}static credential(t,n){return $a._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ps.credentialFromTaggedObject(t)}static credentialFromError(t){return Ps.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ps.credential(n,r)}catch{return null}}}Ps.TWITTER_SIGN_IN_METHOD="twitter.com";Ps.PROVIDER_ID="twitter.com";class ml{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,a=!1){const l=await Ei._fromIdTokenResponse(t,r,a),c=nb(r);return new ml({user:l,providerId:c,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const a=nb(r);return new ml({user:t,providerId:a,_tokenResponse:r,operationType:n})}}function nb(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class rd extends Ri{constructor(t,n,r,a){var l;super(n.code,n.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,rd.prototype),this.customData={appName:t.name,tenantId:(l=t.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,a){return new rd(t,n,r,a)}}function G1(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?rd._fromErrorAndOperation(e,l,t,r):l})}async function wV(e,t,n=!1){const r=await oc(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ml._forOperation(e,"link",r)}async function bV(e,t,n=!1){const{auth:r}=e;if(li(r.app))return Promise.reject(za(r));const a="reauthenticate";try{const l=await oc(e,G1(r,a,t,e),n);bt(l.idToken,r,"internal-error");const c=Tv(l.idToken);bt(c,r,"internal-error");const{sub:f}=c;return bt(e.uid===f,r,"user-mismatch"),ml._forOperation(e,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Qi(r,"user-mismatch"),l}}async function SV(e,t,n=!1){if(li(e.app))return Promise.reject(za(e));const r="signIn",a=await G1(e,r,t),l=await ml._fromIdTokenResponse(e,r,a);return n||await e._updateCurrentUser(l.user),l}function AV(e,t,n,r){return oe(e).onIdTokenChanged(t,n,r)}function RV(e,t,n){return oe(e).beforeAuthStateChanged(t,n)}function CV(e,t,n,r){return oe(e).onAuthStateChanged(t,n,r)}function Mg(e){return oe(e).signOut()}const sd="__sak";class K1{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sd,"1"),this.storage.removeItem(sd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const xV=1e3,IV=10;class $1 extends K1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=z1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),a=this.localCache[n];r!==a&&t(n,a,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((c,f,d)=>{this.notifyListeners(c,d)});return}const r=t.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!n&&this.localCache[r]===c||this.notifyListeners(r,c)},l=this.storage.getItem(r);aV()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,IV):a()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},xV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}$1.type="LOCAL";const DV=$1;class Y1 extends K1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}Y1.type="SESSION";const Q1=Y1;function NV(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}class kd{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(a=>a.isListeningto(t));if(n)return n;const r=new kd(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:a,data:l}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const f=Array.from(c).map(async p=>p(n.origin,l)),d=await NV(f);n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:d})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kd.receivers=[];function Sv(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}class MV{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((f,d)=>{const p=Sv("",20);a.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(_){const E=_;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(E.data.response);break;default:clearTimeout(y),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Fi(){return window}function OV(e){Fi().location.href=e}function X1(){return typeof Fi().WorkerGlobalScope<"u"&&typeof Fi().importScripts=="function"}async function VV(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kV(){var e;return((e=navigator?.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function PV(){return X1()?self:null}const W1="firebaseLocalStorageDb",LV=1,ad="firebaseLocalStorage",Z1="fbase_key";class Dc{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pd(e,t){return e.transaction([ad],t?"readwrite":"readonly").objectStore(ad)}function UV(){const e=indexedDB.deleteDatabase(W1);return new Dc(e).toPromise()}function gy(){const e=indexedDB.open(W1,LV);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(ad,{keyPath:Z1})}catch(a){n(a)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(ad)?t(r):(r.close(),await UV(),t(await gy()))})})}async function ib(e,t,n){const r=Pd(e,!0).put({[Z1]:t,value:n});return new Dc(r).toPromise()}async function jV(e,t){const n=Pd(e,!1).get(t),r=await new Dc(n).toPromise();return r===void 0?null:r.value}function rb(e,t){const n=Pd(e,!0).delete(t);return new Dc(n).toPromise()}const BV=800,zV=3;class J1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gy(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>zV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return X1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kd._getInstance(PV()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await VV(),!this.activeServiceWorker)return;this.sender=new MV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||kV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await gy();return await ib(t,sd,"1"),await rb(t,sd),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ib(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>jV(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>rb(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=Pd(a,!1).getAll();return new Dc(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const a of Array.from(r))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}J1.type="LOCAL";const FV=J1;new xc(3e4,6e4);function tR(e,t){return t?Ir(t):(bt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class Av extends q1{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return hl(t,this._buildIdpRequest())}_linkToIdToken(t,n){return hl(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return hl(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function HV(e){return SV(e.auth,new Av(e),e.bypassAuthState)}function qV(e){const{auth:t,user:n}=e;return bt(n,t,"internal-error"),bV(n,new Av(e),e.bypassAuthState)}async function GV(e){const{auth:t,user:n}=e;return bt(n,t,"internal-error"),wV(n,new Av(e),e.bypassAuthState)}class eR{constructor(t,n,r,a,l=!1){this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:a,tenantId:l,error:c,type:f}=t;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return HV;case"linkViaPopup":case"linkViaRedirect":return GV;case"reauthViaPopup":case"reauthViaRedirect":return qV;default:Qi(this.auth,"internal-error")}}resolve(t){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const KV=new xc(2e3,1e4);async function $V(e,t,n){if(li(e.app))return Promise.reject(wi(e,"operation-not-supported-in-this-environment"));const r=Vd(e);FO(e,t,bv);const a=tR(r,n);return new La(r,"signInViaPopup",t,a).executeNotNull()}class La extends eR{constructor(t,n,r,a,l){super(t,n,a,l),this.provider=r,this.authWindow=null,this.pollId=null,La.currentPopupAction&&La.currentPopupAction.cancel(),La.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return bt(t,this.auth,"internal-error"),t}async onExecution(){Lr(this.filter.length===1,"Popup operations only handle one event");const t=Sv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(wi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,La.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,KV.get())};t()}}La.currentPopupAction=null;const YV="pendingRedirect",zf=new Map;class QV extends eR{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=zf.get(this.auth._key());if(!t){try{const r=await XV(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}zf.set(this.auth._key(),t)}return this.bypassAuthState||zf.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XV(e,t){const n=JV(t),r=ZV(e);if(!await r._isAvailable())return!1;const a=await r._get(n)==="true";return await r._remove(n),a}function WV(e,t){zf.set(e._key(),t)}function ZV(e){return Ir(e._redirectPersistence)}function JV(e){return Bf(YV,e.config.apiKey,e.name)}async function tk(e,t,n=!1){if(li(e.app))return Promise.reject(za(e));const r=Vd(e),a=tR(r,t),c=await new QV(r,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,t)),c}const ek=600*1e3;class nk{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!ik(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!nR(t)){const a=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(wi(this.auth,a))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=ek&&this.cachedEventUids.clear(),this.cachedEventUids.has(sb(t))}saveEventToCache(t){this.cachedEventUids.add(sb(t)),this.lastProcessedEventTime=Date.now()}}function sb(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function nR({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function ik(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nR(e);default:return!1}}async function rk(e,t={}){return Cl(e,"GET","/v1/projects",t)}const sk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ak=/^https?/;async function ok(e){if(e.config.emulator)return;const{authorizedDomains:t}=await rk(e);for(const n of t)try{if(lk(n))return}catch{}Qi(e,"unauthorized-domain")}function lk(e){const t=my(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const c=new URL(e);return c.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===r}if(!ak.test(n))return!1;if(sk.test(e))return r===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const uk=new xc(3e4,6e4);function ab(){const e=Fi().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function ck(e){return new Promise((t,n)=>{var r,a,l;function c(){ab(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ab(),n(wi(e,"network-request-failed"))},timeout:uk.get()})}if(!((a=(r=Fi().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)t(gapi.iframes.getContext());else if(!((l=Fi().gapi)===null||l===void 0)&&l.load)c();else{const f=pV("iframefcb");return Fi()[f]=()=>{gapi.load?c():n(wi(e,"network-request-failed"))},dV(`${mV()}?onload=${f}`).catch(d=>n(d))}}).catch(t=>{throw Ff=null,t})}let Ff=null;function hk(e){return Ff=Ff||ck(e),Ff}const fk=new xc(5e3,15e3),dk="__/auth/iframe",mk="emulator/auth/iframe",pk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yk(e){const t=e.config;bt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?vv(t,mk):`https://${e.config.authDomain}/${dk}`,r={apiKey:t.apiKey,appName:e.name,v:no},a=gk.get(e.config.apiHost);a&&(r.eid=a);const l=e._getFrameworks();return l.length&&(r.fw=l.join(",")),`${n}?${Cc(r).slice(1)}`}async function vk(e){const t=await hk(e),n=Fi().gapi;return bt(n,e,"internal-error"),t.open({where:document.body,url:yk(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pk,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const c=wi(e,"network-request-failed"),f=Fi().setTimeout(()=>{l(c)},fk.get());function d(){Fi().clearTimeout(f),a(r)}r.ping(d).then(d,()=>{l(c)})}))}const _k={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Tk=500,Ek=600,wk="_blank",bk="http://localhost";class ob{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Sk(e,t,n,r=Tk,a=Ek){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const d=Object.assign(Object.assign({},_k),{width:r.toString(),height:a.toString(),top:l,left:c}),p=dn().toLowerCase();n&&(f=P1(p)?wk:n),V1(p)&&(t=t||bk,d.scrollbars="yes");const y=Object.entries(d).reduce((E,[A,D])=>`${E}${A}=${D},`,"");if(sV(p)&&f!=="_self")return Ak(t||"",f),new ob(null);const _=window.open(t||"",f,y);bt(_,e,"popup-blocked");try{_.focus()}catch{}return new ob(_)}function Ak(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const Rk="__/auth/handler",Ck="emulator/auth/handler",xk=encodeURIComponent("fac");async function lb(e,t,n,r,a,l){bt(e.config.authDomain,e,"auth-domain-config-required"),bt(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:no,eventId:a};if(t instanceof bv){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",IM(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,_]of Object.entries({}))c[y]=_}if(t instanceof Ic){const y=t.getScopes().filter(_=>_!=="");y.length>0&&(c.scopes=y.join(","))}e.tenantId&&(c.tid=e.tenantId);const f=c;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const d=await e._getAppCheckToken(),p=d?`#${xk}=${encodeURIComponent(d)}`:"";return`${Ik(e)}?${Cc(f).slice(1)}${p}`}function Ik({config:e}){return e.emulator?vv(e,Ck):`https://${e.authDomain}/${Rk}`}const Og="webStorageSupport";class Dk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Q1,this._completeRedirectFn=tk,this._overrideRedirectResult=WV}async _openPopup(t,n,r,a){var l;Lr((l=this.eventManagers[t._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await lb(t,n,r,my(),a);return Sk(t,c,Sv())}async _openRedirect(t,n,r,a){await this._originValidation(t);const l=await lb(t,n,r,my(),a);return OV(l),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:a,promise:l}=this.eventManagers[n];return a?Promise.resolve(a):(Lr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await vk(t),r=new nk(t);return n.register("authEvent",a=>(bt(a?.authEvent,t,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Og,{type:Og},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[Og];c!==void 0&&n(!!c),Qi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ok(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return z1()||k1()||Ev()}}const Nk=Dk;var ub="@firebase/auth",cb="1.10.8";class Mk{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){bt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ok(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Vk(e){bi(new hi("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=r.options;bt(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:f,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:F1(e)},p=new hV(r,a,l,d);return yV(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),bi(new hi("auth-internal",t=>{const n=Vd(t.getProvider("auth").getImmediate());return(r=>new Mk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mn(ub,cb,Ok(e)),Mn(ub,cb,"esm2017")}const kk=300,Pk=v1("authIdTokenMaxAge")||kk;let hb=null;const Lk=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Pk)return;const a=n?.token;hb!==a&&(hb=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Uk(e=Od()){const t=eo(e,"auth");if(t.isInitialized())return t.getImmediate();const n=gV(e,{popupRedirectResolver:Nk,persistence:[FV,DV,Q1]}),r=v1("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const c=Lk(l.toString());RV(n,c,()=>c(n.currentUser)),AV(n,f=>c(f))}}const a=p1("auth");return a&&vV(n,`http://${a}`),n}function jk(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}fV({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=a=>{const l=wi("internal-error");l.customData=a,n(l)},r.type="text/javascript",r.charset="UTF-8",jk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Vk("Browser");var fb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Bs,iR;(function(){var e;function t(R,S){function N(){}N.prototype=S.prototype,R.D=S.prototype,R.prototype=new N,R.prototype.constructor=R,R.C=function(U,B,H){for(var L=Array(arguments.length-2),Xt=2;Xt<arguments.length;Xt++)L[Xt-2]=arguments[Xt];return S.prototype[B].apply(U,L)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,S,N){N||(N=0);var U=Array(16);if(typeof S=="string")for(var B=0;16>B;++B)U[B]=S.charCodeAt(N++)|S.charCodeAt(N++)<<8|S.charCodeAt(N++)<<16|S.charCodeAt(N++)<<24;else for(B=0;16>B;++B)U[B]=S[N++]|S[N++]<<8|S[N++]<<16|S[N++]<<24;S=R.g[0],N=R.g[1],B=R.g[2];var H=R.g[3],L=S+(H^N&(B^H))+U[0]+3614090360&4294967295;S=N+(L<<7&4294967295|L>>>25),L=H+(B^S&(N^B))+U[1]+3905402710&4294967295,H=S+(L<<12&4294967295|L>>>20),L=B+(N^H&(S^N))+U[2]+606105819&4294967295,B=H+(L<<17&4294967295|L>>>15),L=N+(S^B&(H^S))+U[3]+3250441966&4294967295,N=B+(L<<22&4294967295|L>>>10),L=S+(H^N&(B^H))+U[4]+4118548399&4294967295,S=N+(L<<7&4294967295|L>>>25),L=H+(B^S&(N^B))+U[5]+1200080426&4294967295,H=S+(L<<12&4294967295|L>>>20),L=B+(N^H&(S^N))+U[6]+2821735955&4294967295,B=H+(L<<17&4294967295|L>>>15),L=N+(S^B&(H^S))+U[7]+4249261313&4294967295,N=B+(L<<22&4294967295|L>>>10),L=S+(H^N&(B^H))+U[8]+1770035416&4294967295,S=N+(L<<7&4294967295|L>>>25),L=H+(B^S&(N^B))+U[9]+2336552879&4294967295,H=S+(L<<12&4294967295|L>>>20),L=B+(N^H&(S^N))+U[10]+4294925233&4294967295,B=H+(L<<17&4294967295|L>>>15),L=N+(S^B&(H^S))+U[11]+2304563134&4294967295,N=B+(L<<22&4294967295|L>>>10),L=S+(H^N&(B^H))+U[12]+1804603682&4294967295,S=N+(L<<7&4294967295|L>>>25),L=H+(B^S&(N^B))+U[13]+4254626195&4294967295,H=S+(L<<12&4294967295|L>>>20),L=B+(N^H&(S^N))+U[14]+2792965006&4294967295,B=H+(L<<17&4294967295|L>>>15),L=N+(S^B&(H^S))+U[15]+1236535329&4294967295,N=B+(L<<22&4294967295|L>>>10),L=S+(B^H&(N^B))+U[1]+4129170786&4294967295,S=N+(L<<5&4294967295|L>>>27),L=H+(N^B&(S^N))+U[6]+3225465664&4294967295,H=S+(L<<9&4294967295|L>>>23),L=B+(S^N&(H^S))+U[11]+643717713&4294967295,B=H+(L<<14&4294967295|L>>>18),L=N+(H^S&(B^H))+U[0]+3921069994&4294967295,N=B+(L<<20&4294967295|L>>>12),L=S+(B^H&(N^B))+U[5]+3593408605&4294967295,S=N+(L<<5&4294967295|L>>>27),L=H+(N^B&(S^N))+U[10]+38016083&4294967295,H=S+(L<<9&4294967295|L>>>23),L=B+(S^N&(H^S))+U[15]+3634488961&4294967295,B=H+(L<<14&4294967295|L>>>18),L=N+(H^S&(B^H))+U[4]+3889429448&4294967295,N=B+(L<<20&4294967295|L>>>12),L=S+(B^H&(N^B))+U[9]+568446438&4294967295,S=N+(L<<5&4294967295|L>>>27),L=H+(N^B&(S^N))+U[14]+3275163606&4294967295,H=S+(L<<9&4294967295|L>>>23),L=B+(S^N&(H^S))+U[3]+4107603335&4294967295,B=H+(L<<14&4294967295|L>>>18),L=N+(H^S&(B^H))+U[8]+1163531501&4294967295,N=B+(L<<20&4294967295|L>>>12),L=S+(B^H&(N^B))+U[13]+2850285829&4294967295,S=N+(L<<5&4294967295|L>>>27),L=H+(N^B&(S^N))+U[2]+4243563512&4294967295,H=S+(L<<9&4294967295|L>>>23),L=B+(S^N&(H^S))+U[7]+1735328473&4294967295,B=H+(L<<14&4294967295|L>>>18),L=N+(H^S&(B^H))+U[12]+2368359562&4294967295,N=B+(L<<20&4294967295|L>>>12),L=S+(N^B^H)+U[5]+4294588738&4294967295,S=N+(L<<4&4294967295|L>>>28),L=H+(S^N^B)+U[8]+2272392833&4294967295,H=S+(L<<11&4294967295|L>>>21),L=B+(H^S^N)+U[11]+1839030562&4294967295,B=H+(L<<16&4294967295|L>>>16),L=N+(B^H^S)+U[14]+4259657740&4294967295,N=B+(L<<23&4294967295|L>>>9),L=S+(N^B^H)+U[1]+2763975236&4294967295,S=N+(L<<4&4294967295|L>>>28),L=H+(S^N^B)+U[4]+1272893353&4294967295,H=S+(L<<11&4294967295|L>>>21),L=B+(H^S^N)+U[7]+4139469664&4294967295,B=H+(L<<16&4294967295|L>>>16),L=N+(B^H^S)+U[10]+3200236656&4294967295,N=B+(L<<23&4294967295|L>>>9),L=S+(N^B^H)+U[13]+681279174&4294967295,S=N+(L<<4&4294967295|L>>>28),L=H+(S^N^B)+U[0]+3936430074&4294967295,H=S+(L<<11&4294967295|L>>>21),L=B+(H^S^N)+U[3]+3572445317&4294967295,B=H+(L<<16&4294967295|L>>>16),L=N+(B^H^S)+U[6]+76029189&4294967295,N=B+(L<<23&4294967295|L>>>9),L=S+(N^B^H)+U[9]+3654602809&4294967295,S=N+(L<<4&4294967295|L>>>28),L=H+(S^N^B)+U[12]+3873151461&4294967295,H=S+(L<<11&4294967295|L>>>21),L=B+(H^S^N)+U[15]+530742520&4294967295,B=H+(L<<16&4294967295|L>>>16),L=N+(B^H^S)+U[2]+3299628645&4294967295,N=B+(L<<23&4294967295|L>>>9),L=S+(B^(N|~H))+U[0]+4096336452&4294967295,S=N+(L<<6&4294967295|L>>>26),L=H+(N^(S|~B))+U[7]+1126891415&4294967295,H=S+(L<<10&4294967295|L>>>22),L=B+(S^(H|~N))+U[14]+2878612391&4294967295,B=H+(L<<15&4294967295|L>>>17),L=N+(H^(B|~S))+U[5]+4237533241&4294967295,N=B+(L<<21&4294967295|L>>>11),L=S+(B^(N|~H))+U[12]+1700485571&4294967295,S=N+(L<<6&4294967295|L>>>26),L=H+(N^(S|~B))+U[3]+2399980690&4294967295,H=S+(L<<10&4294967295|L>>>22),L=B+(S^(H|~N))+U[10]+4293915773&4294967295,B=H+(L<<15&4294967295|L>>>17),L=N+(H^(B|~S))+U[1]+2240044497&4294967295,N=B+(L<<21&4294967295|L>>>11),L=S+(B^(N|~H))+U[8]+1873313359&4294967295,S=N+(L<<6&4294967295|L>>>26),L=H+(N^(S|~B))+U[15]+4264355552&4294967295,H=S+(L<<10&4294967295|L>>>22),L=B+(S^(H|~N))+U[6]+2734768916&4294967295,B=H+(L<<15&4294967295|L>>>17),L=N+(H^(B|~S))+U[13]+1309151649&4294967295,N=B+(L<<21&4294967295|L>>>11),L=S+(B^(N|~H))+U[4]+4149444226&4294967295,S=N+(L<<6&4294967295|L>>>26),L=H+(N^(S|~B))+U[11]+3174756917&4294967295,H=S+(L<<10&4294967295|L>>>22),L=B+(S^(H|~N))+U[2]+718787259&4294967295,B=H+(L<<15&4294967295|L>>>17),L=N+(H^(B|~S))+U[9]+3951481745&4294967295,R.g[0]=R.g[0]+S&4294967295,R.g[1]=R.g[1]+(B+(L<<21&4294967295|L>>>11))&4294967295,R.g[2]=R.g[2]+B&4294967295,R.g[3]=R.g[3]+H&4294967295}r.prototype.u=function(R,S){S===void 0&&(S=R.length);for(var N=S-this.blockSize,U=this.B,B=this.h,H=0;H<S;){if(B==0)for(;H<=N;)a(this,R,H),H+=this.blockSize;if(typeof R=="string"){for(;H<S;)if(U[B++]=R.charCodeAt(H++),B==this.blockSize){a(this,U),B=0;break}}else for(;H<S;)if(U[B++]=R[H++],B==this.blockSize){a(this,U),B=0;break}}this.h=B,this.o+=S},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var S=1;S<R.length-8;++S)R[S]=0;var N=8*this.o;for(S=R.length-8;S<R.length;++S)R[S]=N&255,N/=256;for(this.u(R),R=Array(16),S=N=0;4>S;++S)for(var U=0;32>U;U+=8)R[N++]=this.g[S]>>>U&255;return R};function l(R,S){var N=f;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=S(R)}function c(R,S){this.h=S;for(var N=[],U=!0,B=R.length-1;0<=B;B--){var H=R[B]|0;U&&H==S||(N[B]=H,U=!1)}this.g=N}var f={};function d(R){return-128<=R&&128>R?l(R,function(S){return new c([S|0],0>S?-1:0)}):new c([R|0],0>R?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return _;if(0>R)return x(p(-R));for(var S=[],N=1,U=0;R>=N;U++)S[U]=R/N|0,N*=4294967296;return new c(S,0)}function y(R,S){if(R.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(R.charAt(0)=="-")return x(y(R.substring(1),S));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=p(Math.pow(S,8)),U=_,B=0;B<R.length;B+=8){var H=Math.min(8,R.length-B),L=parseInt(R.substring(B,B+H),S);8>H?(H=p(Math.pow(S,H)),U=U.j(H).add(p(L))):(U=U.j(N),U=U.add(p(L)))}return U}var _=d(0),E=d(1),A=d(16777216);e=c.prototype,e.m=function(){if(b(this))return-x(this).m();for(var R=0,S=1,N=0;N<this.g.length;N++){var U=this.i(N);R+=(0<=U?U:4294967296+U)*S,S*=4294967296}return R},e.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D(this))return"0";if(b(this))return"-"+x(this).toString(R);for(var S=p(Math.pow(R,6)),N=this,U="";;){var B=K(N,S).g;N=V(N,B.j(S));var H=((0<N.g.length?N.g[0]:N.h)>>>0).toString(R);if(N=B,D(N))return H+U;for(;6>H.length;)H="0"+H;U=H+U}},e.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function D(R){if(R.h!=0)return!1;for(var S=0;S<R.g.length;S++)if(R.g[S]!=0)return!1;return!0}function b(R){return R.h==-1}e.l=function(R){return R=V(this,R),b(R)?-1:D(R)?0:1};function x(R){for(var S=R.g.length,N=[],U=0;U<S;U++)N[U]=~R.g[U];return new c(N,~R.h).add(E)}e.abs=function(){return b(this)?x(this):this},e.add=function(R){for(var S=Math.max(this.g.length,R.g.length),N=[],U=0,B=0;B<=S;B++){var H=U+(this.i(B)&65535)+(R.i(B)&65535),L=(H>>>16)+(this.i(B)>>>16)+(R.i(B)>>>16);U=L>>>16,H&=65535,L&=65535,N[B]=L<<16|H}return new c(N,N[N.length-1]&-2147483648?-1:0)};function V(R,S){return R.add(x(S))}e.j=function(R){if(D(this)||D(R))return _;if(b(this))return b(R)?x(this).j(x(R)):x(x(this).j(R));if(b(R))return x(this.j(x(R)));if(0>this.l(A)&&0>R.l(A))return p(this.m()*R.m());for(var S=this.g.length+R.g.length,N=[],U=0;U<2*S;U++)N[U]=0;for(U=0;U<this.g.length;U++)for(var B=0;B<R.g.length;B++){var H=this.i(U)>>>16,L=this.i(U)&65535,Xt=R.i(B)>>>16,he=R.i(B)&65535;N[2*U+2*B]+=L*he,P(N,2*U+2*B),N[2*U+2*B+1]+=H*he,P(N,2*U+2*B+1),N[2*U+2*B+1]+=L*Xt,P(N,2*U+2*B+1),N[2*U+2*B+2]+=H*Xt,P(N,2*U+2*B+2)}for(U=0;U<S;U++)N[U]=N[2*U+1]<<16|N[2*U];for(U=S;U<2*S;U++)N[U]=0;return new c(N,0)};function P(R,S){for(;(R[S]&65535)!=R[S];)R[S+1]+=R[S]>>>16,R[S]&=65535,S++}function k(R,S){this.g=R,this.h=S}function K(R,S){if(D(S))throw Error("division by zero");if(D(R))return new k(_,_);if(b(R))return S=K(x(R),S),new k(x(S.g),x(S.h));if(b(S))return S=K(R,x(S)),new k(x(S.g),S.h);if(30<R.g.length){if(b(R)||b(S))throw Error("slowDivide_ only works with positive integers.");for(var N=E,U=S;0>=U.l(R);)N=q(N),U=q(U);var B=Y(N,1),H=Y(U,1);for(U=Y(U,2),N=Y(N,2);!D(U);){var L=H.add(U);0>=L.l(R)&&(B=B.add(N),H=L),U=Y(U,1),N=Y(N,1)}return S=V(R,B.j(S)),new k(B,S)}for(B=_;0<=R.l(S);){for(N=Math.max(1,Math.floor(R.m()/S.m())),U=Math.ceil(Math.log(N)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),H=p(N),L=H.j(S);b(L)||0<L.l(R);)N-=U,H=p(N),L=H.j(S);D(H)&&(H=E),B=B.add(H),R=V(R,L)}return new k(B,R)}e.A=function(R){return K(this,R).h},e.and=function(R){for(var S=Math.max(this.g.length,R.g.length),N=[],U=0;U<S;U++)N[U]=this.i(U)&R.i(U);return new c(N,this.h&R.h)},e.or=function(R){for(var S=Math.max(this.g.length,R.g.length),N=[],U=0;U<S;U++)N[U]=this.i(U)|R.i(U);return new c(N,this.h|R.h)},e.xor=function(R){for(var S=Math.max(this.g.length,R.g.length),N=[],U=0;U<S;U++)N[U]=this.i(U)^R.i(U);return new c(N,this.h^R.h)};function q(R){for(var S=R.g.length+1,N=[],U=0;U<S;U++)N[U]=R.i(U)<<1|R.i(U-1)>>>31;return new c(N,R.h)}function Y(R,S){var N=S>>5;S%=32;for(var U=R.g.length-N,B=[],H=0;H<U;H++)B[H]=0<S?R.i(H+N)>>>S|R.i(H+N+1)<<32-S:R.i(H+N);return new c(B,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iR=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Bs=c}).apply(typeof fb<"u"?fb:typeof self<"u"?self:typeof window<"u"?window:{});var wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var rR,zu,sR,Hf,yy,aR,oR,lR;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,w){return h==Array.prototype||h==Object.prototype||(h[v]=w.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof wf=="object"&&wf];for(var v=0;v<h.length;++v){var w=h[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function a(h,v){if(v)t:{var w=r;h=h.split(".");for(var I=0;I<h.length-1;I++){var $=h[I];if(!($ in w))break t;w=w[$]}h=h[h.length-1],I=w[h],v=v(I),v!=I&&v!=null&&t(w,h,{configurable:!0,writable:!0,value:v})}}function l(h,v){h instanceof String&&(h+="");var w=0,I=!1,$={next:function(){if(!I&&w<h.length){var J=w++;return{value:v(J,h[J]),done:!1}}return I=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}a("Array.prototype.values",function(h){return h||function(){return l(this,function(v,w){return w})}});var c=c||{},f=this||self;function d(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,w){return h.call.apply(h.bind,arguments)}function _(h,v,w){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,I),h.apply(v,$)}}return function(){return h.apply(v,arguments)}}function E(h,v,w){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:_,E.apply(null,arguments)}function A(h,v){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function D(h,v){function w(){}w.prototype=v.prototype,h.aa=v.prototype,h.prototype=new w,h.prototype.constructor=h,h.Qb=function(I,$,J){for(var ct=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)ct[Kt-2]=arguments[Kt];return v.prototype[$].apply(I,ct)}}function b(h){const v=h.length;if(0<v){const w=Array(v);for(let I=0;I<v;I++)w[I]=h[I];return w}return[]}function x(h,v){for(let w=1;w<arguments.length;w++){const I=arguments[w];if(d(I)){const $=h.length||0,J=I.length||0;h.length=$+J;for(let ct=0;ct<J;ct++)h[$+ct]=I[ct]}else h.push(I)}}class V{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function P(h){return/^[\s\xa0]*$/.test(h)}function k(){var h=f.navigator;return h&&(h=h.userAgent)?h:""}function K(h){return K[" "](h),h}K[" "]=function(){};var q=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function Y(h,v,w){for(const I in h)v.call(w,h[I],I,h)}function R(h,v){for(const w in h)v.call(void 0,h[w],w,h)}function S(h){const v={};for(const w in h)v[w]=h[w];return v}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,v){let w,I;for(let $=1;$<arguments.length;$++){I=arguments[$];for(w in I)h[w]=I[w];for(let J=0;J<N.length;J++)w=N[J],Object.prototype.hasOwnProperty.call(I,w)&&(h[w]=I[w])}}function B(h){var v=1;h=h.split(":");const w=[];for(;0<v&&h.length;)w.push(h.shift()),v--;return h.length&&w.push(h.join(":")),w}function H(h){f.setTimeout(()=>{throw h},0)}function L(){var h=It;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Xt{constructor(){this.h=this.g=null}add(v,w){const I=he.get();I.set(v,w),this.h?this.h.next=I:this.g=I,this.h=I}}var he=new V(()=>new tt,h=>h.reset());class tt{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ot,ft=!1,It=new Xt,Dt=()=>{const h=f.Promise.resolve(void 0);ot=()=>{h.then(F)}};var F=()=>{for(var h;h=L();){try{h.h.call(h.g)}catch(w){H(w)}var v=he;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}ft=!1};function it(){this.s=this.s,this.C=this.C}it.prototype.s=!1,it.prototype.ma=function(){this.s||(this.s=!0,this.N())},it.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function lt(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}lt.prototype.h=function(){this.defaultPrevented=!0};var ut=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const w=()=>{};f.addEventListener("test",w,v),f.removeEventListener("test",w,v)}catch{}return h})();function gt(h,v){if(lt.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var w=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(q){t:{try{K(v.nodeName);var $=!0;break t}catch{}$=!1}$||(v=null)}}else w=="mouseover"?v=h.fromElement:w=="mouseout"&&(v=h.toElement);this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Et[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&gt.aa.h.call(this)}}D(gt,lt);var Et={2:"touch",3:"pen",4:"mouse"};gt.prototype.h=function(){gt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ot="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function fe(h,v,w,I,$){this.listener=h,this.proxy=null,this.src=v,this.type=w,this.capture=!!I,this.ha=$,this.key=++Ge,this.da=this.fa=!1}function Ci(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ji(h){this.src=h,this.g={},this.h=0}Ji.prototype.add=function(h,v,w,I,$){var J=h.toString();h=this.g[J],h||(h=this.g[J]=[],this.h++);var ct=oo(h,v,I,$);return-1<ct?(v=h[ct],w||(v.fa=!1)):(v=new fe(v,this.src,J,!!I,$),v.fa=w,h.push(v)),v};function na(h,v){var w=v.type;if(w in h.g){var I=h.g[w],$=Array.prototype.indexOf.call(I,v,void 0),J;(J=0<=$)&&Array.prototype.splice.call(I,$,1),J&&(Ci(v),h.g[w].length==0&&(delete h.g[w],h.h--))}}function oo(h,v,w,I){for(var $=0;$<h.length;++$){var J=h[$];if(!J.da&&J.listener==v&&J.capture==!!w&&J.ha==I)return $}return-1}var fi="closure_lm_"+(1e6*Math.random()|0),ia={};function lo(h,v,w,I,$){if(Array.isArray(v)){for(var J=0;J<v.length;J++)lo(h,v[J],w,I,$);return null}return w=Kc(w),h&&h[Ot]?h.K(v,w,p(I)?!!I.capture:!1,$):mm(h,v,w,!1,I,$)}function mm(h,v,w,I,$,J){if(!v)throw Error("Invalid event type");var ct=p($)?!!$.capture:!!$,Kt=Vl(h);if(Kt||(h[fi]=Kt=new Ji(h)),w=Kt.add(v,w,I,ct,J),w.proxy)return w;if(I=Gc(),w.proxy=I,I.src=h,I.listener=w,h.addEventListener)ut||($=ct),$===void 0&&($=!1),h.addEventListener(v.toString(),I,$);else if(h.attachEvent)h.attachEvent(co(v.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Gc(){function h(w){return v.call(h.src,h.listener,w)}const v=pm;return h}function uo(h,v,w,I,$){if(Array.isArray(v))for(var J=0;J<v.length;J++)uo(h,v[J],w,I,$);else I=p(I)?!!I.capture:!!I,w=Kc(w),h&&h[Ot]?(h=h.i,v=String(v).toString(),v in h.g&&(J=h.g[v],w=oo(J,w,I,$),-1<w&&(Ci(J[w]),Array.prototype.splice.call(J,w,1),J.length==0&&(delete h.g[v],h.h--)))):h&&(h=Vl(h))&&(v=h.g[v.toString()],h=-1,v&&(h=oo(v,w,I,$)),(w=-1<h?v[h]:null)&&ra(w))}function ra(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Ot])na(v.i,h);else{var w=h.type,I=h.proxy;v.removeEventListener?v.removeEventListener(w,I,h.capture):v.detachEvent?v.detachEvent(co(w),I):v.addListener&&v.removeListener&&v.removeListener(I),(w=Vl(v))?(na(w,h),w.h==0&&(w.src=null,v[fi]=null)):Ci(h)}}}function co(h){return h in ia?ia[h]:ia[h]="on"+h}function pm(h,v){if(h.da)h=!0;else{v=new gt(v,this);var w=h.listener,I=h.ha||h.src;h.fa&&ra(h),h=w.call(I,v)}return h}function Vl(h){return h=h[fi],h instanceof Ji?h:null}var Ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kc(h){return typeof h=="function"?h:(h[Ke]||(h[Ke]=function(v){return h.handleEvent(v)}),h[Ke])}function Pe(){it.call(this),this.i=new Ji(this),this.M=this,this.F=null}D(Pe,it),Pe.prototype[Ot]=!0,Pe.prototype.removeEventListener=function(h,v,w,I){uo(this,h,v,w,I)};function je(h,v){var w,I=h.F;if(I)for(w=[];I;I=I.F)w.push(I);if(h=h.M,I=v.type||v,typeof v=="string")v=new lt(v,h);else if(v instanceof lt)v.target=v.target||h;else{var $=v;v=new lt(I,h),U(v,$)}if($=!0,w)for(var J=w.length-1;0<=J;J--){var ct=v.g=w[J];$=tr(ct,I,!0,v)&&$}if(ct=v.g=h,$=tr(ct,I,!0,v)&&$,$=tr(ct,I,!1,v)&&$,w)for(J=0;J<w.length;J++)ct=v.g=w[J],$=tr(ct,I,!1,v)&&$}Pe.prototype.N=function(){if(Pe.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var w=h.g[v],I=0;I<w.length;I++)Ci(w[I]);delete h.g[v],h.h--}}this.F=null},Pe.prototype.K=function(h,v,w,I){return this.i.add(String(h),v,!1,w,I)},Pe.prototype.L=function(h,v,w,I){return this.i.add(String(h),v,!0,w,I)};function tr(h,v,w,I){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var $=!0,J=0;J<v.length;++J){var ct=v[J];if(ct&&!ct.da&&ct.capture==w){var Kt=ct.listener,xe=ct.ha||ct.src;ct.fa&&na(h.i,ct),$=Kt.call(xe,I)!==!1&&$}}return $&&!I.defaultPrevented}function $c(h,v,w){if(typeof h=="function")w&&(h=E(h,w));else if(h&&typeof h.handleEvent=="function")h=E(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:f.setTimeout(h,v||0)}function kl(h){h.g=$c(()=>{h.g=null,h.i&&(h.i=!1,kl(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class gm extends it{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:kl(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sa(h){it.call(this),this.h=h,this.g={}}D(sa,it);var Fr=[];function rn(h){Y(h.g,function(v,w){this.g.hasOwnProperty(w)&&ra(v)},h),h.g={}}sa.prototype.N=function(){sa.aa.N.call(this),rn(this)},sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yn=f.JSON.stringify,mn=f.JSON.parse,ym=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function Pl(){}Pl.prototype.h=null;function Yc(h){return h.h||(h.h=h.i())}function aa(){}var xi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hr(){lt.call(this,"d")}D(Hr,lt);function di(){lt.call(this,"c")}D(di,lt);var Qn={},qr=null;function ho(){return qr=qr||new Pe}Qn.La="serverreachability";function Ll(h){lt.call(this,Qn.La,h)}D(Ll,lt);function er(h){const v=ho();je(v,new Ll(v))}Qn.STAT_EVENT="statevent";function Gr(h,v){lt.call(this,Qn.STAT_EVENT,h),this.stat=v}D(Gr,lt);function $e(h){const v=ho();je(v,new Gr(v,h))}Qn.Ma="timingevent";function Ul(h,v){lt.call(this,Qn.Ma,h),this.size=v}D(Ul,lt);function Kr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},v)}function $r(){this.g=!0}$r.prototype.xa=function(){this.g=!1};function jl(h,v,w,I,$,J){h.info(function(){if(h.g)if(J)for(var ct="",Kt=J.split("&"),xe=0;xe<Kt.length;xe++){var Nt=Kt[xe].split("=");if(1<Nt.length){var ze=Nt[0];Nt=Nt[1];var Fe=ze.split("_");ct=2<=Fe.length&&Fe[1]=="type"?ct+(ze+"="+Nt+"&"):ct+(ze+"=redacted&")}}else ct=null;else ct=J;return"XMLHTTP REQ ("+I+") [attempt "+$+"]: "+v+`
`+w+`
`+ct})}function Bl(h,v,w,I,$,J,ct){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+$+"]: "+v+`
`+w+`
`+J+" "+ct})}function nr(h,v,w,I){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ii(h,w)+(I?" "+I:"")})}function Qc(h,v){h.info(function(){return"TIMEOUT: "+v})}$r.prototype.info=function(){};function Ii(h,v){if(!h.g)return v;if(!v)return null;try{var w=JSON.parse(v);if(w){for(h=0;h<w.length;h++)if(Array.isArray(w[h])){var I=w[h];if(!(2>I.length)){var $=I[1];if(Array.isArray($)&&!(1>$.length)){var J=$[0];if(J!="noop"&&J!="stop"&&J!="close")for(var ct=1;ct<$.length;ct++)$[ct]=""}}}}return Yn(w)}catch{return v}}var pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ye={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Di;function Yr(){}D(Yr,Pl),Yr.prototype.g=function(){return new XMLHttpRequest},Yr.prototype.i=function(){return{}},Di=new Yr;function Ni(h,v,w,I){this.j=h,this.i=v,this.l=w,this.R=I||1,this.U=new sa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xc}function Xc(){this.i=null,this.g="",this.h=!1}var zl={},ir={};function oa(h,v,w){h.L=1,h.v=ca(ge(v)),h.m=w,h.P=!0,rr(h,null)}function rr(h,v){h.F=Date.now(),mi(h),h.A=ge(h.v);var w=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),or(w.i,"t",I),h.C=0,w=h.j.J,h.h=new Xc,h.g=fh(h.j,w?v:null,!h.m),0<h.O&&(h.M=new gm(E(h.Y,h,h.g),h.O)),v=h.U,w=h.g,I=h.ca;var $="readystatechange";Array.isArray($)||($&&(Fr[0]=$.toString()),$=Fr);for(var J=0;J<$.length;J++){var ct=lo(w,$[J],I||v.handleEvent,!1,v.h||v);if(!ct)break;v.g[ct.key]=ct}v=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),er(),jl(h.i,h.u,h.A,h.l,h.R,h.m)}Ni.prototype.ca=function(h){h=h.target;const v=this.M;v&&yn(h)==3?v.j():this.Y(h)},Ni.prototype.Y=function(h){try{if(h==this.g)t:{const Fe=yn(this.g);var v=this.g.Ba();const os=this.g.Z();if(!(3>Fe)&&(Fe!=3||this.g&&(this.h.h||this.g.oa()||da(this.g)))){this.J||Fe!=4||v==7||(v==8||0>=os?er(3):er(2)),fo(this);var w=this.g.Z();this.X=w;e:if(sr(this)){var I=da(this.g);h="";var $=I.length,J=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pn(this),Qr(this);var ct="";break e}this.h.i=new f.TextDecoder}for(v=0;v<$;v++)this.h.h=!0,h+=this.h.i.decode(I[v],{stream:!(J&&v==$-1)});I.length=0,this.h.g+=h,this.C=0,ct=this.h.g}else ct=this.g.oa();if(this.o=w==200,Bl(this.i,this.u,this.A,this.l,this.R,Fe,w),this.o){if(this.T&&!this.K){e:{if(this.g){var Kt,xe=this.g;if((Kt=xe.g?xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Kt)){var Nt=Kt;break e}}Nt=null}if(w=Nt)nr(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mi(this,w);else{this.o=!1,this.s=3,$e(12),pn(this),Qr(this);break t}}if(this.P){w=!0;let wn;for(;!this.J&&this.C<ct.length;)if(wn=la(this,ct),wn==ir){Fe==4&&(this.s=4,$e(14),w=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(wn==zl){this.s=4,$e(15),nr(this.i,this.l,ct,"[Invalid Chunk]"),w=!1;break}else nr(this.i,this.l,wn,null),Mi(this,wn);if(sr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Fe!=4||ct.length!=0||this.h.h||(this.s=1,$e(16),w=!1),this.o=this.o&&w,!w)nr(this.i,this.l,ct,"[Invalid Chunked Response]"),pn(this),Qr(this);else if(0<ct.length&&!this.W){this.W=!0;var ze=this.j;ze.g==this&&ze.ba&&!ze.M&&(ze.j.info("Great, no buffering proxy detected. Bytes received: "+ct.length),Zl(ze),ze.M=!0,$e(11))}}else nr(this.i,this.l,ct,null),Mi(this,ct);Fe==4&&pn(this),this.o&&!this.J&&(Fe==4?uh(this.j,this):(this.o=!1,mi(this)))}else ih(this.g),w==400&&0<ct.indexOf("Unknown SID")?(this.s=3,$e(12)):(this.s=0,$e(13)),pn(this),Qr(this)}}}catch{}finally{}};function sr(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function la(h,v){var w=h.C,I=v.indexOf(`
`,w);return I==-1?ir:(w=Number(v.substring(w,I)),isNaN(w)?zl:(I+=1,I+w>v.length?ir:(v=v.slice(I,I+w),h.C=I+w,v)))}Ni.prototype.cancel=function(){this.J=!0,pn(this)};function mi(h){h.S=Date.now()+h.I,be(h,h.I)}function be(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Kr(E(h.ba,h),v)}function fo(h){h.B&&(f.clearTimeout(h.B),h.B=null)}Ni.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Qc(this.i,this.A),this.L!=2&&(er(),$e(17)),pn(this),this.s=2,Qr(this)):be(this,this.S-h)};function Qr(h){h.j.G==0||h.J||uh(h.j,h)}function pn(h){fo(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,rn(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Mi(h,v){try{var w=h.j;if(w.G!=0&&(w.g==h||Xr(w.h,h))){if(!h.K&&Xr(w.h,h)&&w.G==3){try{var I=w.Da.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var $=I;if($[0]==0){t:if(!w.u){if(w.g)if(w.g.F+3e3<h.F)ss(w),rs(w);else break t;Wl(w),$e(18)}}else w.za=$[1],0<w.za-w.T&&37500>$[2]&&w.F&&w.v==0&&!w.C&&(w.C=Kr(E(w.Za,w),6e3));if(1>=Wc(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else ur(w,11)}else if((h.K||w.g==h)&&ss(w),!P(v))for($=w.Da.g.parse(v),v=0;v<$.length;v++){let Nt=$[v];if(w.T=Nt[0],Nt=Nt[1],w.G==2)if(Nt[0]=="c"){w.K=Nt[1],w.ia=Nt[2];const ze=Nt[3];ze!=null&&(w.la=ze,w.j.info("VER="+w.la));const Fe=Nt[4];Fe!=null&&(w.Aa=Fe,w.j.info("SVER="+w.Aa));const os=Nt[5];os!=null&&typeof os=="number"&&0<os&&(I=1.5*os,w.L=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const wn=h.g;if(wn){const ga=wn.g?wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ga){var J=I.h;J.g||ga.indexOf("spdy")==-1&&ga.indexOf("quic")==-1&&ga.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Wr(J,J.h),J.h=null))}if(I.D){const cr=wn.g?wn.g.getResponseHeader("X-HTTP-Session-Id"):null;cr&&(I.ya=cr,Ft(I.I,I.D,cr))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-h.F,w.j.info("Handshake RTT: "+w.R+"ms")),I=w;var ct=h;if(I.qa=hh(I,I.J?I.ia:null,I.W),ct.K){Xn(I.h,ct);var Kt=ct,xe=I.L;xe&&(Kt.I=xe),Kt.B&&(fo(Kt),mi(Kt)),I.g=ct}else oh(I);0<w.i.length&&Eo(w)}else Nt[0]!="stop"&&Nt[0]!="close"||ur(w,7);else w.G==3&&(Nt[0]=="stop"||Nt[0]=="close"?Nt[0]=="stop"?ur(w,7):Ql(w):Nt[0]!="noop"&&w.l&&w.l.ta(Nt),w.v=0)}}er(4)}catch{}}var vm=class{constructor(h,v){this.g=h,this.map=v}};function Fl(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Wc(h){return h.h?1:h.g?h.g.size:0}function Xr(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Wr(h,v){h.g?h.g.add(v):h.h=v}function Xn(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Fl.prototype.cancel=function(){if(this.i=gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function gn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const w of h.g.values())v=v.concat(w.D);return v}return b(h.i)}function Zc(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var v=[],w=h.length,I=0;I<w;I++)v.push(h[I]);return v}v=[],w=0;for(I in h)v[w++]=h[I];return v}function _m(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var v=[];h=h.length;for(var w=0;w<h;w++)v.push(w);return v}v=[],w=0;for(const I in h)v[w++]=I;return v}}}function mo(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var w=_m(h),I=Zc(h),$=I.length,J=0;J<$;J++)v.call(void 0,I[J],w&&w[J],h)}var ql=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function po(h,v){if(h){h=h.split("&");for(var w=0;w<h.length;w++){var I=h[w].indexOf("="),$=null;if(0<=I){var J=h[w].substring(0,I);$=h[w].substring(I+1)}else J=h[w];v(J,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ar(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ar){this.h=h.h,Zr(this,h.j),this.o=h.o,this.g=h.g,ua(this,h.s),this.l=h.l;var v=h.i,w=new Oi;w.i=v.i,v.g&&(w.g=new Map(v.g),w.h=v.h),go(this,w),this.m=h.m}else h&&(v=String(h).match(ql))?(this.h=!1,Zr(this,v[1]||"",!0),this.o=Jr(v[2]||""),this.g=Jr(v[3]||"",!0),ua(this,v[4]),this.l=Jr(v[5]||"",!0),go(this,v[6]||"",!0),this.m=Jr(v[7]||"")):(this.h=!1,this.i=new Oi(null,this.h))}ar.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Wn(v,Gl,!0),":");var w=this.g;return(w||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Wn(v,Gl,!0),"@"),h.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&h.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&h.push("/"),h.push(Wn(w,w.charAt(0)=="/"?Kl:Jc,!0))),(w=this.i.toString())&&h.push("?",w),(w=this.m)&&h.push("#",Wn(w,wm)),h.join("")};function ge(h){return new ar(h)}function Zr(h,v,w){h.j=w?Jr(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function ua(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function go(h,v,w){v instanceof Oi?(h.i=v,th(h.i,h.h)):(w||(v=Wn(v,Em)),h.i=new Oi(v,h.h))}function Ft(h,v,w){h.i.set(v,w)}function ca(h){return Ft(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Jr(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Wn(h,v,w){return typeof h=="string"?(h=encodeURI(h).replace(v,Tm),w&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Tm(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Gl=/[#\/\?@]/g,Jc=/[#\?:]/g,Kl=/[#\?]/g,Em=/[#\?@]/g,wm=/#/g;function Oi(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Be(h){h.g||(h.g=new Map,h.h=0,h.i&&po(h.i,function(v,w){h.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}e=Oi.prototype,e.add=function(h,v){Be(this),this.i=null,h=Vn(this,h);var w=this.g.get(h);return w||this.g.set(h,w=[]),w.push(v),this.h+=1,this};function yo(h,v){Be(h),v=Vn(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function vo(h,v){return Be(h),v=Vn(h,v),h.g.has(v)}e.forEach=function(h,v){Be(this),this.g.forEach(function(w,I){w.forEach(function($){h.call(v,$,I,this)},this)},this)},e.na=function(){Be(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),w=[];for(let I=0;I<v.length;I++){const $=h[I];for(let J=0;J<$.length;J++)w.push(v[I])}return w},e.V=function(h){Be(this);let v=[];if(typeof h=="string")vo(this,h)&&(v=v.concat(this.g.get(Vn(this,h))));else{h=Array.from(this.g.values());for(let w=0;w<h.length;w++)v=v.concat(h[w])}return v},e.set=function(h,v){return Be(this),this.i=null,h=Vn(this,h),vo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},e.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function or(h,v,w){yo(h,v),0<w.length&&(h.i=null,h.g.set(Vn(h,v),b(w)),h.h+=w.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var w=0;w<v.length;w++){var I=v[w];const J=encodeURIComponent(String(I)),ct=this.V(I);for(I=0;I<ct.length;I++){var $=J;ct[I]!==""&&($+="="+encodeURIComponent(String(ct[I]))),h.push($)}}return this.i=h.join("&")};function Vn(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function th(h,v){v&&!h.j&&(Be(h),h.i=null,h.g.forEach(function(w,I){var $=I.toLowerCase();I!=$&&(yo(this,I),or(this,$,w))},h)),h.j=v}function $l(h,v){const w=new $r;if(f.Image){const I=new Image;I.onload=A(En,w,"TestLoadImage: loaded",!0,v,I),I.onerror=A(En,w,"TestLoadImage: error",!1,v,I),I.onabort=A(En,w,"TestLoadImage: abort",!1,v,I),I.ontimeout=A(En,w,"TestLoadImage: timeout",!1,v,I),f.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else v(!1)}function eh(h,v){const w=new $r,I=new AbortController,$=setTimeout(()=>{I.abort(),En(w,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:I.signal}).then(J=>{clearTimeout($),J.ok?En(w,"TestPingServer: ok",!0,v):En(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout($),En(w,"TestPingServer: error",!1,v)})}function En(h,v,w,I,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),I(w)}catch{}}function pi(){this.g=new ym}function Yl(h,v,w){const I=w||"";try{mo(h,function($,J){let ct=$;p($)&&(ct=Yn($)),v.push(I+J+"="+encodeURIComponent(ct))})}catch($){throw v.push(I+"type="+encodeURIComponent("_badmap")),$}}function Vi(h){this.l=h.Ub||null,this.j=h.eb||!1}D(Vi,Pl),Vi.prototype.g=function(){return new kn(this.l,this.j)},Vi.prototype.i=(function(h){return function(){return h}})({});function kn(h,v){Pe.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(kn,Pe),e=kn.prototype,e.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,ts(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||f).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ki(this)),this.readyState=0},e.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ts(this)),this.g&&(this.readyState=3,ts(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_o(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function _o(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}e.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?ki(this):ts(this),this.readyState==3&&_o(this)}},e.Ra=function(h){this.g&&(this.response=this.responseText=h,ki(this))},e.Qa=function(h){this.g&&(this.response=h,ki(this))},e.ga=function(){this.g&&ki(this)};function ki(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ts(h)}e.setRequestHeader=function(h,v){this.u.append(h,v)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,h.push(w[0]+": "+w[1]),w=v.next();return h.join(`\r
`)};function ts(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(kn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ha(h){let v="";return Y(h,function(w,I){v+=I,v+=":",v+=w,v+=`\r
`}),v}function es(h,v,w){t:{for(I in w){var I=!1;break t}I=!0}I||(w=ha(w),typeof h=="string"?w!=null&&encodeURIComponent(String(w)):Ft(h,v,w))}function ne(h){Pe.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(ne,Pe);var sn=/^https?$/i,lr=["POST","PUT"];e=ne.prototype,e.Ha=function(h){this.J=h},e.ea=function(h,v,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Di.g(),this.v=this.o?Yc(this.o):Yc(Di),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(J){fa(this,J);return}if(h=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var $ in I)w.set($,I[$]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const J of I.keys())w.set(J,I.get(J));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(J=>J.toLowerCase()=="content-type"),$=f.FormData&&h instanceof f.FormData,!(0<=Array.prototype.indexOf.call(lr,v,void 0))||I||$||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ct]of w)this.g.setRequestHeader(J,ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{To(this),this.u=!0,this.g.send(h),this.u=!1}catch(J){fa(this,J)}};function fa(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,ns(h),is(h)}function ns(h){h.A||(h.A=!0,je(h,"complete"),je(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,je(this,"complete"),je(this,"abort"),is(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),is(this,!0)),ne.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?nh(this):this.bb())},e.bb=function(){nh(this)};function nh(h){if(h.h&&typeof c<"u"&&(!h.v[1]||yn(h)!=4||h.Z()!=2)){if(h.u&&yn(h)==4)$c(h.Ea,0,h);else if(je(h,"readystatechange"),yn(h)==4){h.h=!1;try{const ct=h.Z();t:switch(ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break t;default:v=!1}var w;if(!(w=v)){var I;if(I=ct===0){var $=String(h.D).match(ql)[1]||null;!$&&f.self&&f.self.location&&($=f.self.location.protocol.slice(0,-1)),I=!sn.test($?$.toLowerCase():"")}w=I}if(w)je(h,"complete"),je(h,"success");else{h.m=6;try{var J=2<yn(h)?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.Z()+"]",ns(h)}}finally{is(h)}}}}function is(h,v){if(h.g){To(h);const w=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||je(h,"ready");try{w.onreadystatechange=I}catch{}}}function To(h){h.I&&(f.clearTimeout(h.I),h.I=null)}e.isActive=function(){return!!this.g};function yn(h){return h.g?h.g.readyState:0}e.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),mn(v)}};function da(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ih(h){const v={};h=(h.g&&2<=yn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if(P(h[I]))continue;var w=B(h[I]);const $=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const J=v[$]||[];v[$]=J,J.push(w)}R(v,function(I){return I.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ma(h,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[h]||v}function rh(h){this.Aa=0,this.i=[],this.j=new $r,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ma("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ma("baseRetryDelayMs",5e3,h),this.cb=ma("retryDelaySeedMs",1e4,h),this.Wa=ma("forwardChannelMaxRetries",2,h),this.wa=ma("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Fl(h&&h.concurrentRequestLimit),this.Da=new pi,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=rh.prototype,e.la=8,e.G=1,e.connect=function(h,v,w,I){$e(0),this.W=h,this.H=v||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.I=hh(this,null,this.W),Eo(this)};function Ql(h){if(sh(h),h.G==3){var v=h.U++,w=ge(h.I);if(Ft(w,"SID",h.K),Ft(w,"RID",v),Ft(w,"TYPE","terminate"),pa(h,w),v=new Ni(h,h.j,v),v.L=2,v.v=ca(ge(w)),w=!1,f.navigator&&f.navigator.sendBeacon)try{w=f.navigator.sendBeacon(v.v.toString(),"")}catch{}!w&&f.Image&&(new Image().src=v.v,w=!0),w||(v.g=fh(v.j,null),v.g.ea(v.v)),v.F=Date.now(),mi(v)}Jl(h)}function rs(h){h.g&&(Zl(h),h.g.cancel(),h.g=null)}function sh(h){rs(h),h.u&&(f.clearTimeout(h.u),h.u=null),ss(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&f.clearTimeout(h.s),h.s=null)}function Eo(h){if(!Hl(h.h)&&!h.s){h.s=!0;var v=h.Ga;ot||Dt(),ft||(ot(),ft=!0),It.add(v,h),h.B=0}}function bm(h,v){return Wc(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Kr(E(h.Ga,h,v),ch(h,h.B)),h.B++,!0)}e.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const $=new Ni(this,this.j,h);let J=this.o;if(this.S&&(J?(J=S(J),U(J,this.S)):J=this.S),this.m!==null||this.O||($.H=J,J=null),this.P)t:{for(var v=0,w=0;w<this.i.length;w++){e:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break e}I=void 0}if(I===void 0)break;if(v+=I,4096<v){v=w;break t}if(v===4096||w===this.i.length-1){v=w+1;break t}}v=1e3}else v=1e3;v=Xl(this,$,v),w=ge(this.I),Ft(w,"RID",h),Ft(w,"CVER",22),this.D&&Ft(w,"X-HTTP-Session-Id",this.D),pa(this,w),J&&(this.O?v="headers="+encodeURIComponent(String(ha(J)))+"&"+v:this.m&&es(w,this.m,J)),Wr(this.h,$),this.Ua&&Ft(w,"TYPE","init"),this.P?(Ft(w,"$req",v),Ft(w,"SID","null"),$.T=!0,oa($,w,null)):oa($,w,v),this.G=2}}else this.G==3&&(h?ah(this,h):this.i.length==0||Hl(this.h)||ah(this))};function ah(h,v){var w;v?w=v.l:w=h.U++;const I=ge(h.I);Ft(I,"SID",h.K),Ft(I,"RID",w),Ft(I,"AID",h.T),pa(h,I),h.m&&h.o&&es(I,h.m,h.o),w=new Ni(h,h.j,w,h.B+1),h.m===null&&(w.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Xl(h,w,1e3),w.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Wr(h.h,w),oa(w,I,v)}function pa(h,v){h.H&&Y(h.H,function(w,I){Ft(v,I,w)}),h.l&&mo({},function(w,I){Ft(v,I,w)})}function Xl(h,v,w){w=Math.min(h.i.length,w);var I=h.l?E(h.l.Na,h.l,h):null;t:{var $=h.i;let J=-1;for(;;){const ct=["count="+w];J==-1?0<w?(J=$[0].g,ct.push("ofs="+J)):J=0:ct.push("ofs="+J);let Kt=!0;for(let xe=0;xe<w;xe++){let Nt=$[xe].g;const ze=$[xe].map;if(Nt-=J,0>Nt)J=Math.max(0,$[xe].g-100),Kt=!1;else try{Yl(ze,ct,"req"+Nt+"_")}catch{I&&I(ze)}}if(Kt){I=ct.join("&");break t}}}return h=h.i.splice(0,w),v.D=h,I}function oh(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;ot||Dt(),ft||(ot(),ft=!0),It.add(v,h),h.v=0}}function Wl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Kr(E(h.Fa,h),ch(h,h.v)),h.v++,!0)}e.Fa=function(){if(this.u=null,lh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Kr(E(this.ab,this),h)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$e(10),rs(this),lh(this))};function Zl(h){h.A!=null&&(f.clearTimeout(h.A),h.A=null)}function lh(h){h.g=new Ni(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=ge(h.qa);Ft(v,"RID","rpc"),Ft(v,"SID",h.K),Ft(v,"AID",h.T),Ft(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ft(v,"TO",h.ja),Ft(v,"TYPE","xmlhttp"),pa(h,v),h.m&&h.o&&es(v,h.m,h.o),h.L&&(h.g.I=h.L);var w=h.g;h=h.ia,w.L=1,w.v=ca(ge(v)),w.m=null,w.P=!0,rr(w,h)}e.Za=function(){this.C!=null&&(this.C=null,rs(this),Wl(this),$e(19))};function ss(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function uh(h,v){var w=null;if(h.g==v){ss(h),Zl(h),h.g=null;var I=2}else if(Xr(h.h,v))w=v.D,Xn(h.h,v),I=1;else return;if(h.G!=0){if(v.o)if(I==1){w=v.m?v.m.length:0,v=Date.now()-v.F;var $=h.B;I=ho(),je(I,new Ul(I,w)),Eo(h)}else oh(h);else if($=v.s,$==3||$==0&&0<v.X||!(I==1&&bm(h,v)||I==2&&Wl(h)))switch(w&&0<w.length&&(v=h.h,v.i=v.i.concat(w)),$){case 1:ur(h,5);break;case 4:ur(h,10);break;case 3:ur(h,6);break;default:ur(h,2)}}}function ch(h,v){let w=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(w*=2),w*v}function ur(h,v){if(h.j.info("Error code "+v),v==2){var w=E(h.fb,h),I=h.Xa;const $=!I;I=new ar(I||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Zr(I,"https"),ca(I),$?$l(I.toString(),w):eh(I.toString(),w)}else $e(2);h.G=0,h.l&&h.l.sa(v),Jl(h),sh(h)}e.fb=function(h){h?(this.j.info("Successfully pinged google.com"),$e(2)):(this.j.info("Failed to ping google.com"),$e(1))};function Jl(h){if(h.G=0,h.ka=[],h.l){const v=gn(h.h);(v.length!=0||h.i.length!=0)&&(x(h.ka,v),x(h.ka,h.i),h.h.i.length=0,b(h.i),h.i.length=0),h.l.ra()}}function hh(h,v,w){var I=w instanceof ar?ge(w):new ar(w);if(I.g!="")v&&(I.g=v+"."+I.g),ua(I,I.s);else{var $=f.location;I=$.protocol,v=v?v+"."+$.hostname:$.hostname,$=+$.port;var J=new ar(null);I&&Zr(J,I),v&&(J.g=v),$&&ua(J,$),w&&(J.l=w),I=J}return w=h.D,v=h.ya,w&&v&&Ft(I,w,v),Ft(I,"VER",h.la),pa(h,I),I}function fh(h,v,w){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new ne(new Vi({eb:w})):new ne(h.pa),v.Ha(h.J),v}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function dh(){}e=dh.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function wo(){}wo.prototype.g=function(h,v){return new vn(h,v)};function vn(h,v){Pe.call(this),this.g=new rh(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!P(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!P(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new as(this)}D(vn,Pe),vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},vn.prototype.close=function(){Ql(this.g)},vn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var w={};w.__data__=h,h=w}else this.u&&(w={},w.__data__=Yn(h),h=w);v.i.push(new vm(v.Ya++,h)),v.G==3&&Eo(v)},vn.prototype.N=function(){this.g.l=null,delete this.j,Ql(this.g),delete this.g,vn.aa.N.call(this)};function mh(h){Hr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){t:{for(const w in v){h=w;break t}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}D(mh,Hr);function ph(){di.call(this),this.status=1}D(ph,di);function as(h){this.g=h}D(as,dh),as.prototype.ua=function(){je(this.g,"a")},as.prototype.ta=function(h){je(this.g,new mh(h))},as.prototype.sa=function(h){je(this.g,new ph)},as.prototype.ra=function(){je(this.g,"b")},wo.prototype.createWebChannel=wo.prototype.g,vn.prototype.send=vn.prototype.o,vn.prototype.open=vn.prototype.m,vn.prototype.close=vn.prototype.close,lR=function(){return new wo},oR=function(){return ho()},aR=Qn,yy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pe.NO_ERROR=0,pe.TIMEOUT=8,pe.HTTP_ERROR=6,Hf=pe,Ye.COMPLETE="complete",sR=Ye,aa.EventType=xi,xi.OPEN="a",xi.CLOSE="b",xi.ERROR="c",xi.MESSAGE="d",Pe.prototype.listen=Pe.prototype.K,zu=aa,ne.prototype.listenOnce=ne.prototype.L,ne.prototype.getLastError=ne.prototype.Ka,ne.prototype.getLastErrorCode=ne.prototype.Ba,ne.prototype.getStatus=ne.prototype.Z,ne.prototype.getResponseJson=ne.prototype.Oa,ne.prototype.getResponseText=ne.prototype.oa,ne.prototype.send=ne.prototype.ea,ne.prototype.setWithCredentials=ne.prototype.Ha,rR=ne}).apply(typeof wf<"u"?wf:typeof self<"u"?self:typeof window<"u"?window:{});const db="@firebase/firestore",mb="4.8.0";class un{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");let xl="11.10.0";const Ya=new dv("@firebase/firestore");function Jo(){return Ya.logLevel}function dt(e,...t){if(Ya.logLevel<=Ut.DEBUG){const n=t.map(Rv);Ya.debug(`Firestore (${xl}): ${e}`,...n)}}function Ur(e,...t){if(Ya.logLevel<=Ut.ERROR){const n=t.map(Rv);Ya.error(`Firestore (${xl}): ${e}`,...n)}}function Fs(e,...t){if(Ya.logLevel<=Ut.WARN){const n=t.map(Rv);Ya.warn(`Firestore (${xl}): ${e}`,...n)}}function Rv(e){if(typeof e=="string")return e;try{return(function(n){return JSON.stringify(n)})(e)}catch{return e}}function wt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,uR(e,r,n)}function uR(e,t,n){let r=`FIRESTORE (${xl}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ur(r),new Error(r)}function $t(e,t,n,r){let a="Unexpected state";typeof n=="string"?a=n:r=n,e||uR(t,a,r)}function Rt(e,t){return e}const nt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ht extends Ri{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mr{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}class cR{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Bk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(un.UNAUTHENTICATED)))}shutdown(){}}class zk{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Fk{constructor(t){this.t=t,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){$t(this.o===void 0,42304);let r=this.i;const a=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let l=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Mr,t.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const d=l;t.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},f=d=>{dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>f(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Mr)}}),0),c()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($t(typeof r.accessToken=="string",31837,{l:r}),new cR(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return $t(t===null||typeof t=="string",2055,{h:t}),new un(t)}}class Hk{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qk{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new Hk(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class pb{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gk{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,li(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){$t(this.o===void 0,3512);const r=l=>{l.error!=null&&dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,dt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(l.token):Promise.resolve()};this.o=l=>{t.enqueueRetryable((()=>r(l)))};const a=l=>{dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new pb(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?($t(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new pb(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Kk(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function hR(){return new TextEncoder}class Cv{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=Kk(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<n&&(r+=t.charAt(a[l]%62))}return r}}function Mt(e,t){return e<t?-1:e>t?1:0}function vy(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),a=t.codePointAt(n);if(r!==a){if(r<128&&a<128)return Mt(r,a);{const l=hR(),c=$k(l.encode(gb(e,n)),l.encode(gb(t,n)));return c!==0?c:Mt(r,a)}}n+=r>65535?2:1}return Mt(e.length,t.length)}function gb(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function $k(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Mt(e[n],t[n]);return Mt(e.length,t.length)}function pl(e,t,n){return e.length===t.length&&e.every(((r,a)=>n(r,t[a])))}const yb="__name__";class Bi{constructor(t,n,r){n===void 0?n=0:n>t.length&&wt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&wt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Bi.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Bi?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let a=0;a<r;a++){const l=Bi.compareSegments(t.get(a),n.get(a));if(l!==0)return l}return Mt(t.length,n.length)}static compareSegments(t,n){const r=Bi.isNumericId(t),a=Bi.isNumericId(n);return r&&!a?-1:!r&&a?1:r&&a?Bi.extractNumericId(t).compare(Bi.extractNumericId(n)):vy(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Bs.fromString(t.substring(4,t.length-2))}}class ee extends Bi{construct(t,n,r){return new ee(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new ht(nt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((a=>a.length>0)))}return new ee(n)}static emptyPath(){return new ee([])}}const Yk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Bi{construct(t,n,r){return new en(t,n,r)}static isValidIdentifier(t){return Yk.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yb}static keyField(){return new en([yb])}static fromServerFormat(t){const n=[];let r="",a=0;const l=()=>{if(r.length===0)throw new ht(nt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;a<t.length;){const f=t[a];if(f==="\\"){if(a+1===t.length)throw new ht(nt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const d=t[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ht(nt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=d,a+=2}else f==="`"?(c=!c,a++):f!=="."||c?(r+=f,a++):(l(),a++)}if(l(),c)throw new ht(nt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new en(n)}static emptyPath(){return new en([])}}class yt{constructor(t){this.path=t}static fromPath(t){return new yt(ee.fromString(t))}static fromName(t){return new yt(ee.fromString(t).popFirst(5))}static empty(){return new yt(ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ee.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ee.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new yt(new ee(t.slice()))}}function fR(e,t,n){if(!n)throw new ht(nt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Qk(e,t,n,r){if(t===!0&&r===!0)throw new ht(nt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function vb(e){if(!yt.isDocumentKey(e))throw new ht(nt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function _b(e){if(yt.isDocumentKey(e))throw new ht(nt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function dR(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Ld(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":wt(12329,{type:typeof e})}function On(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ht(nt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ld(e);throw new ht(nt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function ke(e,t){const n={typeString:e};return t&&(n.value=t),n}function Nc(e,t){if(!dR(e))throw new ht(nt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const a=t[r].typeString,l="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const c=e[r];if(a&&typeof c!==a){n=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){n=`Expected '${r}' field to equal '${l.value}'`;break}}if(n)throw new ht(nt.INVALID_ARGUMENT,n);return!0}const Tb=-62135596800,Eb=1e6;class se{static now(){return se.fromMillis(Date.now())}static fromDate(t){return se.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Eb);return new se(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ht(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ht(nt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Tb)throw new ht(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ht(nt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Eb}_compareTo(t){return this.seconds===t.seconds?Mt(this.nanoseconds,t.nanoseconds):Mt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:se._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Nc(t,se._jsonSchema))return new se(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Tb;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}se._jsonSchemaVersion="firestore/timestamp/1.0",se._jsonSchema={type:ke("string",se._jsonSchemaVersion),seconds:ke("number"),nanoseconds:ke("number")};class St{static fromTimestamp(t){return new St(t)}static min(){return new St(new se(0,0))}static max(){return new St(new se(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const lc=-1;function Xk(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=St.fromTimestamp(r===1e9?new se(n+1,0):new se(n,r));return new Hs(a,yt.empty(),t)}function Wk(e){return new Hs(e.readTime,e.key,lc)}class Hs{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Hs(St.min(),yt.empty(),lc)}static max(){return new Hs(St.max(),yt.empty(),lc)}}function Zk(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=yt.comparator(e.documentKey,t.documentKey),n!==0?n:Mt(e.largestBatchId,t.largestBatchId))}const Jk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}async function Il(e){if(e.code!==nt.FAILED_PRECONDITION||e.message!==Jk)throw e;dt("LocalStore","Unexpectedly lost primary lease")}class at{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&wt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new at(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(t,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(n,l).next(r,a)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof at?n:at.resolve(n)}catch(n){return at.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):at.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):at.reject(n)}static resolve(t){return new at(((n,r)=>{n(t)}))}static reject(t){return new at(((n,r)=>{r(t)}))}static waitFor(t){return new at(((n,r)=>{let a=0,l=0,c=!1;t.forEach((f=>{++a,f.next((()=>{++l,c&&l===a&&n()}),(d=>r(d)))})),c=!0,l===a&&n()}))}static or(t){let n=at.resolve(!1);for(const r of t)n=n.next((a=>a?at.resolve(a):r()));return n}static forEach(t,n){const r=[];return t.forEach(((a,l)=>{r.push(n.call(this,a,l))})),this.waitFor(r)}static mapArray(t,n){return new at(((r,a)=>{const l=t.length,c=new Array(l);let f=0;for(let d=0;d<l;d++){const p=d;n(t[p]).next((y=>{c[p]=y,++f,f===l&&r(c)}),(y=>a(y)))}}))}static doWhile(t,n){return new at(((r,a)=>{const l=()=>{t()===!0?n().next((()=>{l()}),a):r()};l()}))}}function eP(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Dl(e){return e.name==="IndexedDbTransactionError"}class Ud{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}Ud.ue=-1;const xv=-1;function jd(e){return e==null}function od(e){return e===0&&1/e==-1/0}function nP(e){return typeof e=="number"&&Number.isInteger(e)&&!od(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const mR="";function iP(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=wb(t)),t=rP(e.get(n),t);return wb(t)}function rP(e,t){let n=t;const r=e.length;for(let a=0;a<r;a++){const l=e.charAt(a);switch(l){case"\0":n+="";break;case mR:n+="";break;default:n+=l}}return n}function wb(e){return e+mR+""}function bb(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Js(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function pR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class me{constructor(t,n){this.comparator=t,this.root=n||tn.EMPTY}insert(t,n){return new me(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,tn.BLACK,null,null))}remove(t){return new me(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(t,r.key);if(a===0)return n+r.left.size;a<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new bf(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new bf(this.root,t,this.comparator,!1)}getReverseIterator(){return new bf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new bf(this.root,t,this.comparator,!0)}}class bf{constructor(t,n,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!t.isEmpty();)if(l=n?r(t.key,n):1,n&&a&&(l*=-1),l<0)t=this.isReverse?t.left:t.right;else{if(l===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class tn{constructor(t,n,r,a,l){this.key=t,this.value=n,this.color=r??tn.RED,this.left=a??tn.EMPTY,this.right=l??tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,a,l){return new tn(t??this.key,n??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let a=this;const l=r(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,n,r),null):l===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(t,n,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return tn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(t,a.key)===0){if(a.right.isEmpty())return tn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw wt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw wt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw wt(27949);return t+(this.isRed()?0:1)}}tn.EMPTY=null,tn.RED=!0,tn.BLACK=!1;tn.EMPTY=new class{constructor(){this.size=0}get key(){throw wt(57766)}get value(){throw wt(16141)}get color(){throw wt(16727)}get left(){throw wt(29726)}get right(){throw wt(36894)}copy(t,n,r,a,l){return this}insert(t,n,r){return new tn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ue{constructor(t){this.comparator=t,this.data=new me(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,t[1])>=0)return;n(a.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sb(this.data.getIterator())}getIteratorFrom(t){return new Sb(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof Ue)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ue(this.comparator);return n.data=t,n}}class Sb{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Hn{constructor(t){this.fields=t,t.sort(en.comparator)}static empty(){return new Hn([])}unionWith(t){let n=new Ue(en.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Hn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return pl(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}class gR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class nn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new gR("Invalid base64 string: "+l):l}})(t);return new nn(n)}static fromUint8Array(t){const n=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(t);return new nn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Mt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const sP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qs(e){if($t(!!e,39018),typeof e=="string"){let t=0;const n=sP.exec(e);if($t(!!n,46558,{timestamp:e}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),t=Number(a)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ce(e.seconds),nanos:Ce(e.nanos)}}function Ce(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Gs(e){return typeof e=="string"?nn.fromBase64String(e):nn.fromUint8Array(e)}const yR="server_timestamp",vR="__type__",_R="__previous_value__",TR="__local_write_time__";function Bd(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[vR])===null||n===void 0?void 0:n.stringValue)===yR}function zd(e){const t=e.mapValue.fields[_R];return Bd(t)?zd(t):t}function uc(e){const t=qs(e.mapValue.fields[TR].timestampValue);return new se(t.seconds,t.nanos)}class aP{constructor(t,n,r,a,l,c,f,d,p,y){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=y}}const ld="(default)";class cc{constructor(t,n){this.projectId=t,this.database=n||ld}static empty(){return new cc("","")}get isDefaultDatabase(){return this.database===ld}isEqual(t){return t instanceof cc&&t.projectId===this.projectId&&t.database===this.database}}const ER="__type__",oP="__max__",Sf={mapValue:{}},wR="__vector__",ud="value";function Ks(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Bd(e)?4:uP(e)?9007199254740991:lP(e)?10:11:wt(28295,{value:e})}function Xi(e,t){if(e===t)return!0;const n=Ks(e);if(n!==Ks(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return uc(e).isEqual(uc(t));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=qs(a.timestampValue),f=qs(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(a,l){return Gs(a.bytesValue).isEqual(Gs(l.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(a,l){return Ce(a.geoPointValue.latitude)===Ce(l.geoPointValue.latitude)&&Ce(a.geoPointValue.longitude)===Ce(l.geoPointValue.longitude)})(e,t);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Ce(a.integerValue)===Ce(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=Ce(a.doubleValue),f=Ce(l.doubleValue);return c===f?od(c)===od(f):isNaN(c)&&isNaN(f)}return!1})(e,t);case 9:return pl(e.arrayValue.values||[],t.arrayValue.values||[],Xi);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},f=l.mapValue.fields||{};if(bb(c)!==bb(f))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(f[d]===void 0||!Xi(c[d],f[d])))return!1;return!0})(e,t);default:return wt(52216,{left:e})}}function hc(e,t){return(e.values||[]).find((n=>Xi(n,t)))!==void 0}function gl(e,t){if(e===t)return 0;const n=Ks(e),r=Ks(t);if(n!==r)return Mt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Mt(e.booleanValue,t.booleanValue);case 2:return(function(l,c){const f=Ce(l.integerValue||l.doubleValue),d=Ce(c.integerValue||c.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1})(e,t);case 3:return Ab(e.timestampValue,t.timestampValue);case 4:return Ab(uc(e),uc(t));case 5:return vy(e.stringValue,t.stringValue);case 6:return(function(l,c){const f=Gs(l),d=Gs(c);return f.compareTo(d)})(e.bytesValue,t.bytesValue);case 7:return(function(l,c){const f=l.split("/"),d=c.split("/");for(let p=0;p<f.length&&p<d.length;p++){const y=Mt(f[p],d[p]);if(y!==0)return y}return Mt(f.length,d.length)})(e.referenceValue,t.referenceValue);case 8:return(function(l,c){const f=Mt(Ce(l.latitude),Ce(c.latitude));return f!==0?f:Mt(Ce(l.longitude),Ce(c.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return Rb(e.arrayValue,t.arrayValue);case 10:return(function(l,c){var f,d,p,y;const _=l.fields||{},E=c.fields||{},A=(f=_[ud])===null||f===void 0?void 0:f.arrayValue,D=(d=E[ud])===null||d===void 0?void 0:d.arrayValue,b=Mt(((p=A?.values)===null||p===void 0?void 0:p.length)||0,((y=D?.values)===null||y===void 0?void 0:y.length)||0);return b!==0?b:Rb(A,D)})(e.mapValue,t.mapValue);case 11:return(function(l,c){if(l===Sf.mapValue&&c===Sf.mapValue)return 0;if(l===Sf.mapValue)return 1;if(c===Sf.mapValue)return-1;const f=l.fields||{},d=Object.keys(f),p=c.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let _=0;_<d.length&&_<y.length;++_){const E=vy(d[_],y[_]);if(E!==0)return E;const A=gl(f[d[_]],p[y[_]]);if(A!==0)return A}return Mt(d.length,y.length)})(e.mapValue,t.mapValue);default:throw wt(23264,{le:n})}}function Ab(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Mt(e,t);const n=qs(e),r=qs(t),a=Mt(n.seconds,r.seconds);return a!==0?a:Mt(n.nanos,r.nanos)}function Rb(e,t){const n=e.values||[],r=t.values||[];for(let a=0;a<n.length&&a<r.length;++a){const l=gl(n[a],r[a]);if(l)return l}return Mt(n.length,r.length)}function yl(e){return _y(e)}function _y(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const r=qs(n);return`time(${r.seconds},${r.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Gs(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return yt.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let r="[",a=!0;for(const l of n.values||[])a?a=!1:r+=",",r+=_y(l);return r+"]"})(e.arrayValue):"mapValue"in e?(function(n){const r=Object.keys(n.fields||{}).sort();let a="{",l=!0;for(const c of r)l?l=!1:a+=",",a+=`${c}:${_y(n.fields[c])}`;return a+"}"})(e.mapValue):wt(61005,{value:e})}function qf(e){switch(Ks(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=zd(e);return t?16+qf(t):16;case 5:return 2*e.stringValue.length;case 6:return Gs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+qf(l)),0)})(e.arrayValue);case 10:case 11:return(function(r){let a=0;return Js(r.fields,((l,c)=>{a+=l.length+qf(c)})),a})(e.mapValue);default:throw wt(13486,{value:e})}}function cd(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Ty(e){return!!e&&"integerValue"in e}function Iv(e){return!!e&&"arrayValue"in e}function Cb(e){return!!e&&"nullValue"in e}function xb(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Gf(e){return!!e&&"mapValue"in e}function lP(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{})[ER])===null||n===void 0?void 0:n.stringValue)===wR}function Wu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Js(e.mapValue.fields,((n,r)=>t.mapValue.fields[n]=Wu(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Wu(e.arrayValue.values[n]);return t}return Object.assign({},e)}function uP(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===oP}class Dn{constructor(t){this.value=t}static empty(){return new Dn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Gf(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Wu(n)}setAll(t){let n=en.emptyPath(),r={},a=[];t.forEach(((c,f)=>{if(!n.isImmediateParentOf(f)){const d=this.getFieldsMap(n);this.applyChanges(d,r,a),r={},a=[],n=f.popLast()}c?r[f.lastSegment()]=Wu(c):a.push(f.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,r,a)}delete(t){const n=this.field(t.popLast());Gf(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Xi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let a=n.mapValue.fields[t.get(r)];Gf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=a),n=a}return n.mapValue.fields}applyChanges(t,n,r){Js(n,((a,l)=>t[a]=l));for(const a of r)delete t[a]}clone(){return new Dn(Wu(this.value))}}function bR(e){const t=[];return Js(e.fields,((n,r)=>{const a=new en([n]);if(Gf(r)){const l=bR(r.mapValue).fields;if(l.length===0)t.push(a);else for(const c of l)t.push(a.child(c))}else t.push(a)})),new Hn(t)}class cn{constructor(t,n,r,a,l,c,f){this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(t){return new cn(t,0,St.min(),St.min(),St.min(),Dn.empty(),0)}static newFoundDocument(t,n,r,a){return new cn(t,1,n,St.min(),r,a,0)}static newNoDocument(t,n){return new cn(t,2,n,St.min(),St.min(),Dn.empty(),0)}static newUnknownDocument(t,n){return new cn(t,3,n,St.min(),St.min(),Dn.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(St.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof cn&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class vl{constructor(t,n){this.position=t,this.inclusive=n}}function Ib(e,t,n){let r=0;for(let a=0;a<e.position.length;a++){const l=t[a],c=e.position[a];if(l.field.isKeyField()?r=yt.comparator(yt.fromName(c.referenceValue),n.key):r=gl(c,n.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function Db(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Xi(e.position[n],t.position[n]))return!1;return!0}class fc{constructor(t,n="asc"){this.field=t,this.dir=n}}function cP(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class SR{}class Ve extends SR{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new fP(t,n,r):n==="array-contains"?new pP(t,r):n==="in"?new gP(t,r):n==="not-in"?new yP(t,r):n==="array-contains-any"?new vP(t,r):new Ve(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new dP(t,r):new mP(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(gl(n,this.value)):n!==null&&Ks(this.value)===Ks(n)&&this.matchesComparison(gl(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return wt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Si extends SR{constructor(t,n){super(),this.filters=t,this.op=n,this.he=null}static create(t,n){return new Si(t,n)}matches(t){return AR(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function AR(e){return e.op==="and"}function RR(e){return hP(e)&&AR(e)}function hP(e){for(const t of e.filters)if(t instanceof Si)return!1;return!0}function Ey(e){if(e instanceof Ve)return e.field.canonicalString()+e.op.toString()+yl(e.value);if(RR(e))return e.filters.map((t=>Ey(t))).join(",");{const t=e.filters.map((n=>Ey(n))).join(",");return`${e.op}(${t})`}}function CR(e,t){return e instanceof Ve?(function(r,a){return a instanceof Ve&&r.op===a.op&&r.field.isEqual(a.field)&&Xi(r.value,a.value)})(e,t):e instanceof Si?(function(r,a){return a instanceof Si&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,c,f)=>l&&CR(c,a.filters[f])),!0):!1})(e,t):void wt(19439)}function xR(e){return e instanceof Ve?(function(n){return`${n.field.canonicalString()} ${n.op} ${yl(n.value)}`})(e):e instanceof Si?(function(n){return n.op.toString()+" {"+n.getFilters().map(xR).join(" ,")+"}"})(e):"Filter"}class fP extends Ve{constructor(t,n,r){super(t,n,r),this.key=yt.fromName(r.referenceValue)}matches(t){const n=yt.comparator(t.key,this.key);return this.matchesComparison(n)}}class dP extends Ve{constructor(t,n){super(t,"in",n),this.keys=IR("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class mP extends Ve{constructor(t,n){super(t,"not-in",n),this.keys=IR("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function IR(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>yt.fromName(r.referenceValue)))}class pP extends Ve{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Iv(n)&&hc(n.arrayValue,this.value)}}class gP extends Ve{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&hc(this.value.arrayValue,n)}}class yP extends Ve{constructor(t,n){super(t,"not-in",n)}matches(t){if(hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!hc(this.value.arrayValue,n)}}class vP extends Ve{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Iv(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>hc(this.value.arrayValue,r)))}}class _P{constructor(t,n=null,r=[],a=[],l=null,c=null,f=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=c,this.endAt=f,this.Pe=null}}function Nb(e,t=null,n=[],r=[],a=null,l=null,c=null){return new _P(e,t,n,r,a,l,c)}function Dv(e){const t=Rt(e);if(t.Pe===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>Ey(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),jd(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>yl(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>yl(r))).join(",")),t.Pe=n}return t.Pe}function Nv(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!cP(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!CR(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Db(e.startAt,t.startAt)&&Db(e.endAt,t.endAt)}function wy(e){return yt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}class io{constructor(t,n=null,r=[],a=[],l=null,c="F",f=null,d=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function TP(e,t,n,r,a,l,c,f){return new io(e,t,n,r,a,l,c,f)}function Fd(e){return new io(e)}function Mb(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Mv(e){return e.collectionGroup!==null}function fl(e){const t=Rt(e);if(t.Te===null){t.Te=[];const n=new Set;for(const l of t.explicitOrderBy)t.Te.push(l),n.add(l.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Ue(en.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(t).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||t.Te.push(new fc(l,r))})),n.has(en.keyField().canonicalString())||t.Te.push(new fc(en.keyField(),r))}return t.Te}function Hi(e){const t=Rt(e);return t.Ie||(t.Ie=EP(t,fl(e))),t.Ie}function EP(e,t){if(e.limitType==="F")return Nb(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new fc(a.field,l)}));const n=e.endAt?new vl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new vl(e.startAt.position,e.startAt.inclusive):null;return Nb(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function by(e,t){const n=e.filters.concat([t]);return new io(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function hd(e,t,n){return new io(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Hd(e,t){return Nv(Hi(e),Hi(t))&&e.limitType===t.limitType}function DR(e){return`${Dv(Hi(e))}|lt:${e.limitType}`}function tl(e){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((a=>xR(a))).join(", ")}]`),jd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((a=>yl(a))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((a=>yl(a))).join(",")),`Target(${r})`})(Hi(e))}; limitType=${e.limitType})`}function qd(e,t){return t.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):yt.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(e,t)&&(function(r,a){for(const l of fl(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(e,t)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(e,t)&&(function(r,a){return!(r.startAt&&!(function(c,f,d){const p=Ib(c,f,d);return c.inclusive?p<=0:p<0})(r.startAt,fl(r),a)||r.endAt&&!(function(c,f,d){const p=Ib(c,f,d);return c.inclusive?p>=0:p>0})(r.endAt,fl(r),a))})(e,t)}function wP(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function NR(e){return(t,n)=>{let r=!1;for(const a of fl(e)){const l=bP(a,t,n);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function bP(e,t,n){const r=e.field.isKeyField()?yt.comparator(t.key,n.key):(function(l,c,f){const d=c.data.field(l),p=f.data.field(l);return d!==null&&p!==null?gl(d,p):wt(42886)})(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return wt(19790,{direction:e.dir})}}class ro{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,t))return l}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),a=this.inner[r];if(a===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],t))return void(a[l]=[t,n]);a.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],t))return r.length===1?delete this.inner[n]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Js(this.inner,((n,r)=>{for(const[a,l]of r)t(a,l)}))}isEmpty(){return pR(this.inner)}size(){return this.innerSize}}const SP=new me(yt.comparator);function jr(){return SP}const MR=new me(yt.comparator);function Fu(...e){let t=MR;for(const n of e)t=t.insert(n.key,n);return t}function OR(e){let t=MR;return e.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function Ua(){return Zu()}function VR(){return Zu()}function Zu(){return new ro((e=>e.toString()),((e,t)=>e.isEqual(t)))}const AP=new me(yt.comparator),RP=new Ue(yt.comparator);function jt(...e){let t=RP;for(const n of e)t=t.add(n);return t}const CP=new Ue(Mt);function xP(){return CP}function Ov(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:od(t)?"-0":t}}function kR(e){return{integerValue:""+e}}function IP(e,t){return nP(t)?kR(t):Ov(e,t)}class Gd{constructor(){this._=void 0}}function DP(e,t,n){return e instanceof dc?(function(a,l){const c={fields:{[vR]:{stringValue:yR},[TR]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Bd(l)&&(l=zd(l)),l&&(c.fields[_R]=l),{mapValue:c}})(n,t):e instanceof mc?LR(e,t):e instanceof pc?UR(e,t):(function(a,l){const c=PR(a,l),f=Ob(c)+Ob(a.Ee);return Ty(c)&&Ty(a.Ee)?kR(f):Ov(a.serializer,f)})(e,t)}function NP(e,t,n){return e instanceof mc?LR(e,t):e instanceof pc?UR(e,t):n}function PR(e,t){return e instanceof fd?(function(r){return Ty(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(t)?t:{integerValue:0}:null}class dc extends Gd{}class mc extends Gd{constructor(t){super(),this.elements=t}}function LR(e,t){const n=jR(t);for(const r of e.elements)n.some((a=>Xi(a,r)))||n.push(r);return{arrayValue:{values:n}}}class pc extends Gd{constructor(t){super(),this.elements=t}}function UR(e,t){let n=jR(t);for(const r of e.elements)n=n.filter((a=>!Xi(a,r)));return{arrayValue:{values:n}}}class fd extends Gd{constructor(t,n){super(),this.serializer=t,this.Ee=n}}function Ob(e){return Ce(e.integerValue||e.doubleValue)}function jR(e){return Iv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class MP{constructor(t,n){this.field=t,this.transform=n}}function OP(e,t){return e.field.isEqual(t.field)&&(function(r,a){return r instanceof mc&&a instanceof mc||r instanceof pc&&a instanceof pc?pl(r.elements,a.elements,Xi):r instanceof fd&&a instanceof fd?Xi(r.Ee,a.Ee):r instanceof dc&&a instanceof dc})(e.transform,t.transform)}class VP{constructor(t,n){this.version=t,this.transformResults=n}}class ci{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ci}static exists(t){return new ci(void 0,t)}static updateTime(t){return new ci(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Kf(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Kd{}function BR(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Vv(e.key,ci.none()):new Mc(e.key,e.data,ci.none());{const n=e.data,r=Dn.empty();let a=new Ue(en.comparator);for(let l of t.fields)if(!a.has(l)){let c=n.field(l);c===null&&l.length>1&&(l=l.popLast(),c=n.field(l)),c===null?r.delete(l):r.set(l,c),a=a.add(l)}return new ta(e.key,r,new Hn(a.toArray()),ci.none())}}function kP(e,t,n){e instanceof Mc?(function(a,l,c){const f=a.value.clone(),d=kb(a.fieldTransforms,l,c.transformResults);f.setAll(d),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(e,t,n):e instanceof ta?(function(a,l,c){if(!Kf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const f=kb(a.fieldTransforms,l,c.transformResults),d=l.data;d.setAll(zR(a)),d.setAll(f),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(e,t,n):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,n)}function Ju(e,t,n,r){return e instanceof Mc?(function(l,c,f,d){if(!Kf(l.precondition,c))return f;const p=l.value.clone(),y=Pb(l.fieldTransforms,d,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(e,t,n,r):e instanceof ta?(function(l,c,f,d){if(!Kf(l.precondition,c))return f;const p=Pb(l.fieldTransforms,d,c),y=c.data;return y.setAll(zR(l)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(e,t,n,r):(function(l,c,f){return Kf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(e,t,n)}function PP(e,t){let n=null;for(const r of e.fieldTransforms){const a=t.data.field(r.field),l=PR(r.transform,a||null);l!=null&&(n===null&&(n=Dn.empty()),n.set(r.field,l))}return n||null}function Vb(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&pl(r,a,((l,c)=>OP(l,c)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Mc extends Kd{constructor(t,n,r,a=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ta extends Kd{constructor(t,n,r,a,l=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function zR(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function kb(e,t,n){const r=new Map;$t(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let a=0;a<n.length;a++){const l=e[a],c=l.transform,f=t.data.field(l.field);r.set(l.field,NP(c,f,n[a]))}return r}function Pb(e,t,n){const r=new Map;for(const a of e){const l=a.transform,c=n.data.field(a.field);r.set(a.field,DP(l,c,t))}return r}class Vv extends Kd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LP extends Kd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class UP{constructor(t,n,r,a){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(t.key)&&kP(l,t,r[a])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Ju(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Ju(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=VR();return this.mutations.forEach((a=>{const l=t.get(a.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=n.has(a.key)?null:f;const d=BR(c,f);d!==null&&r.set(a.key,d),c.isValidDocument()||c.convertToNoDocument(St.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),jt())}isEqual(t){return this.batchId===t.batchId&&pl(this.mutations,t.mutations,((n,r)=>Vb(n,r)))&&pl(this.baseMutations,t.baseMutations,((n,r)=>Vb(n,r)))}}class kv{constructor(t,n,r,a){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}static from(t,n,r){$t(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let a=(function(){return AP})();const l=t.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,r[c].version);return new kv(t,n,r,a)}}class jP{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class BP{constructor(t,n){this.count=t,this.unchangedNames=n}}var Oe,zt;function zP(e){switch(e){case nt.OK:return wt(64938);case nt.CANCELLED:case nt.UNKNOWN:case nt.DEADLINE_EXCEEDED:case nt.RESOURCE_EXHAUSTED:case nt.INTERNAL:case nt.UNAVAILABLE:case nt.UNAUTHENTICATED:return!1;case nt.INVALID_ARGUMENT:case nt.NOT_FOUND:case nt.ALREADY_EXISTS:case nt.PERMISSION_DENIED:case nt.FAILED_PRECONDITION:case nt.ABORTED:case nt.OUT_OF_RANGE:case nt.UNIMPLEMENTED:case nt.DATA_LOSS:return!0;default:return wt(15467,{code:e})}}function FR(e){if(e===void 0)return Ur("GRPC error has no .code"),nt.UNKNOWN;switch(e){case Oe.OK:return nt.OK;case Oe.CANCELLED:return nt.CANCELLED;case Oe.UNKNOWN:return nt.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return nt.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return nt.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return nt.INTERNAL;case Oe.UNAVAILABLE:return nt.UNAVAILABLE;case Oe.UNAUTHENTICATED:return nt.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return nt.INVALID_ARGUMENT;case Oe.NOT_FOUND:return nt.NOT_FOUND;case Oe.ALREADY_EXISTS:return nt.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return nt.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return nt.FAILED_PRECONDITION;case Oe.ABORTED:return nt.ABORTED;case Oe.OUT_OF_RANGE:return nt.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return nt.UNIMPLEMENTED;case Oe.DATA_LOSS:return nt.DATA_LOSS;default:return wt(39323,{code:e})}}(zt=Oe||(Oe={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";const FP=new Bs([4294967295,4294967295],0);function Lb(e){const t=hR().encode(e),n=new iR;return n.update(t),new Uint8Array(n.digest())}function Ub(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),l=t.getUint32(12,!0);return[new Bs([n,r],0),new Bs([a,l],0)]}class Pv{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hu(`Invalid padding: ${n}`);if(r<0)throw new Hu(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Hu(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Hu(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*t.length-n,this.ge=Bs.fromNumber(this.fe)}pe(t,n,r){let a=t.add(n.multiply(Bs.fromNumber(r)));return a.compare(FP)===1&&(a=new Bs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const n=Lb(t),[r,a]=Ub(n);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,a,l);if(!this.ye(c))return!1}return!0}static create(t,n,r){const a=t%8==0?0:8-t%8,l=new Uint8Array(Math.ceil(t/8)),c=new Pv(l,a,n);return r.forEach((f=>c.insert(f))),c}insert(t){if(this.fe===0)return;const n=Lb(t),[r,a]=Ub(n);for(let l=0;l<this.hashCount;l++){const c=this.pe(r,a,l);this.we(c)}}we(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class $d{constructor(t,n,r,a,l){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const a=new Map;return a.set(t,Oc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new $d(St.min(),a,new me(Mt),jr(),jt())}}class Oc{constructor(t,n,r,a,l){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Oc(r,n,jt(),jt(),jt())}}class $f{constructor(t,n,r,a){this.Se=t,this.removedTargetIds=n,this.key=r,this.be=a}}class HR{constructor(t,n){this.targetId=t,this.De=n}}class qR{constructor(t,n,r=nn.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a}}class jb{constructor(){this.ve=0,this.Ce=Bb(),this.Fe=nn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=jt(),n=jt(),r=jt();return this.Ce.forEach(((a,l)=>{switch(l){case 0:t=t.add(a);break;case 2:n=n.add(a);break;case 1:r=r.add(a);break;default:wt(38017,{changeType:l})}})),new Oc(this.Fe,this.Me,t,n,r)}ke(){this.xe=!1,this.Ce=Bb()}qe(t,n){this.xe=!0,this.Ce=this.Ce.insert(t,n)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,$t(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class HP{constructor(t){this.We=t,this.Ge=new Map,this.ze=jr(),this.je=Af(),this.Je=Af(),this.He=new me(Mt)}Ye(t){for(const n of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(n,t.be):this.Xe(n,t.key,t.be);for(const n of t.removedTargetIds)this.Xe(n,t.key,t.be)}et(t){this.forEachTarget(t,(n=>{const r=this.tt(n);switch(t.state){case 0:this.nt(n)&&r.Be(t.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(t.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(t.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(t.resumeToken));break;default:wt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Ge.forEach(((r,a)=>{this.nt(a)&&n(a)}))}it(t){const n=t.targetId,r=t.De.count,a=this.st(n);if(a){const l=a.target;if(wy(l))if(r===0){const c=new yt(l.path);this.Xe(n,c,cn.newNoDocument(c,St.min()))}else $t(r===1,20013,{expectedCount:r});else{const c=this.ot(n);if(c!==r){const f=this._t(t),d=f?this.ut(f,t,c):1;if(d!==0){this.rt(n);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,p)}}}}}_t(t){const n=t.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=n;let c,f;try{c=Gs(r).toUint8Array()}catch(d){if(d instanceof gR)return Fs("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new Pv(c,a,l)}catch(d){return Fs(d instanceof Hu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.fe===0?null:f}ut(t,n,r){return n.De.count===r-this.ht(t,n.targetId)?0:2}ht(t,n){const r=this.We.getRemoteKeysForTarget(n);let a=0;return r.forEach((l=>{const c=this.We.lt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;t.mightContain(f)||(this.Xe(n,l,null),a++)})),a}Pt(t){const n=new Map;this.Ge.forEach(((l,c)=>{const f=this.st(c);if(f){if(l.current&&wy(f.target)){const d=new yt(f.target.path);this.Tt(d).has(c)||this.It(c,d)||this.Xe(c,d,cn.newNoDocument(d,t))}l.Ne&&(n.set(c,l.Le()),l.ke())}}));let r=jt();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((d=>{const p=this.st(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(l))})),this.ze.forEach(((l,c)=>c.setReadTime(t)));const a=new $d(t,n,this.He,this.ze,r);return this.ze=jr(),this.je=Af(),this.Je=Af(),this.He=new me(Mt),a}Ze(t,n){if(!this.nt(t))return;const r=this.It(t,n.key)?2:0;this.tt(t).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(t)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(t))}Xe(t,n,r){if(!this.nt(t))return;const a=this.tt(t);this.It(t,n)?a.qe(n,1):a.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(t)),this.Je=this.Je.insert(n,this.dt(n).add(t)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(t){this.Ge.delete(t)}ot(t){const n=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let n=this.Ge.get(t);return n||(n=new jb,this.Ge.set(t,n)),n}dt(t){let n=this.Je.get(t);return n||(n=new Ue(Mt),this.Je=this.Je.insert(t,n)),n}Tt(t){let n=this.je.get(t);return n||(n=new Ue(Mt),this.je=this.je.insert(t,n)),n}nt(t){const n=this.st(t)!==null;return n||dt("WatchChangeAggregator","Detected inactive target",t),n}st(t){const n=this.Ge.get(t);return n&&n.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new jb),this.We.getRemoteKeysForTarget(t).forEach((n=>{this.Xe(t,n,null)}))}It(t,n){return this.We.getRemoteKeysForTarget(t).has(n)}}function Af(){return new me(yt.comparator)}function Bb(){return new me(yt.comparator)}const qP={asc:"ASCENDING",desc:"DESCENDING"},GP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KP={and:"AND",or:"OR"};class $P{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Sy(e,t){return e.useProto3Json||jd(t)?t:{value:t}}function dd(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function GR(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function YP(e,t){return dd(e,t.toTimestamp())}function qi(e){return $t(!!e,49232),St.fromTimestamp((function(n){const r=qs(n);return new se(r.seconds,r.nanos)})(e))}function Lv(e,t){return Ay(e,t).canonicalString()}function Ay(e,t){const n=(function(a){return new ee(["projects",a.projectId,"databases",a.database])})(e).child("documents");return t===void 0?n:n.child(t)}function KR(e){const t=ee.fromString(e);return $t(WR(t),10190,{key:t.toString()}),t}function Ry(e,t){return Lv(e.databaseId,t.path)}function Vg(e,t){const n=KR(t);if(n.get(1)!==e.databaseId.projectId)throw new ht(nt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ht(nt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new yt(YR(n))}function $R(e,t){return Lv(e.databaseId,t)}function QP(e){const t=KR(e);return t.length===4?ee.emptyPath():YR(t)}function Cy(e){return new ee(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function YR(e){return $t(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function zb(e,t,n){return{name:Ry(e,t),fields:n.value.mapValue.fields}}function XP(e,t){let n;if("targetChange"in t){t.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:wt(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],l=(function(p,y){return p.useProto3Json?($t(y===void 0||typeof y=="string",58123),nn.fromBase64String(y||"")):($t(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),nn.fromUint8Array(y||new Uint8Array))})(e,t.targetChange.resumeToken),c=t.targetChange.cause,f=c&&(function(p){const y=p.code===void 0?nt.UNKNOWN:FR(p.code);return new ht(y,p.message||"")})(c);n=new qR(r,a,l,f||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=Vg(e,r.document.name),l=qi(r.document.updateTime),c=r.document.createTime?qi(r.document.createTime):St.min(),f=new Dn({mapValue:{fields:r.document.fields}}),d=cn.newFoundDocument(a,l,c,f),p=r.targetIds||[],y=r.removedTargetIds||[];n=new $f(p,y,d.key,d)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=Vg(e,r.document),l=r.readTime?qi(r.readTime):St.min(),c=cn.newNoDocument(a,l),f=r.removedTargetIds||[];n=new $f([],f,c.key,c)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=Vg(e,r.document),l=r.removedTargetIds||[];n=new $f([],l,a,null)}else{if(!("filter"in t))return wt(11601,{At:t});{t.filter;const r=t.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,c=new BP(a,l),f=r.targetId;n=new HR(f,c)}}return n}function WP(e,t){let n;if(t instanceof Mc)n={update:zb(e,t.key,t.value)};else if(t instanceof Vv)n={delete:Ry(e,t.key)};else if(t instanceof ta)n={update:zb(e,t.key,t.data),updateMask:aL(t.fieldMask)};else{if(!(t instanceof LP))return wt(16599,{Rt:t.type});n={verify:Ry(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(l,c){const f=c.transform;if(f instanceof dc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof mc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof pc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof fd)return{fieldPath:c.field.canonicalString(),increment:f.Ee};throw wt(20930,{transform:c.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:YP(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:wt(27497)})(e,t.precondition)),n}function ZP(e,t){return e&&e.length>0?($t(t!==void 0,14353),e.map((n=>(function(a,l){let c=a.updateTime?qi(a.updateTime):qi(l);return c.isEqual(St.min())&&(c=qi(l)),new VP(c,a.transformResults||[])})(n,t)))):[]}function JP(e,t){return{documents:[$R(e,t.path)]}}function tL(e,t){const n={structuredQuery:{}},r=t.path;let a;t.collectionGroup!==null?(a=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$R(e,a);const l=(function(p){if(p.length!==0)return XR(Si.create(p,"and"))})(t.filters);l&&(n.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((y=>(function(E){return{field:el(E.field),direction:iL(E.dir)}})(y)))})(t.orderBy);c&&(n.structuredQuery.orderBy=c);const f=Sy(e,t.limit);return f!==null&&(n.structuredQuery.limit=f),t.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{Vt:n,parent:a}}function eL(e){let t=QP(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){$t(r===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let l=[];n.where&&(l=(function(_){const E=QR(_);return E instanceof Si&&RR(E)?E.getFilters():[E]})(n.where));let c=[];n.orderBy&&(c=(function(_){return _.map((E=>(function(D){return new fc(nl(D.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(E)))})(n.orderBy));let f=null;n.limit&&(f=(function(_){let E;return E=typeof _=="object"?_.value:_,jd(E)?null:E})(n.limit));let d=null;n.startAt&&(d=(function(_){const E=!!_.before,A=_.values||[];return new vl(A,E)})(n.startAt));let p=null;return n.endAt&&(p=(function(_){const E=!_.before,A=_.values||[];return new vl(A,E)})(n.endAt)),TP(t,a,c,l,f,"F",d,p)}function nL(e,t){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt(28987,{purpose:a})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function QR(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=nl(n.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=nl(n.unaryFilter.field);return Ve.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=nl(n.unaryFilter.field);return Ve.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=nl(n.unaryFilter.field);return Ve.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return wt(61313);default:return wt(60726)}})(e):e.fieldFilter!==void 0?(function(n){return Ve.create(nl(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return wt(58110);default:return wt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return Si.create(n.compositeFilter.filters.map((r=>QR(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return wt(1026)}})(n.compositeFilter.op))})(e):wt(30097,{filter:e})}function iL(e){return qP[e]}function rL(e){return GP[e]}function sL(e){return KP[e]}function el(e){return{fieldPath:e.canonicalString()}}function nl(e){return en.fromServerFormat(e.fieldPath)}function XR(e){return e instanceof Ve?(function(n){if(n.op==="=="){if(xb(n.value))return{unaryFilter:{field:el(n.field),op:"IS_NAN"}};if(Cb(n.value))return{unaryFilter:{field:el(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xb(n.value))return{unaryFilter:{field:el(n.field),op:"IS_NOT_NAN"}};if(Cb(n.value))return{unaryFilter:{field:el(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:el(n.field),op:rL(n.op),value:n.value}}})(e):e instanceof Si?(function(n){const r=n.getFilters().map((a=>XR(a)));return r.length===1?r[0]:{compositeFilter:{op:sL(n.op),filters:r}}})(e):wt(54877,{filter:e})}function aL(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function WR(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}class Us{constructor(t,n,r,a,l=St.min(),c=St.min(),f=nn.EMPTY_BYTE_STRING,d=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(t){return new Us(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}class oL{constructor(t){this.gt=t}}function lL(e){const t=eL({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?hd(t,t.limit,"L"):t}class uL{constructor(){this.Dn=new cL}addToCollectionParentIndex(t,n){return this.Dn.add(n),at.resolve()}getCollectionParents(t,n){return at.resolve(this.Dn.getEntries(n))}addFieldIndex(t,n){return at.resolve()}deleteFieldIndex(t,n){return at.resolve()}deleteAllFieldIndexes(t){return at.resolve()}createTargetIndexes(t,n){return at.resolve()}getDocumentsMatchingTarget(t,n){return at.resolve(null)}getIndexType(t,n){return at.resolve(0)}getFieldIndexes(t,n){return at.resolve([])}getNextCollectionGroupToUpdate(t){return at.resolve(null)}getMinOffset(t,n){return at.resolve(Hs.min())}getMinOffsetFromCollectionGroup(t,n){return at.resolve(Hs.min())}updateCollectionGroup(t,n,r){return at.resolve()}updateIndexEntries(t,n){return at.resolve()}}class cL{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n]||new Ue(ee.comparator),l=!a.has(r);return this.index[n]=a.add(r),l}has(t){const n=t.lastSegment(),r=t.popLast(),a=this.index[n];return a&&a.has(r)}getEntries(t){return(this.index[t]||new Ue(ee.comparator)).toArray()}}const Fb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZR=41943040;class xn{static withCacheSize(t){return new xn(t,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(ZR,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);class _l{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new _l(0)}static ur(){return new _l(-1)}}const Hb="LruGarbageCollector",hL=1048576;function qb([e,t],[n,r]){const a=Mt(e,n);return a===0?Mt(t,r):a}class fL{constructor(t){this.Tr=t,this.buffer=new Ue(qb),this.Ir=0}dr(){return++this.Ir}Er(t){const n=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();qb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dL{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){dt(Hb,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Dl(n)?dt(Hb,"Ignoring IndexedDB error during garbage collection: ",n):await Il(n)}await this.Rr(3e5)}))}}class mL{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.mr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return at.resolve(Ud.ue);const r=new fL(n);return this.Vr.forEachTarget(t,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.gr(t,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.Vr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(dt("LruGarbageCollector","Garbage collection skipped; disabled"),at.resolve(Fb)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(dt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fb):this.pr(t,n)))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,n){let r,a,l,c,f,d,p;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(dt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,c=Date.now(),this.nthSequenceNumber(t,a)))).next((_=>(r=_,f=Date.now(),this.removeTargets(t,r,n)))).next((_=>(l=_,d=Date.now(),this.removeOrphanedDocuments(t,r)))).next((_=>(p=Date.now(),Jo()<=Ut.DEBUG&&dt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(f-c)+`ms
	Removed ${l} targets in `+(d-f)+`ms
	Removed ${_} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),at.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function pL(e,t){return new mL(e,t)}class gL{constructor(){this.changes=new ro((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,cn.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?at.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class yL{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}class vL{constructor(t,n,r,a){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=a}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((a=>(r=a,this.remoteDocumentCache.getEntry(t,n)))).next((a=>(r!==null&&Ju(r.mutation,a,Hn.empty(),se.now()),a)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,jt()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=jt()){const a=Ua();return this.populateOverlays(t,a,n).next((()=>this.computeViews(t,n,a,r).next((l=>{let c=Fu();return l.forEach(((f,d)=>{c=c.insert(f,d.overlayedDocument)})),c}))))}getOverlayedDocuments(t,n){const r=Ua();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,jt())))}populateOverlays(t,n,r){const a=[];return r.forEach((l=>{n.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(t,a).next((l=>{l.forEach(((c,f)=>{n.set(c,f)}))}))}computeViews(t,n,r,a){let l=jr();const c=Zu(),f=(function(){return Zu()})();return n.forEach(((d,p)=>{const y=r.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof ta)?l=l.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),Ju(y.mutation,p,y.mutation.getFieldMask(),se.now())):c.set(p.key,Hn.empty())})),this.recalculateAndSaveOverlays(t,l).next((d=>(d.forEach(((p,y)=>c.set(p,y))),n.forEach(((p,y)=>{var _;return f.set(p,new yL(y,(_=c.get(p))!==null&&_!==void 0?_:null))})),f)))}recalculateAndSaveOverlays(t,n){const r=Zu();let a=new me(((c,f)=>c-f)),l=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((c=>{for(const f of c)f.keys().forEach((d=>{const p=n.get(d);if(p===null)return;let y=r.get(d)||Hn.empty();y=f.applyToLocalView(p,y),r.set(d,y);const _=(a.get(f.batchId)||jt()).add(d);a=a.insert(f.batchId,_)}))})).next((()=>{const c=[],f=a.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),p=d.key,y=d.value,_=VR();y.forEach((E=>{if(!l.has(E)){const A=BR(n.get(E),r.get(E));A!==null&&_.set(E,A),l=l.add(E)}})),c.push(this.documentOverlayCache.saveOverlays(t,p,_))}return at.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,a){return(function(c){return yt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Mv(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,a):this.getDocumentsMatchingCollectionQuery(t,n,r,a)}getNextDocuments(t,n,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,a-l.size):at.resolve(Ua());let f=lc,d=l;return c.next((p=>at.forEach(p,((y,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),l.get(y)?at.resolve():this.remoteDocumentCache.getEntry(t,y).next((E=>{d=d.insert(y,E)}))))).next((()=>this.populateOverlays(t,p,l))).next((()=>this.computeViews(t,d,p,jt()))).next((y=>({batchId:f,changes:OR(y)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new yt(n)).next((r=>{let a=Fu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,a){const l=n.collectionGroup;let c=Fu();return this.indexManager.getCollectionParents(t,l).next((f=>at.forEach(f,(d=>{const p=(function(_,E){return new io(E,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(n,d.child(l));return this.getDocumentsMatchingCollectionQuery(t,p,r,a).next((y=>{y.forEach(((_,E)=>{c=c.insert(_,E)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,n,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,l,a)))).next((c=>{l.forEach(((d,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,cn.newInvalidDocument(y)))}));let f=Fu();return c.forEach(((d,p)=>{const y=l.get(d);y!==void 0&&Ju(y.mutation,p,Hn.empty(),se.now()),qd(n,p)&&(f=f.insert(d,p))})),f}))}}class _L{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,n){return at.resolve(this.Br.get(n))}saveBundleMetadata(t,n){return this.Br.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:qi(a.createTime)}})(n)),at.resolve()}getNamedQuery(t,n){return at.resolve(this.Lr.get(n))}saveNamedQuery(t,n){return this.Lr.set(n.name,(function(a){return{name:a.name,query:lL(a.bundledQuery),readTime:qi(a.readTime)}})(n)),at.resolve()}}class TL{constructor(){this.overlays=new me(yt.comparator),this.kr=new Map}getOverlay(t,n){return at.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Ua();return at.forEach(n,(a=>this.getOverlay(t,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((a,l)=>{this.wt(t,n,l)})),at.resolve()}removeOverlaysForBatchId(t,n,r){const a=this.kr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(r)),at.resolve()}getOverlaysForCollection(t,n,r){const a=Ua(),l=n.length+1,c=new yt(n.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const d=f.getNext().value,p=d.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&d.largestBatchId>r&&a.set(d.getKey(),d)}return at.resolve(a)}getOverlaysForCollectionGroup(t,n,r,a){let l=new me(((p,y)=>p-y));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let y=l.get(p.largestBatchId);y===null&&(y=Ua(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const f=Ua(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,y)=>f.set(p,y))),!(f.size()>=a)););return at.resolve(f)}wt(t,n,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.kr.get(a.largestBatchId).delete(r.key);this.kr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new jP(n,r));let l=this.kr.get(n);l===void 0&&(l=jt(),this.kr.set(n,l)),this.kr.set(n,l.add(r.key))}}class EL{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(t){return at.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,at.resolve()}}class Uv{constructor(){this.qr=new Ue(qe.Qr),this.$r=new Ue(qe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,n){const r=new qe(t,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Wr(new qe(t,n))}Gr(t,n){t.forEach((r=>this.removeReference(r,n)))}zr(t){const n=new yt(new ee([])),r=new qe(n,t),a=new qe(n,t+1),l=[];return this.$r.forEachInRange([r,a],(c=>{this.Wr(c),l.push(c.key)})),l}jr(){this.qr.forEach((t=>this.Wr(t)))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const n=new yt(new ee([])),r=new qe(n,t),a=new qe(n,t+1);let l=jt();return this.$r.forEachInRange([r,a],(c=>{l=l.add(c.key)})),l}containsKey(t){const n=new qe(t,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class qe{constructor(t,n){this.key=t,this.Hr=n}static Qr(t,n){return yt.comparator(t.key,n.key)||Mt(t.Hr,n.Hr)}static Ur(t,n){return Mt(t.Hr,n.Hr)||yt.comparator(t.key,n.key)}}class wL{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ue(qe.Qr)}checkEmpty(t){return at.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,a){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new UP(l,n,r,a);this.mutationQueue.push(c);for(const f of a)this.Yr=this.Yr.add(new qe(f.key,l)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast());return at.resolve(c)}lookupMutationBatch(t,n){return at.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,a=this.Xr(r),l=a<0?0:a;return at.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(this.mutationQueue.length===0?xv:this.er-1)}getAllMutationBatches(t){return at.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new qe(n,0),a=new qe(n,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([r,a],(c=>{const f=this.Zr(c.Hr);l.push(f)})),at.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ue(Mt);return n.forEach((a=>{const l=new qe(a,0),c=new qe(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],(f=>{r=r.add(f.Hr)}))})),at.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,a=r.length+1;let l=r;yt.isDocumentKey(l)||(l=l.child(""));const c=new qe(new yt(l),0);let f=new Ue(Mt);return this.Yr.forEachWhile((d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(f=f.add(d.Hr)),!0)}),c),at.resolve(this.ei(f))}ei(t){const n=[];return t.forEach((r=>{const a=this.Zr(r);a!==null&&n.push(a)})),n}removeMutationBatch(t,n){$t(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return at.forEach(n.mutations,(a=>{const l=new qe(a.key,n.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)})).next((()=>{this.Yr=r}))}rr(t){}containsKey(t,n){const r=new qe(n,0),a=this.Yr.firstAfterOrEqual(r);return at.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,at.resolve()}ti(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class bL{constructor(t){this.ni=t,this.docs=(function(){return new me(yt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,a=this.docs.get(r),l=a?a.size:0,c=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return at.resolve(r?r.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(t,n){let r=jr();return n.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():cn.newInvalidDocument(a))})),at.resolve(r)}getDocumentsMatchingQuery(t,n,r,a){let l=jr();const c=n.path,f=new yt(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Zk(Wk(y),r)<=0||(a.has(y.key)||qd(n,y))&&(l=l.insert(y.key,y.mutableCopy()))}return at.resolve(l)}getAllFromCollectionGroup(t,n,r,a){wt(9500)}ri(t,n){return at.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new SL(this)}getSize(t){return at.resolve(this.size)}}class SL extends gL{constructor(t){super(),this.Or=t}applyChanges(t){const n=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?n.push(this.Or.addEntry(t,a)):this.Or.removeEntry(r)})),at.waitFor(n)}getFromCache(t,n){return this.Or.getEntry(t,n)}getAllFromCache(t,n){return this.Or.getEntries(t,n)}}class AL{constructor(t){this.persistence=t,this.ii=new ro((n=>Dv(n)),Nv),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.si=0,this.oi=new Uv,this.targetCount=0,this._i=_l.ar()}forEachTarget(t,n){return this.ii.forEach(((r,a)=>n(a))),at.resolve()}getLastRemoteSnapshotVersion(t){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return at.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),at.resolve()}hr(t){this.ii.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this._i=new _l(n),this.highestTargetId=n),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,n){return this.hr(n),this.targetCount+=1,at.resolve()}updateTargetData(t,n){return this.hr(n),at.resolve()}removeTargetData(t,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,at.resolve()}removeTargets(t,n,r){let a=0;const l=[];return this.ii.forEach(((c,f)=>{f.sequenceNumber<=n&&r.get(f.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(t,f.targetId)),a++)})),at.waitFor(l).next((()=>a))}getTargetCount(t){return at.resolve(this.targetCount)}getTargetData(t,n){const r=this.ii.get(n)||null;return at.resolve(r)}addMatchingKeys(t,n,r){return this.oi.Kr(n,r),at.resolve()}removeMatchingKeys(t,n,r){this.oi.Gr(n,r);const a=this.persistence.referenceDelegate,l=[];return a&&n.forEach((c=>{l.push(a.markPotentiallyOrphaned(t,c))})),at.waitFor(l)}removeMatchingKeysForTargetId(t,n){return this.oi.zr(n),at.resolve()}getMatchingKeysForTargetId(t,n){const r=this.oi.Jr(n);return at.resolve(r)}containsKey(t,n){return at.resolve(this.oi.containsKey(n))}}class JR{constructor(t,n){this.ai={},this.overlays={},this.ui=new Ud(0),this.ci=!1,this.ci=!0,this.li=new EL,this.referenceDelegate=t(this),this.hi=new AL(this),this.indexManager=new uL,this.remoteDocumentCache=(function(a){return new bL(a)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new oL(n),this.Ti=new _L(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new TL,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ai[t.toKey()];return r||(r=new wL(n,this.referenceDelegate),this.ai[t.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,n,r){dt("MemoryPersistence","Starting transaction:",t);const a=new RL(this.ui.next());return this.referenceDelegate.Ii(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(t,n){return at.or(Object.values(this.ai).map((r=>()=>r.containsKey(t,n))))}}class RL extends tP{constructor(t){super(),this.currentSequenceNumber=t}}class jv{constructor(t){this.persistence=t,this.Ai=new Uv,this.Ri=null}static Vi(t){return new jv(t)}get mi(){if(this.Ri)return this.Ri;throw wt(60996)}addReference(t,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),at.resolve()}removeReference(t,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),at.resolve()}markPotentiallyOrphaned(t,n){return this.mi.add(n.toString()),at.resolve()}removeTarget(t,n){this.Ai.zr(n.targetId).forEach((a=>this.mi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((a=>{a.forEach((l=>this.mi.add(l.toString())))})).next((()=>r.removeTargetData(t,n)))}Ii(){this.Ri=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.mi,(r=>{const a=yt.fromPath(r);return this.fi(t,a).next((l=>{l||n.removeEntry(a,St.min())}))})).next((()=>(this.Ri=null,n.apply(t))))}updateLimboDocument(t,n){return this.fi(t,n).next((r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(t){return 0}fi(t,n){return at.or([()=>at.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class md{constructor(t,n){this.persistence=t,this.gi=new ro((r=>iP(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=pL(this,n)}static Vi(t,n){return new md(t,n)}Ii(){}di(t){return at.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}mr(t){const n=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((a=>r+a))))}yr(t){let n=0;return this.gr(t,(r=>{n++})).next((()=>n))}gr(t,n){return at.forEach(this.gi,((r,a)=>this.Sr(t,r,a).next((l=>l?at.resolve():n(a)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ri(t,(c=>this.Sr(t,c,n).next((f=>{f||(r++,l.removeEntry(c,St.min()))})))).next((()=>l.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.gi.set(n,t.currentSequenceNumber),at.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),at.resolve()}removeReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),at.resolve()}updateLimboDocument(t,n){return this.gi.set(n,t.currentSequenceNumber),at.resolve()}Pi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=qf(t.data.value)),n}Sr(t,n,r){return at.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const a=this.gi.get(n);return at.resolve(a!==void 0&&a>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}class Bv{constructor(t,n,r,a){this.targetId=t,this.fromCache=n,this.Is=r,this.ds=a}static Es(t,n){let r=jt(),a=jt();for(const l of n.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Bv(t,n.fromCache,r,a)}}class CL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}class xL{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return SM()?8:eP(dn())>0?6:4})()}initialize(t,n){this.gs=t,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(t,n,r,a){const l={result:null};return this.ps(t,n).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ys(t,n,a,r).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new CL;return this.ws(t,n,c).next((f=>{if(l.result=f,this.Rs)return this.Ss(t,n,c,f.size)}))})).next((()=>l.result))}Ss(t,n,r,a){return r.documentReadCount<this.Vs?(Jo()<=Ut.DEBUG&&dt("QueryEngine","SDK will not create cache indexes for query:",tl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),at.resolve()):(Jo()<=Ut.DEBUG&&dt("QueryEngine","Query:",tl(n),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.fs*a?(Jo()<=Ut.DEBUG&&dt("QueryEngine","The SDK decides to create cache indexes for query:",tl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Hi(n))):at.resolve())}ps(t,n){if(Mb(n))return at.resolve(null);let r=Hi(n);return this.indexManager.getIndexType(t,r).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=hd(n,null,"F"),r=Hi(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((l=>{const c=jt(...l);return this.gs.getDocuments(t,c).next((f=>this.indexManager.getMinOffset(t,r).next((d=>{const p=this.bs(n,f);return this.Ds(n,p,c,d.readTime)?this.ps(t,hd(n,null,"F")):this.vs(t,p,n,d)}))))})))))}ys(t,n,r,a){return Mb(n)||a.isEqual(St.min())?at.resolve(null):this.gs.getDocuments(t,r).next((l=>{const c=this.bs(n,l);return this.Ds(n,c,r,a)?at.resolve(null):(Jo()<=Ut.DEBUG&&dt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),tl(n)),this.vs(t,c,n,Xk(a,lc)).next((f=>f)))}))}bs(t,n){let r=new Ue(NR(t));return n.forEach(((a,l)=>{qd(t,l)&&(r=r.add(l))})),r}Ds(t,n,r,a){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const l=t.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ws(t,n,r){return Jo()<=Ut.DEBUG&&dt("QueryEngine","Using full collection scan to execute query:",tl(n)),this.gs.getDocumentsMatchingQuery(t,n,Hs.min(),r)}vs(t,n,r,a){return this.gs.getDocumentsMatchingQuery(t,r,a).next((l=>(n.forEach((c=>{l=l.insert(c.key,c)})),l)))}}const zv="LocalStore",IL=3e8;class DL{constructor(t,n,r,a){this.persistence=t,this.Cs=n,this.serializer=a,this.Fs=new me(Mt),this.Ms=new ro((l=>Dv(l)),Nv),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(r)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new vL(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Fs)))}}function NL(e,t,n,r){return new DL(e,t,n,r)}async function tC(e,t){const n=Rt(e);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return n.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,n.Ns(t),n.mutationQueue.getAllMutationBatches(r)))).next((l=>{const c=[],f=[];let d=jt();for(const p of a){c.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of l){f.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return n.localDocuments.getDocuments(r,d).next((p=>({Bs:p,removedBatchIds:c,addedBatchIds:f})))}))}))}function ML(e,t){const n=Rt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=t.batch.keys(),l=n.Os.newChangeBuffer({trackRemovals:!0});return(function(f,d,p,y){const _=p.batch,E=_.keys();let A=at.resolve();return E.forEach((D=>{A=A.next((()=>y.getEntry(d,D))).next((b=>{const x=p.docVersions.get(D);$t(x!==null,48541),b.version.compareTo(x)<0&&(_.applyToRemoteDocument(b,p),b.isValidDocument()&&(b.setReadTime(p.commitVersion),y.addEntry(b)))}))})),A.next((()=>f.mutationQueue.removeMutationBatch(d,_)))})(n,r,t,l).next((()=>l.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,a,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let d=jt();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(d=d.add(f.batch.mutations[p].key));return d})(t)))).next((()=>n.localDocuments.getDocuments(r,a)))}))}function eC(e){const t=Rt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.hi.getLastRemoteSnapshotVersion(n)))}function OL(e,t){const n=Rt(e),r=t.snapshotVersion;let a=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=n.Os.newChangeBuffer({trackRemovals:!0});a=n.Fs;const f=[];t.targetChanges.forEach(((y,_)=>{const E=a.get(_);if(!E)return;f.push(n.hi.removeMatchingKeys(l,y.removedDocuments,_).next((()=>n.hi.addMatchingKeys(l,y.addedDocuments,_))));let A=E.withSequenceNumber(l.currentSequenceNumber);t.targetMismatches.get(_)!==null?A=A.withResumeToken(nn.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,r)),a=a.insert(_,A),(function(b,x,V){return b.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=IL?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(E,A,y)&&f.push(n.hi.updateTargetData(l,A))}));let d=jr(),p=jt();if(t.documentUpdates.forEach((y=>{t.resolvedLimboDocuments.has(y)&&f.push(n.persistence.referenceDelegate.updateLimboDocument(l,y))})),f.push(VL(l,c,t.documentUpdates).next((y=>{d=y.Ls,p=y.ks}))),!r.isEqual(St.min())){const y=n.hi.getLastRemoteSnapshotVersion(l).next((_=>n.hi.setTargetsMetadata(l,l.currentSequenceNumber,r)));f.push(y)}return at.waitFor(f).next((()=>c.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,d,p))).next((()=>d))})).then((l=>(n.Fs=a,l)))}function VL(e,t,n){let r=jt(),a=jt();return n.forEach((l=>r=r.add(l))),t.getEntries(e,r).next((l=>{let c=jr();return n.forEach(((f,d)=>{const p=l.get(f);d.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),d.isNoDocument()&&d.version.isEqual(St.min())?(t.removeEntry(f,d.readTime),c=c.insert(f,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(d),c=c.insert(f,d)):dt(zv,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",d.version)})),{Ls:c,ks:a}}))}function kL(e,t){const n=Rt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=xv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function PL(e,t){const n=Rt(e);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return n.hi.getTargetData(r,t).next((l=>l?(a=l,at.resolve(a)):n.hi.allocateTargetId(r).next((c=>(a=new Us(t,c,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=n.Fs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(t,r.targetId)),r}))}async function xy(e,t,n){const r=Rt(e),a=r.Fs.get(t),l=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",l,(c=>r.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!Dl(c))throw c;dt(zv,`Failed to update sequence numbers for target ${t}: ${c}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(a.target)}function Gb(e,t,n){const r=Rt(e);let a=St.min(),l=jt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,p,y){const _=Rt(d),E=_.Ms.get(y);return E!==void 0?at.resolve(_.Fs.get(E)):_.hi.getTargetData(p,y)})(r,c,Hi(t)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,f.targetId).next((d=>{l=d}))})).next((()=>r.Cs.getDocumentsMatchingQuery(c,t,n?a:St.min(),n?l:jt()))).next((f=>(LL(r,wP(t),f),{documents:f,qs:l})))))}function LL(e,t,n){let r=e.xs.get(t)||St.min();n.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),e.xs.set(t,r)}class Kb{constructor(){this.activeTargetIds=xP()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class UL{constructor(){this.Fo=new Kb,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,n,r){this.Mo[t]=n}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new Kb,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class jL{xo(t){}shutdown(){}}const $b="ConnectivityMonitor";class Yb{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){dt($b,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){dt($b,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Rf=null;function Iy(){return Rf===null?Rf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Rf++,"0x"+Rf.toString(16)}const kg="RestConnection",BL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zL{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+t.host,this.Uo=`projects/${r}/databases/${a}`,this.Ko=this.databaseId.database===ld?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(t,n,r,a,l){const c=Iy(),f=this.Go(t,n.toUriEncodedString());dt(kg,`Sending RPC '${t}' ${c}:`,f,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,a,l);const{host:p}=new URL(f),y=Zs(p);return this.jo(t,f,d,r,y).then((_=>(dt(kg,`Received RPC '${t}' ${c}: `,_),_)),(_=>{throw Fs(kg,`RPC '${t}' ${c} failed with error: `,_,"url: ",f,"request:",r),_}))}Jo(t,n,r,a,l,c){return this.Wo(t,n,r,a,l)}zo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+xl})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,l)=>t[l]=a)),r&&r.headers.forEach(((a,l)=>t[l]=a))}Go(t,n){const r=BL[t];return`${this.$o}/v1/${n}:${r}`}terminate(){}}class FL{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}const on="WebChannelConnection";class HL extends zL{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,n,r,a,l){const c=Iy();return new Promise(((f,d)=>{const p=new rR;p.setWithCredentials(!0),p.listenOnce(sR.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Hf.NO_ERROR:const _=p.getResponseJson();dt(on,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(_)),f(_);break;case Hf.TIMEOUT:dt(on,`RPC '${t}' ${c} timed out`),d(new ht(nt.DEADLINE_EXCEEDED,"Request time out"));break;case Hf.HTTP_ERROR:const E=p.getStatus();if(dt(on,`RPC '${t}' ${c} failed with status:`,E,"response text:",p.getResponseText()),E>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const D=A?.error;if(D&&D.status&&D.message){const b=(function(V){const P=V.toLowerCase().replace(/_/g,"-");return Object.values(nt).indexOf(P)>=0?P:nt.UNKNOWN})(D.status);d(new ht(b,D.message))}else d(new ht(nt.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new ht(nt.UNAVAILABLE,"Connection failed."));break;default:wt(9055,{c_:t,streamId:c,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{dt(on,`RPC '${t}' ${c} completed.`)}}));const y=JSON.stringify(a);dt(on,`RPC '${t}' ${c} sending request:`,a),p.send(n,"POST",y,r,15)}))}P_(t,n,r){const a=Iy(),l=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=lR(),f=oR(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const y=l.join("");dt(on,`Creating RPC '${t}' stream ${a}: ${y}`,d);const _=c.createWebChannel(y,d);this.T_(_);let E=!1,A=!1;const D=new FL({Ho:x=>{A?dt(on,`Not sending because RPC '${t}' stream ${a} is closed:`,x):(E||(dt(on,`Opening RPC '${t}' stream ${a} transport.`),_.open(),E=!0),dt(on,`RPC '${t}' stream ${a} sending:`,x),_.send(x))},Yo:()=>_.close()}),b=(x,V,P)=>{x.listen(V,(k=>{try{P(k)}catch(K){setTimeout((()=>{throw K}),0)}}))};return b(_,zu.EventType.OPEN,(()=>{A||(dt(on,`RPC '${t}' stream ${a} transport opened.`),D.s_())})),b(_,zu.EventType.CLOSE,(()=>{A||(A=!0,dt(on,`RPC '${t}' stream ${a} transport closed`),D.__(),this.I_(_))})),b(_,zu.EventType.ERROR,(x=>{A||(A=!0,Fs(on,`RPC '${t}' stream ${a} transport errored. Name:`,x.name,"Message:",x.message),D.__(new ht(nt.UNAVAILABLE,"The operation could not be completed")))})),b(_,zu.EventType.MESSAGE,(x=>{var V;if(!A){const P=x.data[0];$t(!!P,16349);const k=P,K=k?.error||((V=k[0])===null||V===void 0?void 0:V.error);if(K){dt(on,`RPC '${t}' stream ${a} received error:`,K);const q=K.status;let Y=(function(N){const U=Oe[N];if(U!==void 0)return FR(U)})(q),R=K.message;Y===void 0&&(Y=nt.INTERNAL,R="Unknown error status: "+q+" with message "+K.message),A=!0,D.__(new ht(Y,R)),_.close()}else dt(on,`RPC '${t}' stream ${a} received:`,P),D.a_(P)}})),b(f,aR.STAT_EVENT,(x=>{x.stat===yy.PROXY?dt(on,`RPC '${t}' stream ${a} detected buffering proxy`):x.stat===yy.NOPROXY&&dt(on,`RPC '${t}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{D.o_()}),0),D}terminate(){this.u_.forEach((t=>t.close())),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter((n=>n===t))}}function Pg(){return typeof document<"u"?document:null}function Yd(e){return new $P(e,!0)}class nC{constructor(t,n,r=1e3,a=1.5,l=6e4){this.Fi=t,this.timerId=n,this.d_=r,this.E_=a,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),a=Math.max(0,n-r);a>0&&dt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),t()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const Qb="PersistentStream";class iC{constructor(t,n,r,a,l,c,f,d){this.Fi=t,this.w_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new nC(t,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():n&&n.code===nt.RESOURCE_EXHAUSTED?(Ur(n.toString()),Ur("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===nt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(n)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.b_===n&&this.W_(r,a)}),(r=>{t((()=>{const a=new ht(nt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(a)}))}))}W_(t,n){const r=this.K_(this.b_);this.stream=this.z_(t,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{r((()=>this.G_(a)))})),this.stream.onMessage((a=>{r((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(t){return dt(Qb,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return n=>{this.Fi.enqueueAndForget((()=>this.b_===t?n():(dt(Qb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class qL extends iC{constructor(t,n,r,a,l,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}z_(t,n){return this.connection.P_("Listen",t,n)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const n=XP(this.serializer,t),r=(function(l){if(!("targetChange"in l))return St.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?St.min():c.readTime?qi(c.readTime):St.min()})(t);return this.listener.J_(n,r)}H_(t){const n={};n.database=Cy(this.serializer),n.addTarget=(function(l,c){let f;const d=c.target;if(f=wy(d)?{documents:JP(l,d)}:{query:tL(l,d).Vt},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=GR(l,c.resumeToken);const p=Sy(l,c.expectedCount);p!==null&&(f.expectedCount=p)}else if(c.snapshotVersion.compareTo(St.min())>0){f.readTime=dd(l,c.snapshotVersion.toTimestamp());const p=Sy(l,c.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,t);const r=nL(this.serializer,t);r&&(n.labels=r),this.k_(n)}Y_(t){const n={};n.database=Cy(this.serializer),n.removeTarget=t,this.k_(n)}}class GL extends iC{constructor(t,n,r,a,l,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,a,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,n){return this.connection.P_("Write",t,n)}j_(t){return $t(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,$t(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){$t(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const n=ZP(t.writeResults,t.commitTime),r=qi(t.commitTime);return this.listener.ta(r,n)}na(){const t={};t.database=Cy(this.serializer),this.k_(t)}X_(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>WP(this.serializer,r)))};this.k_(n)}}class KL{}class $L extends KL{constructor(t,n,r,a){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new ht(nt.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,r,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(t,Ay(n,r),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ht(nt.UNKNOWN,l.toString())}))}Jo(t,n,r,a,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Jo(t,Ay(n,r),a,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===nt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ht(nt.UNKNOWN,c.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class YL{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Ur(n),this._a=!1):dt("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}const Qa="RemoteStore";class QL{constructor(t,n,r,a,l){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((c=>{r.enqueueAndForget((async()=>{so(this)&&(dt(Qa,"Restarting streams for network reachability change."),await(async function(d){const p=Rt(d);p.Ia.add(4),await Vc(p),p.Aa.set("Unknown"),p.Ia.delete(4),await Qd(p)})(this))}))})),this.Aa=new YL(r,a)}}async function Qd(e){if(so(e))for(const t of e.da)await t(!0)}async function Vc(e){for(const t of e.da)await t(!1)}function rC(e,t){const n=Rt(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),Gv(n)?qv(n):Nl(n).x_()&&Hv(n,t))}function Fv(e,t){const n=Rt(e),r=Nl(n);n.Ta.delete(t),r.x_()&&sC(n,t),n.Ta.size===0&&(r.x_()?r.B_():so(n)&&n.Aa.set("Unknown"))}function Hv(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(St.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Nl(e).H_(t)}function sC(e,t){e.Ra.$e(t),Nl(e).Y_(t)}function qv(e){e.Ra=new HP({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),Nl(e).start(),e.Aa.aa()}function Gv(e){return so(e)&&!Nl(e).M_()&&e.Ta.size>0}function so(e){return Rt(e).Ia.size===0}function aC(e){e.Ra=void 0}async function XL(e){e.Aa.set("Online")}async function WL(e){e.Ta.forEach(((t,n)=>{Hv(e,t)}))}async function ZL(e,t){aC(e),Gv(e)?(e.Aa.la(t),qv(e)):e.Aa.set("Unknown")}async function JL(e,t,n){if(e.Aa.set("Online"),t instanceof qR&&t.state===2&&t.cause)try{await(async function(a,l){const c=l.cause;for(const f of l.targetIds)a.Ta.has(f)&&(await a.remoteSyncer.rejectListen(f,c),a.Ta.delete(f),a.Ra.removeTarget(f))})(e,t)}catch(r){dt(Qa,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await pd(e,r)}else if(t instanceof $f?e.Ra.Ye(t):t instanceof HR?e.Ra.it(t):e.Ra.et(t),!n.isEqual(St.min()))try{const r=await eC(e.localStore);n.compareTo(r)>=0&&await(function(l,c){const f=l.Ra.Pt(c);return f.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=l.Ta.get(p);y&&l.Ta.set(p,y.withResumeToken(d.resumeToken,c))}})),f.targetMismatches.forEach(((d,p)=>{const y=l.Ta.get(d);if(!y)return;l.Ta.set(d,y.withResumeToken(nn.EMPTY_BYTE_STRING,y.snapshotVersion)),sC(l,d);const _=new Us(y.target,d,p,y.sequenceNumber);Hv(l,_)})),l.remoteSyncer.applyRemoteEvent(f)})(e,n)}catch(r){dt(Qa,"Failed to raise snapshot:",r),await pd(e,r)}}async function pd(e,t,n){if(!Dl(t))throw t;e.Ia.add(1),await Vc(e),e.Aa.set("Offline"),n||(n=()=>eC(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{dt(Qa,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await Qd(e)}))}function oC(e,t){return t().catch((n=>pd(e,n,t)))}async function Xd(e){const t=Rt(e),n=$s(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:xv;for(;t4(t);)try{const a=await kL(t.localStore,r);if(a===null){t.Pa.length===0&&n.B_();break}r=a.batchId,e4(t,a)}catch(a){await pd(t,a)}lC(t)&&uC(t)}function t4(e){return so(e)&&e.Pa.length<10}function e4(e,t){e.Pa.push(t);const n=$s(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function lC(e){return so(e)&&!$s(e).M_()&&e.Pa.length>0}function uC(e){$s(e).start()}async function n4(e){$s(e).na()}async function i4(e){const t=$s(e);for(const n of e.Pa)t.X_(n.mutations)}async function r4(e,t,n){const r=e.Pa.shift(),a=kv.from(r,t,n);await oC(e,(()=>e.remoteSyncer.applySuccessfulWrite(a))),await Xd(e)}async function s4(e,t){t&&$s(e).Z_&&await(async function(r,a){if((function(c){return zP(c)&&c!==nt.ABORTED})(a.code)){const l=r.Pa.shift();$s(r).N_(),await oC(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await Xd(r)}})(e,t),lC(e)&&uC(e)}async function Xb(e,t){const n=Rt(e);n.asyncQueue.verifyOperationInProgress(),dt(Qa,"RemoteStore received new credentials");const r=so(n);n.Ia.add(3),await Vc(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await Qd(n)}async function a4(e,t){const n=Rt(e);t?(n.Ia.delete(2),await Qd(n)):t||(n.Ia.add(2),await Vc(n),n.Aa.set("Unknown"))}function Nl(e){return e.Va||(e.Va=(function(n,r,a){const l=Rt(n);return l.ia(),new qL(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(e.datastore,e.asyncQueue,{Zo:XL.bind(null,e),e_:WL.bind(null,e),n_:ZL.bind(null,e),J_:JL.bind(null,e)}),e.da.push((async t=>{t?(e.Va.N_(),Gv(e)?qv(e):e.Aa.set("Unknown")):(await e.Va.stop(),aC(e))}))),e.Va}function $s(e){return e.ma||(e.ma=(function(n,r,a){const l=Rt(n);return l.ia(),new GL(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:n4.bind(null,e),n_:s4.bind(null,e),ea:i4.bind(null,e),ta:r4.bind(null,e)}),e.da.push((async t=>{t?(e.ma.N_(),await Xd(e)):(await e.ma.stop(),e.Pa.length>0&&(dt(Qa,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))}))),e.ma}class Kv{constructor(t,n,r,a,l){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,a,l){const c=Date.now()+r,f=new Kv(t,n,c,a,l);return f.start(r),f}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ht(nt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $v(e,t){if(Ur("AsyncQueue",`${t}: ${e}`),Dl(e))return new ht(nt.UNAVAILABLE,`${t}: ${e}`);throw e}class dl{static emptySet(t){return new dl(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||yt.comparator(n.key,r.key):(n,r)=>yt.comparator(n.key,r.key),this.keyedMap=Fu(),this.sortedSet=new me(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof dl)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new dl;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}class Wb{constructor(){this.fa=new me(yt.comparator)}track(t){const n=t.doc.key,r=this.fa.get(n);r?t.type!==0&&r.type===3?this.fa=this.fa.insert(n,t):t.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.fa=this.fa.remove(n):t.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):wt(63341,{At:t,ga:r}):this.fa=this.fa.insert(n,t)}pa(){const t=[];return this.fa.inorderTraversal(((n,r)=>{t.push(r)})),t}}class Tl{constructor(t,n,r,a,l,c,f,d,p){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(t,n,r,a,l){const c=[];return n.forEach((f=>{c.push({type:0,doc:f})})),new Tl(t,n,dl.emptySet(n),c,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Hd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==r[a].type||!n[a].doc.isEqual(r[a].doc))return!1;return!0}}class o4{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((t=>t.ba()))}}class l4{constructor(){this.queries=Zb(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const a=Rt(n),l=a.queries;a.queries=Zb(),l.forEach(((c,f)=>{for(const d of f.wa)d.onError(r)}))})(this,new ht(nt.ABORTED,"Firestore shutting down"))}}function Zb(){return new ro((e=>DR(e)),Hd)}async function Yv(e,t){const n=Rt(e);let r=3;const a=t.query;let l=n.queries.get(a);l?!l.Sa()&&t.ba()&&(r=2):(l=new o4,r=t.ba()?0:1);try{switch(r){case 0:l.ya=await n.onListen(a,!0);break;case 1:l.ya=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const f=$v(c,`Initialization of query '${tl(t.query)}' failed`);return void t.onError(f)}n.queries.set(a,l),l.wa.push(t),t.va(n.onlineState),l.ya&&t.Ca(l.ya)&&Xv(n)}async function Qv(e,t){const n=Rt(e),r=t.query;let a=3;const l=n.queries.get(r);if(l){const c=l.wa.indexOf(t);c>=0&&(l.wa.splice(c,1),l.wa.length===0?a=t.ba()?0:1:!l.Sa()&&t.ba()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function u4(e,t){const n=Rt(e);let r=!1;for(const a of t){const l=a.query,c=n.queries.get(l);if(c){for(const f of c.wa)f.Ca(a)&&(r=!0);c.ya=a}}r&&Xv(n)}function c4(e,t,n){const r=Rt(e),a=r.queries.get(t);if(a)for(const l of a.wa)l.onError(n);r.queries.delete(t)}function Xv(e){e.Da.forEach((t=>{t.next()}))}var Dy,Jb;(Jb=Dy||(Dy={})).Fa="default",Jb.Cache="cache";class Wv{constructor(t,n,r){this.query=t,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(t){if(!this.options.includeMetadataChanges){const r=[];for(const a of t.docChanges)a.type!==3&&r.push(a);t=new Tl(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),n=!0):this.Ba(t,this.onlineState)&&(this.La(t),n=!0),this.Oa=t,n}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),n=!0),n}Ba(t,n){if(!t.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(t){t=Tl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==Dy.Cache}}class cC{constructor(t){this.key=t}}class hC{constructor(t){this.key=t}}class h4{constructor(t,n){this.query=t,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=jt(),this.mutatedKeys=jt(),this.Xa=NR(t),this.eu=new dl(this.Xa)}get tu(){return this.Ha}nu(t,n){const r=n?n.ru:new Wb,a=n?n.eu:this.eu;let l=n?n.mutatedKeys:this.mutatedKeys,c=a,f=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal(((y,_)=>{const E=a.get(y),A=qd(this.query,_)?_:null,D=!!E&&this.mutatedKeys.has(E.key),b=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let x=!1;E&&A?E.data.isEqual(A.data)?D!==b&&(r.track({type:3,doc:A}),x=!0):this.iu(E,A)||(r.track({type:2,doc:A}),x=!0,(d&&this.Xa(A,d)>0||p&&this.Xa(A,p)<0)&&(f=!0)):!E&&A?(r.track({type:0,doc:A}),x=!0):E&&!A&&(r.track({type:1,doc:E}),x=!0,(d||p)&&(f=!0)),x&&(A?(c=c.add(A),l=b?l.add(y):l.delete(y)):(c=c.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{eu:c,ru:r,Ds:f,mutatedKeys:l}}iu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,a){const l=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const c=t.ru.pa();c.sort(((y,_)=>(function(A,D){const b=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt(20277,{At:x})}};return b(A)-b(D)})(y.type,_.type)||this.Xa(y.doc,_.doc))),this.su(r),a=a!=null&&a;const f=n&&!a?this.ou():[],d=this.Za.size===0&&this.current&&!a?1:0,p=d!==this.Ya;return this.Ya=d,c.length!==0||p?{snapshot:new Tl(this.query,t.eu,l,c,t.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Wb,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=jt(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const n=[];return t.forEach((r=>{this.Za.has(r)||n.push(new hC(r))})),this.Za.forEach((r=>{t.has(r)||n.push(new cC(r))})),n}uu(t){this.Ha=t.qs,this.Za=jt();const n=this.nu(t.documents);return this.applyChanges(n,!0)}cu(){return Tl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Zv="SyncEngine";class f4{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class d4{constructor(t){this.key=t,this.lu=!1}}class m4{constructor(t,n,r,a,l,c){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new ro((f=>DR(f)),Hd),this.Tu=new Map,this.Iu=new Set,this.du=new me(yt.comparator),this.Eu=new Map,this.Au=new Uv,this.Ru={},this.Vu=new Map,this.mu=_l.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function p4(e,t,n=!0){const r=yC(e);let a;const l=r.Pu.get(t);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.cu()):a=await fC(r,t,n,!0),a}async function g4(e,t){const n=yC(e);await fC(n,t,!0,!1)}async function fC(e,t,n,r){const a=await PL(e.localStore,Hi(t)),l=a.targetId,c=e.sharedClientState.addLocalQueryTarget(l,n);let f;return r&&(f=await y4(e,t,l,c==="current",a.resumeToken)),e.isPrimaryClient&&n&&rC(e.remoteStore,a),f}async function y4(e,t,n,r,a){e.gu=(_,E,A)=>(async function(b,x,V,P){let k=x.view.nu(V);k.Ds&&(k=await Gb(b.localStore,x.query,!1).then((({documents:R})=>x.view.nu(R,k))));const K=P&&P.targetChanges.get(x.targetId),q=P&&P.targetMismatches.get(x.targetId)!=null,Y=x.view.applyChanges(k,b.isPrimaryClient,K,q);return eS(b,x.targetId,Y._u),Y.snapshot})(e,_,E,A);const l=await Gb(e.localStore,t,!0),c=new h4(t,l.qs),f=c.nu(l.documents),d=Oc.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",a),p=c.applyChanges(f,e.isPrimaryClient,d);eS(e,n,p._u);const y=new f4(t,n,c);return e.Pu.set(t,y),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),p.snapshot}async function v4(e,t,n){const r=Rt(e),a=r.Pu.get(t),l=r.Tu.get(a.targetId);if(l.length>1)return r.Tu.set(a.targetId,l.filter((c=>!Hd(c,t)))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await xy(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),n&&Fv(r.remoteStore,a.targetId),Ny(r,a.targetId)})).catch(Il)):(Ny(r,a.targetId),await xy(r.localStore,a.targetId,!0))}async function _4(e,t){const n=Rt(e),r=n.Pu.get(t),a=n.Tu.get(r.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fv(n.remoteStore,r.targetId))}async function T4(e,t,n){const r=C4(e);try{const a=await(function(c,f){const d=Rt(c),p=se.now(),y=f.reduce(((A,D)=>A.add(D.key)),jt());let _,E;return d.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let D=jr(),b=jt();return d.Os.getEntries(A,y).next((x=>{D=x,D.forEach(((V,P)=>{P.isValidDocument()||(b=b.add(V))}))})).next((()=>d.localDocuments.getOverlayedDocuments(A,D))).next((x=>{_=x;const V=[];for(const P of f){const k=PP(P,_.get(P.key).overlayedDocument);k!=null&&V.push(new ta(P.key,k,bR(k.value.mapValue),ci.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,V,f)})).next((x=>{E=x;const V=x.applyToLocalDocumentSet(_,b);return d.documentOverlayCache.saveOverlays(A,x.batchId,V)}))})).then((()=>({batchId:E.batchId,changes:OR(_)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(a.batchId),(function(c,f,d){let p=c.Ru[c.currentUser.toKey()];p||(p=new me(Mt)),p=p.insert(f,d),c.Ru[c.currentUser.toKey()]=p})(r,a.batchId,n),await kc(r,a.changes),await Xd(r.remoteStore)}catch(a){const l=$v(a,"Failed to persist write");n.reject(l)}}async function dC(e,t){const n=Rt(e);try{const r=await OL(n.localStore,t);t.targetChanges.forEach(((a,l)=>{const c=n.Eu.get(l);c&&($t(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.lu=!0:a.modifiedDocuments.size>0?$t(c.lu,14607):a.removedDocuments.size>0&&($t(c.lu,42227),c.lu=!1))})),await kc(n,r,t)}catch(r){await Il(r)}}function tS(e,t,n){const r=Rt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const a=[];r.Pu.forEach(((l,c)=>{const f=c.view.va(t);f.snapshot&&a.push(f.snapshot)})),(function(c,f){const d=Rt(c);d.onlineState=f;let p=!1;d.queries.forEach(((y,_)=>{for(const E of _.wa)E.va(f)&&(p=!0)})),p&&Xv(d)})(r.eventManager,t),a.length&&r.hu.J_(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function E4(e,t,n){const r=Rt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const a=r.Eu.get(t),l=a&&a.key;if(l){let c=new me(yt.comparator);c=c.insert(l,cn.newNoDocument(l,St.min()));const f=jt().add(l),d=new $d(St.min(),new Map,new me(Mt),c,f);await dC(r,d),r.du=r.du.remove(l),r.Eu.delete(t),Jv(r)}else await xy(r.localStore,t,!1).then((()=>Ny(r,t,n))).catch(Il)}async function w4(e,t){const n=Rt(e),r=t.batch.batchId;try{const a=await ML(n.localStore,t);pC(n,r,null),mC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kc(n,a)}catch(a){await Il(a)}}async function b4(e,t,n){const r=Rt(e);try{const a=await(function(c,f){const d=Rt(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return d.mutationQueue.lookupMutationBatch(p,f).next((_=>($t(_!==null,37113),y=_.keys(),d.mutationQueue.removeMutationBatch(p,_)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,f))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>d.localDocuments.getDocuments(p,y)))}))})(r.localStore,t);pC(r,t,n),mC(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await kc(r,a)}catch(a){await Il(a)}}function mC(e,t){(e.Vu.get(t)||[]).forEach((n=>{n.resolve()})),e.Vu.delete(t)}function pC(e,t,n){const r=Rt(e);let a=r.Ru[r.currentUser.toKey()];if(a){const l=a.get(t);l&&(n?l.reject(n):l.resolve(),a=a.remove(t)),r.Ru[r.currentUser.toKey()]=a}}function Ny(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach((r=>{e.Au.containsKey(r)||gC(e,r)}))}function gC(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Fv(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),Jv(e))}function eS(e,t,n){for(const r of n)r instanceof cC?(e.Au.addReference(r.key,t),S4(e,r)):r instanceof hC?(dt(Zv,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||gC(e,r.key)):wt(19791,{yu:r})}function S4(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(dt(Zv,"New document in limbo: "+n),e.Iu.add(r),Jv(e))}function Jv(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new yt(ee.fromString(t)),r=e.mu.next();e.Eu.set(r,new d4(n)),e.du=e.du.insert(n,r),rC(e.remoteStore,new Us(Hi(Fd(n.path)),r,"TargetPurposeLimboResolution",Ud.ue))}}async function kc(e,t,n){const r=Rt(e),a=[],l=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach(((f,d)=>{c.push(r.gu(d,t,n).then((p=>{var y;if((p||n)&&r.isPrimaryClient){const _=p?!p.fromCache:(y=n?.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,_?"current":"not-current")}if(p){a.push(p);const _=Bv.Es(d.targetId,p);l.push(_)}})))})),await Promise.all(c),r.hu.J_(a),await(async function(d,p){const y=Rt(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>at.forEach(p,(E=>at.forEach(E.Is,(A=>y.persistence.referenceDelegate.addReference(_,E.targetId,A))).next((()=>at.forEach(E.ds,(A=>y.persistence.referenceDelegate.removeReference(_,E.targetId,A)))))))))}catch(_){if(!Dl(_))throw _;dt(zv,"Failed to update sequence numbers: "+_)}for(const _ of p){const E=_.targetId;if(!_.fromCache){const A=y.Fs.get(E),D=A.snapshotVersion,b=A.withLastLimboFreeSnapshotVersion(D);y.Fs=y.Fs.insert(E,b)}}})(r.localStore,l))}async function A4(e,t){const n=Rt(e);if(!n.currentUser.isEqual(t)){dt(Zv,"User change. New user:",t.toKey());const r=await tC(n.localStore,t);n.currentUser=t,(function(l,c){l.Vu.forEach((f=>{f.forEach((d=>{d.reject(new ht(nt.CANCELLED,c))}))})),l.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await kc(n,r.Bs)}}function R4(e,t){const n=Rt(e),r=n.Eu.get(t);if(r&&r.lu)return jt().add(r.key);{let a=jt();const l=n.Tu.get(t);if(!l)return a;for(const c of l){const f=n.Pu.get(c);a=a.unionWith(f.view.tu)}return a}}function yC(e){const t=Rt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=dC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=R4.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=E4.bind(null,t),t.hu.J_=u4.bind(null,t.eventManager),t.hu.pu=c4.bind(null,t.eventManager),t}function C4(e){const t=Rt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=w4.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=b4.bind(null,t),t}class gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Yd(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,n){return null}Fu(t,n){return null}vu(t){return NL(this.persistence,new xL,t.initialUser,this.serializer)}Du(t){return new JR(jv.Vi,this.serializer)}bu(t){return new UL}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gd.provider={build:()=>new gd};class x4 extends gd{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,n){$t(this.persistence.referenceDelegate instanceof md,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new dL(r,t.asyncQueue,n)}Du(t){const n=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new JR((r=>md.Vi(r,n)),this.serializer)}}class My{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=A4.bind(null,this.syncEngine),await a4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new l4})()}createDatastore(t){const n=Yd(t.databaseInfo.databaseId),r=(function(l){return new HL(l)})(t.databaseInfo);return(function(l,c,f,d){return new $L(l,c,f,d)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,a,l,c,f){return new QL(r,a,l,c,f)})(this.localStore,this.datastore,t.asyncQueue,(n=>tS(this.syncEngine,n,0)),(function(){return Yb.C()?new Yb:new jL})())}createSyncEngine(t,n){return(function(a,l,c,f,d,p,y){const _=new m4(a,l,c,f,d,p);return y&&(_.fu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(a){const l=Rt(a);dt(Qa,"RemoteStore shutting down."),l.Ia.add(5),await Vc(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}My.provider={build:()=>new My};class t0{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):Ur("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}const Ys="FirestoreClient";class I4{constructor(t,n,r,a,l){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=un.UNAUTHENTICATED,this.clientId=Cv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async c=>{dt(Ys,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(dt(Ys,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=$v(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function Lg(e,t){e.asyncQueue.verifyOperationInProgress(),dt(Ys,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async a=>{r.isEqual(a)||(await tC(t.localStore,a),r=a)})),t.persistence.setDatabaseDeletedListener((()=>{Fs("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then((()=>{dt("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{Fs("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),e._offlineComponents=t}async function nS(e,t){e.asyncQueue.verifyOperationInProgress();const n=await D4(e);dt(Ys,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((r=>Xb(t.remoteStore,r))),e.setAppCheckTokenChangeListener(((r,a)=>Xb(t.remoteStore,a))),e._onlineComponents=t}async function D4(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){dt(Ys,"Using user provided OfflineComponentProvider");try{await Lg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(a){return a.name==="FirebaseError"?a.code===nt.FAILED_PRECONDITION||a.code===nt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;Fs("Error using user provided cache. Falling back to memory cache: "+n),await Lg(e,new gd)}}else dt(Ys,"Using default OfflineComponentProvider"),await Lg(e,new x4(void 0));return e._offlineComponents}async function vC(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(dt(Ys,"Using user provided OnlineComponentProvider"),await nS(e,e._uninitializedComponentsProvider._online)):(dt(Ys,"Using default OnlineComponentProvider"),await nS(e,new My))),e._onlineComponents}function N4(e){return vC(e).then((t=>t.syncEngine))}async function yd(e){const t=await vC(e),n=t.eventManager;return n.onListen=p4.bind(null,t.syncEngine),n.onUnlisten=v4.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=g4.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=_4.bind(null,t.syncEngine),n}function M4(e,t,n={}){const r=new Mr;return e.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,d,p){const y=new t0({next:E=>{y.Ou(),c.enqueueAndForget((()=>Qv(l,_)));const A=E.docs.has(f);!A&&E.fromCache?p.reject(new ht(nt.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&d&&d.source==="server"?p.reject(new ht(nt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),_=new Wv(Fd(f.path),y,{includeMetadataChanges:!0,ka:!0});return Yv(l,_)})(await yd(e),e.asyncQueue,t,n,r))),r.promise}function O4(e,t,n={}){const r=new Mr;return e.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,d,p){const y=new t0({next:E=>{y.Ou(),c.enqueueAndForget((()=>Qv(l,_))),E.fromCache&&d.source==="server"?p.reject(new ht(nt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),_=new Wv(f,y,{includeMetadataChanges:!0,ka:!0});return Yv(l,_)})(await yd(e),e.asyncQueue,t,n,r))),r.promise}function _C(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}const iS=new Map;const TC="firestore.googleapis.com",rS=!0;class sS{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new ht(nt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TC,this.ssl=rS}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:rS;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=ZR;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<hL)throw new ht(nt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Qk("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_C((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ht(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ht(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ht(nt.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Wd{constructor(t,n,r,a){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ht(nt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ht(nt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sS(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Bk;switch(r.type){case"firstParty":return new qk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ht(nt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=iS.get(n);r&&(dt("ComponentProvider","Removing Datastore"),iS.delete(n),r.terminate())})(this),Promise.resolve()}}function V4(e,t,n,r={}){var a;e=On(e,Wd);const l=Zs(t),c=e._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:e._getEmulatorOptions()}),d=`${t}:${n}`;l&&(hv(`https://${d}`),fv("Firestore",!0)),c.host!==TC&&c.host!==d&&Fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:d,ssl:l,emulatorOptions:r});if(!Ka(p,f)&&(e._setSettings(p),r.mockUserToken)){let y,_;if(typeof r.mockUserToken=="string")y=r.mockUserToken,_=un.MOCK_USER;else{y=_1(r.mockUserToken,(a=e._app)===null||a===void 0?void 0:a.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new ht(nt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new un(E)}e._authCredentials=new zk(new cR(y,_))}}class Zi{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Zi(this.firestore,t,this._query)}}class Te{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Te(this.firestore,t,this._key)}toJSON(){return{type:Te._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Nc(n,Te._jsonSchema))return new Te(t,r||null,new yt(ee.fromString(n.referencePath)))}}Te._jsonSchemaVersion="firestore/documentReference/1.0",Te._jsonSchema={type:ke("string",Te._jsonSchemaVersion),referencePath:ke("string")};class zs extends Zi{constructor(t,n,r){super(t,n,Fd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Te(this.firestore,null,new yt(t))}withConverter(t){return new zs(this.firestore,t,this._path)}}function Ti(e,t,...n){if(e=oe(e),fR("collection","path",t),e instanceof Wd){const r=ee.fromString(t,...n);return _b(r),new zs(e,null,r)}{if(!(e instanceof Te||e instanceof zs))throw new ht(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ee.fromString(t,...n));return _b(r),new zs(e.firestore,null,r)}}function In(e,t,...n){if(e=oe(e),arguments.length===1&&(t=Cv.newId()),fR("doc","path",t),e instanceof Wd){const r=ee.fromString(t,...n);return vb(r),new Te(e,null,new yt(r))}{if(!(e instanceof Te||e instanceof zs))throw new ht(nt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ee.fromString(t,...n));return vb(r),new Te(e.firestore,e instanceof zs?e.converter:null,new yt(r))}}const aS="AsyncQueue";class oS{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new nC(this,"async_queue_retry"),this.oc=()=>{const r=Pg();r&&dt(aS,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=t;const n=Pg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=Pg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Mr;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Zu.push(t),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!Dl(t))throw t;dt(aS,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(t){const n=this._c.then((()=>(this.nc=!0,t().catch((r=>{throw this.tc=r,this.nc=!1,Ur("INTERNAL UNHANDLED ERROR: ",lS(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=n,n}enqueueAfterDelay(t,n,r){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const a=Kv.createAndSchedule(this,t,n,r,(l=>this.lc(l)));return this.ec.push(a),a}ac(){this.tc&&wt(47125,{hc:lS(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then((()=>{this.ec.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()}))}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function lS(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}function uS(e){return(function(n,r){if(typeof n!="object"||n===null)return!1;const a=n;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(e,["next","error","complete"])}class Br extends Wd{constructor(t,n,r,a){super(t,n,r,a),this.type="firestore",this._queue=new oS,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new oS(t),this._firestoreClient=void 0,await t}}}function k4(e,t){const n=typeof e=="object"?e:Od(),r=typeof e=="string"?e:ld,a=eo(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=g1("firestore");l&&V4(a,...l)}return a}function Zd(e){if(e._terminated)throw new ht(nt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||P4(e),e._firestoreClient}function P4(e){var t,n,r;const a=e._freezeSettings(),l=(function(f,d,p,y){return new aP(f,d,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,_C(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,a);e._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new I4(e._authCredentials,e._appCheckCredentials,e._queue,l,e._componentsProvider&&(function(f){const d=f?._online.build();return{_offline:f?._offline.build(d),_online:d}})(e._componentsProvider))}class ui{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ui(nn.fromBase64String(t))}catch(n){throw new ht(nt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new ui(nn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:ui._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Nc(t,ui._jsonSchema))return ui.fromBase64String(t.bytes)}}ui._jsonSchemaVersion="firestore/bytes/1.0",ui._jsonSchema={type:ke("string",ui._jsonSchemaVersion),bytes:ke("string")};class Jd{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ht(nt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class tm{constructor(t){this._methodName=t}}class Gi{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ht(nt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ht(nt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Mt(this._lat,t._lat)||Mt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gi._jsonSchemaVersion}}static fromJSON(t){if(Nc(t,Gi._jsonSchema))return new Gi(t.latitude,t.longitude)}}Gi._jsonSchemaVersion="firestore/geoPoint/1.0",Gi._jsonSchema={type:ke("string",Gi._jsonSchemaVersion),latitude:ke("number"),longitude:ke("number")};class Ki{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Nc(t,Ki._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Ki(t.vectorValues);throw new ht(nt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ki._jsonSchemaVersion="firestore/vectorValue/1.0",Ki._jsonSchema={type:ke("string",Ki._jsonSchemaVersion),vectorValues:ke("object")};const L4=/^__.*__$/;class U4{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new ta(t,this.data,this.fieldMask,n,this.fieldTransforms):new Mc(t,this.data,n,this.fieldTransforms)}}class EC{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new ta(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function wC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt(40011,{Ec:e})}}class e0{constructor(t,n,r,a,l,c){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new e0(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.Rc({path:r,mc:!1});return a.fc(t),a}gc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),a=this.Rc({path:r,mc:!1});return a.Ac(),a}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return vd(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(wC(this.Ec)&&L4.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class j4{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Yd(t)}Dc(t,n,r,a=!1){return new e0({Ec:t,methodName:n,bc:r,path:en.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pc(e){const t=e._freezeSettings(),n=Yd(e._databaseId);return new j4(e._databaseId,!!t.ignoreUndefinedProperties,n)}function bC(e,t,n,r,a,l={}){const c=e.Dc(l.merge||l.mergeFields?2:0,t,n,a);i0("Data must be an object, but it was:",c,r);const f=AC(r,c);let d,p;if(l.merge)d=new Hn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const y=[];for(const _ of l.mergeFields){const E=Oy(t,_,n);if(!c.contains(E))throw new ht(nt.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);CC(y,E)||y.push(E)}d=new Hn(y),p=c.fieldTransforms.filter((_=>d.covers(_.field)))}else d=null,p=c.fieldTransforms;return new U4(new Dn(f),d,p)}class em extends tm{_toFieldTransform(t){if(t.Ec!==2)throw t.Ec===1?t.wc(`${this._methodName}() can only appear at the top level of your update data`):t.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof em}}class n0 extends tm{_toFieldTransform(t){return new MP(t.path,new dc)}isEqual(t){return t instanceof n0}}function B4(e,t,n,r){const a=e.Dc(1,t,n);i0("Data must be an object, but it was:",a,r);const l=[],c=Dn.empty();Js(r,((d,p)=>{const y=r0(t,d,n);p=oe(p);const _=a.gc(y);if(p instanceof em)l.push(y);else{const E=Lc(p,_);E!=null&&(l.push(y),c.set(y,E))}}));const f=new Hn(l);return new EC(c,f,a.fieldTransforms)}function z4(e,t,n,r,a,l){const c=e.Dc(1,t,n),f=[Oy(t,r,n)],d=[a];if(l.length%2!=0)throw new ht(nt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)f.push(Oy(t,l[E])),d.push(l[E+1]);const p=[],y=Dn.empty();for(let E=f.length-1;E>=0;--E)if(!CC(p,f[E])){const A=f[E];let D=d[E];D=oe(D);const b=c.gc(A);if(D instanceof em)p.push(A);else{const x=Lc(D,b);x!=null&&(p.push(A),y.set(A,x))}}const _=new Hn(p);return new EC(y,_,c.fieldTransforms)}function SC(e,t,n,r=!1){return Lc(n,e.Dc(r?4:3,t))}function Lc(e,t){if(RC(e=oe(e)))return i0("Unsupported field value:",t,e),AC(e,t);if(e instanceof tm)return(function(r,a){if(!wC(a.Ec))throw a.wc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return(function(r,a){const l=[];let c=0;for(const f of r){let d=Lc(f,a.yc(c));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),c++}return{arrayValue:{values:l}}})(e,t)}return(function(r,a){if((r=oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IP(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=se.fromDate(r);return{timestampValue:dd(a.serializer,l)}}if(r instanceof se){const l=new se(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dd(a.serializer,l)}}if(r instanceof Gi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ui)return{bytesValue:GR(a.serializer,r._byteString)};if(r instanceof Te){const l=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(l))throw a.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Lv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Ki)return(function(c,f){return{mapValue:{fields:{[ER]:{stringValue:wR},[ud]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw f.wc("VectorValues must only contain numeric values.");return Ov(f.serializer,p)}))}}}}}})(r,a);throw a.wc(`Unsupported field value: ${Ld(r)}`)})(e,t)}function AC(e,t){const n={};return pR(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Js(e,((r,a)=>{const l=Lc(a,t.Vc(r));l!=null&&(n[r]=l)})),{mapValue:{fields:n}}}function RC(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof se||e instanceof Gi||e instanceof ui||e instanceof Te||e instanceof tm||e instanceof Ki)}function i0(e,t,n){if(!RC(n)||!dR(n)){const r=Ld(n);throw r==="an object"?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function Oy(e,t,n){if((t=oe(t))instanceof Jd)return t._internalPath;if(typeof t=="string")return r0(e,t);throw vd("Field path arguments must be of type string or ",e,!1,void 0,n)}const F4=new RegExp("[~\\*/\\[\\]]");function r0(e,t,n){if(t.search(F4)>=0)throw vd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Jd(...t.split("."))._internalPath}catch{throw vd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function vd(e,t,n,r,a){const l=r&&!r.isEmpty(),c=a!==void 0;let f=`Function ${t}() called with invalid data`;n&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(l||c)&&(d+=" (found",l&&(d+=` in field ${r}`),c&&(d+=` in document ${a}`),d+=")"),new ht(nt.INVALID_ARGUMENT,f+e+d)}function CC(e,t){return e.some((n=>n.isEqual(t)))}class s0{constructor(t,n,r,a,l){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Te(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new H4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(nm("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class H4 extends s0{data(){return super.data()}}function nm(e,t){return typeof t=="string"?r0(e,t):t instanceof Jd?t._internalPath:t._delegate._internalPath}function xC(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new ht(nt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class a0{}class im extends a0{}function Pa(e,t,...n){let r=[];t instanceof a0&&r.push(t),r=r.concat(n),(function(l){const c=l.filter((d=>d instanceof jc)).length,f=l.filter((d=>d instanceof Uc)).length;if(c>1||c>0&&f>0)throw new ht(nt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)e=a._apply(e);return e}class Uc extends im{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Uc(t,n,r)}_apply(t){const n=this._parse(t);return IC(t._query,n),new Zi(t.firestore,t.converter,by(t._query,n))}_parse(t){const n=Pc(t.firestore);return(function(l,c,f,d,p,y,_){let E;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ht(nt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){fS(_,y);const D=[];for(const b of _)D.push(hS(d,l,b));E={arrayValue:{values:D}}}else E=hS(d,l,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||fS(_,y),E=SC(f,c,_,y==="in"||y==="not-in");return Ve.create(p,y,E)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Ns(e,t,n){const r=t,a=nm("where",e);return Uc._create(a,r,n)}class jc extends a0{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new jc(t,n)}_parse(t){const n=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Si.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(a,l){let c=a;const f=l.getFlattenedFilters();for(const d of f)IC(c,d),c=by(c,d)})(t._query,n),new Zi(t.firestore,t.converter,by(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function q4(...e){return e.forEach((t=>$4("or",t))),jc._create("or",e)}class o0 extends im{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new o0(t,n)}_apply(t){const n=(function(a,l,c){if(a.startAt!==null)throw new ht(nt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ht(nt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fc(l,c)})(t._query,this._field,this._direction);return new Zi(t.firestore,t.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new io(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(t._query,n))}}function _d(e,t="asc"){const n=t,r=nm("orderBy",e);return o0._create(r,n)}class l0 extends im{constructor(t,n,r){super(),this.type=t,this._limit=n,this._limitType=r}static _create(t,n,r){return new l0(t,n,r)}_apply(t){return new Zi(t.firestore,t.converter,hd(t._query,this._limit,this._limitType))}}function cS(e){return l0._create("limit",e,"F")}class u0 extends im{constructor(t,n,r){super(),this.type=t,this._docOrFields=n,this._inclusive=r}static _create(t,n,r){return new u0(t,n,r)}_apply(t){const n=K4(t,this.type,this._docOrFields,this._inclusive);return new Zi(t.firestore,t.converter,(function(a,l){return new io(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(t._query,n))}}function G4(...e){return u0._create("startAfter",e,!1)}function K4(e,t,n,r){if(n[0]=oe(n[0]),n[0]instanceof s0)return(function(l,c,f,d,p){if(!d)throw new ht(nt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const y=[];for(const _ of fl(l))if(_.field.isKeyField())y.push(cd(c,d.key));else{const E=d.data.field(_.field);if(Bd(E))throw new ht(nt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(E===null){const A=_.field.canonicalString();throw new ht(nt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(E)}return new vl(y,p)})(e._query,e.firestore._databaseId,t,n[0]._document,r);{const a=Pc(e.firestore);return(function(c,f,d,p,y,_){const E=c.explicitOrderBy;if(y.length>E.length)throw new ht(nt.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let D=0;D<y.length;D++){const b=y[D];if(E[D].field.isKeyField()){if(typeof b!="string")throw new ht(nt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof b}`);if(!Mv(c)&&b.indexOf("/")!==-1)throw new ht(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${b}' contains a slash.`);const x=c.path.child(ee.fromString(b));if(!yt.isDocumentKey(x))throw new ht(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const V=new yt(x);A.push(cd(f,V))}else{const x=SC(d,p,b);A.push(x)}}return new vl(A,_)})(e._query,e.firestore._databaseId,a,t,n,r)}}function hS(e,t,n){if(typeof(n=oe(n))=="string"){if(n==="")throw new ht(nt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mv(t)&&n.indexOf("/")!==-1)throw new ht(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ee.fromString(n));if(!yt.isDocumentKey(r))throw new ht(nt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cd(e,new yt(r))}if(n instanceof Te)return cd(e,n._key);throw new ht(nt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ld(n)}.`)}function fS(e,t){if(!Array.isArray(e)||e.length===0)throw new ht(nt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function IC(e,t){const n=(function(a,l){for(const c of a)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(e.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new ht(nt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ht(nt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function $4(e,t){if(!(t instanceof Uc||t instanceof jc))throw new ht(nt.INVALID_ARGUMENT,`Function ${e}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class Y4{convertValue(t,n="none"){switch(Ks(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ce(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Gs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw wt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Js(t,((a,l)=>{r[a]=this.convertValue(l,n)})),r}convertVectorValue(t){var n,r,a;const l=(a=(r=(n=t.fields)===null||n===void 0?void 0:n[ud].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map((c=>Ce(c.doubleValue)));return new Ki(l)}convertGeoPoint(t){return new Gi(Ce(t.latitude),Ce(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=zd(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(uc(t));default:return null}}convertTimestamp(t){const n=qs(t);return new se(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ee.fromString(t);$t(WR(r),9688,{name:t});const a=new cc(r.get(1),r.get(3)),l=new yt(r.popFirst(5));return a.isEqual(n)||Ur(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}function DC(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class qu{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Fa extends s0{constructor(t,n,r,a,l,c){super(t,n,r,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=l}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(nm("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(nt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Fa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Fa._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fa._jsonSchema={type:ke("string",Fa._jsonSchemaVersion),bundleSource:ke("string","DocumentSnapshot"),bundleName:ke("string"),bundle:ke("string")};class Yf extends Fa{data(t={}){return super.data(t)}}class Ha{constructor(t,n,r,a){this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new qu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new Yf(this._firestore,this._userDataWriter,r.key,r,new qu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ht(nt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((f=>{const d=new Yf(a._firestore,a._userDataWriter,f.doc.key,f.doc,new qu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const d=new Yf(a._firestore,a._userDataWriter,f.doc.key,f.doc,new qu(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return f.type!==0&&(p=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),y=c.indexOf(f.doc.key)),{type:Q4(f.type),doc:d,oldIndex:p,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ht(nt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ha._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Cv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Q4(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt(61501,{type:e})}}function gc(e){e=On(e,Te);const t=On(e.firestore,Br);return M4(Zd(t),e._key).then((n=>NC(t,e,n)))}Ha._jsonSchemaVersion="firestore/querySnapshot/1.0",Ha._jsonSchema={type:ke("string",Ha._jsonSchemaVersion),bundleSource:ke("string","QuerySnapshot"),bundleName:ke("string"),bundle:ke("string")};class c0 extends Y4{constructor(t){super(),this.firestore=t}convertBytes(t){return new ui(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Te(this.firestore,null,n)}}function Gu(e){e=On(e,Zi);const t=On(e.firestore,Br),n=Zd(t),r=new c0(t);return xC(e._query),O4(n,e._query).then((a=>new Ha(t,r,e,a)))}function Vy(e,t,n){e=On(e,Te);const r=On(e.firestore,Br),a=DC(e.converter,t,n);return rm(r,[bC(Pc(r),"setDoc",e._key,a,e.converter!==null,n).toMutation(e._key,ci.none())])}function ky(e,t,n,...r){e=On(e,Te);const a=On(e.firestore,Br),l=Pc(a);let c;return c=typeof(t=oe(t))=="string"||t instanceof Jd?z4(l,"updateDoc",e._key,t,n,r):B4(l,"updateDoc",e._key,t),rm(a,[c.toMutation(e._key,ci.exists(!0))])}function Ug(e){return rm(On(e.firestore,Br),[new Vv(e._key,ci.none())])}function Td(e,t){const n=On(e.firestore,Br),r=In(e),a=DC(e.converter,t);return rm(n,[bC(Pc(e.firestore),"addDoc",r._key,a,e.converter!==null,{}).toMutation(r._key,ci.exists(!1))]).then((()=>r))}function h0(e,...t){var n,r,a;e=oe(e);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof t[c]!="object"||uS(t[c])||(l=t[c++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(uS(t[c])){const _=t[c];t[c]=(n=_.next)===null||n===void 0?void 0:n.bind(_),t[c+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),t[c+2]=(a=_.complete)===null||a===void 0?void 0:a.bind(_)}let d,p,y;if(e instanceof Te)p=On(e.firestore,Br),y=Fd(e._key.path),d={next:_=>{t[c]&&t[c](NC(p,e,_))},error:t[c+1],complete:t[c+2]};else{const _=On(e,Zi);p=On(_.firestore,Br),y=_._query;const E=new c0(p);d={next:A=>{t[c]&&t[c](new Ha(p,E,_,A))},error:t[c+1],complete:t[c+2]},xC(e._query)}return(function(E,A,D,b){const x=new t0(b),V=new Wv(A,x,D);return E.asyncQueue.enqueueAndForget((async()=>Yv(await yd(E),V))),()=>{x.Ou(),E.asyncQueue.enqueueAndForget((async()=>Qv(await yd(E),V)))}})(Zd(p),y,f,d)}function rm(e,t){return(function(r,a){const l=new Mr;return r.asyncQueue.enqueueAndForget((async()=>T4(await N4(r),a,l))),l.promise})(Zd(e),t)}function NC(e,t,n){const r=n.docs.get(t._key),a=new c0(e);return new Fa(e,a,t._key,r,new qu(n.hasPendingWrites,n.fromCache),t.converter)}function yc(){return new n0("serverTimestamp")}(function(t,n=!0){(function(a){xl=a})(no),bi(new hi("firestore",((r,{instanceIdentifier:a,options:l})=>{const c=r.getProvider("app").getImmediate(),f=new Br(new Fk(r.getProvider("auth-internal")),new Gk(c,r.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ht(nt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cc(p.options.projectId,y)})(c,a),c);return l=Object.assign({useFetchStreams:n},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Mn(db,mb,t),Mn(db,mb,"esm2017")})();const MC="firebasestorage.googleapis.com",OC="storageBucket",X4=120*1e3,W4=600*1e3;class we extends Ri{constructor(t,n,r=0){super(jg(t),`Firebase Storage: ${n} (${jg(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,we.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return jg(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ee;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ee||(Ee={}));function jg(e){return"storage/"+e}function f0(){const e="An unknown error occurred, please check the error payload for server response.";return new we(Ee.UNKNOWN,e)}function Z4(e){return new we(Ee.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function J4(e){return new we(Ee.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function t3(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new we(Ee.UNAUTHENTICATED,e)}function e3(){return new we(Ee.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function n3(e){return new we(Ee.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function i3(){return new we(Ee.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function r3(){return new we(Ee.CANCELED,"User canceled the upload/download.")}function s3(e){return new we(Ee.INVALID_URL,"Invalid URL '"+e+"'.")}function a3(e){return new we(Ee.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function o3(){return new we(Ee.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+OC+"' property when initializing the app?")}function l3(){return new we(Ee.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function u3(){return new we(Ee.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function c3(e){return new we(Ee.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Py(e){return new we(Ee.INVALID_ARGUMENT,e)}function VC(){return new we(Ee.APP_DELETED,"The Firebase app was deleted.")}function h3(e){return new we(Ee.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tc(e,t){return new we(Ee.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Uu(e){throw new we(Ee.INTERNAL_ERROR,"Internal error: "+e)}class qn{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=qn.makeFromUrl(t,n)}catch{return new qn(t,"")}if(r.path==="")return r;throw a3(t)}static makeFromUrl(t,n){let r=null;const a="([A-Za-z0-9.\\-_]+)";function l(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+a+c,"i"),d={bucket:1,path:3};function p(K){K.path_=decodeURIComponent(K.path)}const y="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",A=new RegExp(`^https?://${_}/${y}/b/${a}/o${E}`,"i"),D={bucket:1,path:3},b=n===MC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",V=new RegExp(`^https?://${b}/${a}/${x}`,"i"),k=[{regex:f,indices:d,postModify:l},{regex:A,indices:D,postModify:p},{regex:V,indices:{bucket:1,path:2},postModify:p}];for(let K=0;K<k.length;K++){const q=k[K],Y=q.regex.exec(t);if(Y){const R=Y[q.indices.bucket];let S=Y[q.indices.path];S||(S=""),r=new qn(R,S),q.postModify(r);break}}if(r==null)throw s3(t);return r}}class f3{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function d3(e,t,n){let r=1,a=null,l=null,c=!1,f=0;function d(){return f===2}let p=!1;function y(...x){p||(p=!0,t.apply(null,x))}function _(x){a=setTimeout(()=>{a=null,e(A,d())},x)}function E(){l&&clearTimeout(l)}function A(x,...V){if(p){E();return}if(x){E(),y.call(null,x,...V);return}if(d()||c){E(),y.call(null,x,...V);return}r<64&&(r*=2);let k;f===1?(f=2,k=0):k=(r+Math.random())*1e3,_(k)}let D=!1;function b(x){D||(D=!0,E(),!p&&(a!==null?(x||(f=2),clearTimeout(a),_(0)):x||(f=1)))}return _(0),l=setTimeout(()=>{c=!0,b(!0)},n),b}function m3(e){e(!1)}function p3(e){return e!==void 0}function g3(e){return typeof e=="object"&&!Array.isArray(e)}function d0(e){return typeof e=="string"||e instanceof String}function dS(e){return m0()&&e instanceof Blob}function m0(){return typeof Blob<"u"}function mS(e,t,n,r){if(r<t)throw Py(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Py(`Invalid value for '${e}'. Expected ${n} or less.`)}function p0(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function kC(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const a=t(r)+"="+t(e[r]);n=n+a+"&"}return n=n.slice(0,-1),n}var qa;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(qa||(qa={}));function y3(e,t){const n=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,l=t.indexOf(e)!==-1;return n||a||l}class v3{constructor(t,n,r,a,l,c,f,d,p,y,_,E=!0,A=!1){this.url_=t,this.method_=n,this.headers_=r,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=_,this.retry=E,this.isUsingEmulator=A,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,b)=>{this.resolve_=D,this.reject_=b,this.start_()})}start_(){const t=(r,a)=>{if(a){r(!1,new Cf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=f=>{const d=f.loaded,p=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const f=l.getErrorCode()===qa.NO_ERROR,d=l.getStatus();if(!f||y3(d,this.additionalRetryCodes_)&&this.retry){const y=l.getErrorCode()===qa.ABORT;r(!1,new Cf(!1,null,y));return}const p=this.successCodes_.indexOf(d)!==-1;r(!0,new Cf(p,l))})},n=(r,a)=>{const l=this.resolve_,c=this.reject_,f=a.connection;if(a.wasSuccessCode)try{const d=this.callback_(f,f.getResponse());p3(d)?l(d):l()}catch(d){c(d)}else if(f!==null){const d=f0();d.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,d)):c(d)}else if(a.canceled){const d=this.appDelete_?VC():r3();c(d)}else{const d=i3();c(d)}};this.canceled_?n(!1,new Cf(!1,null,!0)):this.backoffId_=d3(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&m3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Cf{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function _3(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function T3(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function E3(e,t){t&&(e["X-Firebase-GMPID"]=t)}function w3(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function b3(e,t,n,r,a,l,c=!0,f=!1){const d=kC(e.urlParams),p=e.url+d,y=Object.assign({},e.headers);return E3(y,t),_3(y,n),T3(y,l),w3(y,r),new v3(p,e.method,y,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,c,f)}function S3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function A3(...e){const t=S3();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(m0())return new Blob(e);throw new we(Ee.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function R3(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}function C3(e){if(typeof atob>"u")throw c3("base-64");return atob(e)}const zi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bg{constructor(t,n){this.data=t,this.contentType=n||null}}function x3(e,t){switch(e){case zi.RAW:return new Bg(PC(t));case zi.BASE64:case zi.BASE64URL:return new Bg(LC(e,t));case zi.DATA_URL:return new Bg(D3(t),N3(t))}throw f0()}function PC(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const l=r,c=e.charCodeAt(++n);r=65536|(l&1023)<<10|c&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function I3(e){let t;try{t=decodeURIComponent(e)}catch{throw tc(zi.DATA_URL,"Malformed data URL.")}return PC(t)}function LC(e,t){switch(e){case zi.BASE64:{const a=t.indexOf("-")!==-1,l=t.indexOf("_")!==-1;if(a||l)throw tc(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case zi.BASE64URL:{const a=t.indexOf("+")!==-1,l=t.indexOf("/")!==-1;if(a||l)throw tc(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=C3(t)}catch(a){throw a.message.includes("polyfill")?a:tc(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}class UC{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw tc(zi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=M3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function D3(e){const t=new UC(e);return t.base64?LC(zi.BASE64,t.rest):I3(t.rest)}function N3(e){return new UC(e).contentType}function M3(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}class Ls{constructor(t,n){let r=0,a="";dS(t)?(this.data_=t,r=t.size,a=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,n){if(dS(this.data_)){const r=this.data_,a=R3(r,t,n);return a===null?null:new Ls(a)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Ls(r,!0)}}static getBlob(...t){if(m0()){const n=t.map(r=>r instanceof Ls?r.data_:r);return new Ls(A3.apply(null,n))}else{const n=t.map(c=>d0(c)?x3(zi.RAW,c).data:c.data_);let r=0;n.forEach(c=>{r+=c.byteLength});const a=new Uint8Array(r);let l=0;return n.forEach(c=>{for(let f=0;f<c.length;f++)a[l++]=c[f]}),new Ls(a,!0)}}uploadData(){return this.data_}}function jC(e){let t;try{t=JSON.parse(e)}catch{return null}return g3(t)?t:null}function O3(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function V3(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function BC(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}function k3(e,t){return t}class Tn{constructor(t,n,r,a){this.server=t,this.local=n||t,this.writable=!!r,this.xform=a||k3}}let xf=null;function P3(e){return!d0(e)||e.length<2?e:BC(e)}function zC(){if(xf)return xf;const e=[];e.push(new Tn("bucket")),e.push(new Tn("generation")),e.push(new Tn("metageneration")),e.push(new Tn("name","fullPath",!0));function t(l,c){return P3(c)}const n=new Tn("name");n.xform=t,e.push(n);function r(l,c){return c!==void 0?Number(c):c}const a=new Tn("size");return a.xform=r,e.push(a),e.push(new Tn("timeCreated")),e.push(new Tn("updated")),e.push(new Tn("md5Hash",null,!0)),e.push(new Tn("cacheControl",null,!0)),e.push(new Tn("contentDisposition",null,!0)),e.push(new Tn("contentEncoding",null,!0)),e.push(new Tn("contentLanguage",null,!0)),e.push(new Tn("contentType",null,!0)),e.push(new Tn("metadata","customMetadata",!0)),xf=e,xf}function L3(e,t){function n(){const r=e.bucket,a=e.fullPath,l=new qn(r,a);return t._makeStorageReference(l)}Object.defineProperty(e,"ref",{get:n})}function U3(e,t,n){const r={};r.type="file";const a=n.length;for(let l=0;l<a;l++){const c=n[l];r[c.local]=c.xform(r,t[c.server])}return L3(r,e),r}function FC(e,t,n){const r=jC(t);return r===null?null:U3(e,r,n)}function j3(e,t,n,r){const a=jC(t);if(a===null||!d0(a.downloadTokens))return null;const l=a.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(p=>{const y=e.bucket,_=e.fullPath,E="/b/"+c(y)+"/o/"+c(_),A=p0(E,n,r),D=kC({alt:"media",token:p});return A+D})[0]}function B3(e,t){const n={},r=t.length;for(let a=0;a<r;a++){const l=t[a];l.writable&&(n[l.server]=e[l.local])}return JSON.stringify(n)}class HC{constructor(t,n,r,a){this.url=t,this.method=n,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function qC(e){if(!e)throw f0()}function z3(e,t){function n(r,a){const l=FC(e,a,t);return qC(l!==null),l}return n}function F3(e,t){function n(r,a){const l=FC(e,a,t);return qC(l!==null),j3(l,a,e.host,e._protocol)}return n}function GC(e){function t(n,r){let a;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?a=e3():a=t3():n.getStatus()===402?a=J4(e.bucket):n.getStatus()===403?a=n3(e.path):a=r,a.status=n.getStatus(),a.serverResponse=r.serverResponse,a}return t}function H3(e){const t=GC(e);function n(r,a){let l=t(r,a);return r.getStatus()===404&&(l=Z4(e.path)),l.serverResponse=a.serverResponse,l}return n}function q3(e,t,n){const r=t.fullServerUrl(),a=p0(r,e.host,e._protocol),l="GET",c=e.maxOperationRetryTime,f=new HC(a,l,F3(e,n),c);return f.errorHandler=H3(t),f}function G3(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function K3(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=G3(null,t)),r}function $3(e,t,n,r,a){const l=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function f(){let k="";for(let K=0;K<2;K++)k=k+Math.random().toString().slice(2);return k}const d=f();c["Content-Type"]="multipart/related; boundary="+d;const p=K3(t,r,a),y=B3(p,n),_="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+d+`\r
Content-Type: `+p.contentType+`\r
\r
`,E=`\r
--`+d+"--",A=Ls.getBlob(_,r,E);if(A===null)throw l3();const D={name:p.fullPath},b=p0(l,e.host,e._protocol),x="POST",V=e.maxUploadRetryTime,P=new HC(b,x,z3(e,n),V);return P.urlParams=D,P.headers=c,P.body=A.uploadData(),P.errorHandler=GC(t),P}class Y3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qa.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qa.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qa.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,a,l){if(this.sent_)throw Uu("cannot .send() more than once");if(Zs(t)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,t,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Uu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Uu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Uu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Uu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Q3 extends Y3{initXhr(){this.xhr_.responseType="text"}}function KC(){return new Q3}class Xa{constructor(t,n){this._service=t,n instanceof qn?this._location=n:this._location=qn.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new Xa(t,n)}get root(){const t=new qn(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BC(this._location.path)}get storage(){return this._service}get parent(){const t=O3(this._location.path);if(t===null)return null;const n=new qn(this._location.bucket,t);return new Xa(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw h3(t)}}function X3(e,t,n){e._throwIfRoot("uploadBytes");const r=$3(e.storage,e._location,zC(),new Ls(t,!0),n);return e.storage.makeRequestWithTokens(r,KC).then(a=>({metadata:a,ref:e}))}function W3(e){e._throwIfRoot("getDownloadURL");const t=q3(e.storage,e._location,zC());return e.storage.makeRequestWithTokens(t,KC).then(n=>{if(n===null)throw u3();return n})}function Z3(e,t){const n=V3(e._location.path,t),r=new qn(e._location.bucket,n);return new Xa(e.storage,r)}function J3(e){return/^[A-Za-z]+:\/\//.test(e)}function t6(e,t){return new Xa(e,t)}function $C(e,t){if(e instanceof g0){const n=e;if(n._bucket==null)throw o3();const r=new Xa(n,n._bucket);return t!=null?$C(r,t):r}else return t!==void 0?Z3(e,t):e}function e6(e,t){if(t&&J3(t)){if(e instanceof g0)return t6(e,t);throw Py("To use ref(service, url), the first argument must be a Storage instance.")}else return $C(e,t)}function pS(e,t){const n=t?.[OC];return n==null?null:qn.makeFromBucketSpec(n,e)}function n6(e,t,n,r={}){e.host=`${t}:${n}`;const a=Zs(t);a&&(hv(`https://${e.host}/b`),fv("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:l}=r;l&&(e._overrideAuthToken=typeof l=="string"?l:_1(l,e.app.options.projectId))}class g0{constructor(t,n,r,a,l,c=!1){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=MC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=X4,this._maxUploadRetryTime=W4,this._requests=new Set,a!=null?this._bucket=qn.makeFromBucketSpec(a,this._host):this._bucket=pS(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=qn.makeFromBucketSpec(this._url,t):this._bucket=pS(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){mS("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){mS("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(li(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Xa(this,t)}_makeRequest(t,n,r,a,l=!0){if(this._deleted)return new f3(VC());{const c=b3(t,this._appId,r,a,n,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(t,n){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,a).getPromise()}}const gS="@firebase/storage",yS="0.13.14";const YC="storage";function QC(e,t,n){return e=oe(e),X3(e,t,n)}function XC(e){return e=oe(e),W3(e)}function WC(e,t){return e=oe(e),e6(e,t)}function i6(e=Od(),t){e=oe(e);const r=eo(e,YC).getImmediate({identifier:t}),a=g1("storage");return a&&r6(r,...a),r}function r6(e,t,n,r={}){n6(e,t,n,r)}function s6(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new g0(n,r,a,t,no)}function a6(){bi(new hi(YC,s6,"PUBLIC").setMultipleInstances(!0)),Mn(gS,yS,""),Mn(gS,yS,"esm2017")}a6();var o6="firebase",l6="11.10.0";Mn(o6,l6,"app");const ZC="@firebase/installations",y0="0.6.18";const JC=1e4,t2=`w:${y0}`,e2="FIS_v2",u6="https://firebaseinstallations.googleapis.com/v1",c6=3600*1e3,h6="installations",f6="Installations";const d6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Wa=new to(h6,f6,d6);function n2(e){return e instanceof Ri&&e.code.includes("request-failed")}function i2({projectId:e}){return`${u6}/projects/${e}/installations`}function r2(e){return{token:e.token,requestStatus:2,expiresIn:p6(e.expiresIn),creationTime:Date.now()}}async function s2(e,t){const r=(await t.json()).error;return Wa.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function a2({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function m6(e,{refreshToken:t}){const n=a2(e);return n.append("Authorization",g6(t)),n}async function o2(e){const t=await e();return t.status>=500&&t.status<600?e():t}function p6(e){return Number(e.replace("s","000"))}function g6(e){return`${e2} ${e}`}async function y6({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=i2(e),a=a2(e),l=t.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={fid:n,authVersion:e2,appId:e.appId,sdkVersion:t2},f={method:"POST",headers:a,body:JSON.stringify(c)},d=await o2(()=>fetch(r,f));if(d.ok){const p=await d.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:r2(p.authToken)}}else throw await s2("Create Installation",d)}function l2(e){return new Promise(t=>{setTimeout(t,e)})}function v6(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}const _6=/^[cdef][\w-]{21}$/,Ly="";function T6(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=E6(e);return _6.test(n)?n:Ly}catch{return Ly}}function E6(e){return v6(e).substr(0,22)}function sm(e){return`${e.appName}!${e.appId}`}const u2=new Map;function c2(e,t){const n=sm(e);h2(n,t),w6(n,t)}function h2(e,t){const n=u2.get(e);if(n)for(const r of n)r(t)}function w6(e,t){const n=b6();n&&n.postMessage({key:e,fid:t}),S6()}let ja=null;function b6(){return!ja&&"BroadcastChannel"in self&&(ja=new BroadcastChannel("[Firebase] FID Change"),ja.onmessage=e=>{h2(e.data.key,e.data.fid)}),ja}function S6(){u2.size===0&&ja&&(ja.close(),ja=null)}const A6="firebase-installations-database",R6=1,Za="firebase-installations-store";let zg=null;function v0(){return zg||(zg=Md(A6,R6,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Za)}}})),zg}async function Ed(e,t){const n=sm(e),a=(await v0()).transaction(Za,"readwrite"),l=a.objectStore(Za),c=await l.get(n);return await l.put(t,n),await a.done,(!c||c.fid!==t.fid)&&c2(e,t.fid),t}async function f2(e){const t=sm(e),r=(await v0()).transaction(Za,"readwrite");await r.objectStore(Za).delete(t),await r.done}async function am(e,t){const n=sm(e),a=(await v0()).transaction(Za,"readwrite"),l=a.objectStore(Za),c=await l.get(n),f=t(c);return f===void 0?await l.delete(n):await l.put(f,n),await a.done,f&&(!c||c.fid!==f.fid)&&c2(e,f.fid),f}async function _0(e){let t;const n=await am(e.appConfig,r=>{const a=C6(r),l=x6(e,a);return t=l.registrationPromise,l.installationEntry});return n.fid===Ly?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function C6(e){const t=e||{fid:T6(),registrationStatus:0};return d2(t)}function x6(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Wa.create("app-offline"));return{installationEntry:t,registrationPromise:a}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=I6(e,n);return{installationEntry:n,registrationPromise:r}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:D6(e)}:{installationEntry:t}}async function I6(e,t){try{const n=await y6(e,t);return Ed(e.appConfig,n)}catch(n){throw n2(n)&&n.customData.serverCode===409?await f2(e.appConfig):await Ed(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function D6(e){let t=await vS(e.appConfig);for(;t.registrationStatus===1;)await l2(100),t=await vS(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await _0(e);return r||n}return t}function vS(e){return am(e,t=>{if(!t)throw Wa.create("installation-not-found");return d2(t)})}function d2(e){return N6(e)?{fid:e.fid,registrationStatus:0}:e}function N6(e){return e.registrationStatus===1&&e.registrationTime+JC<Date.now()}async function M6({appConfig:e,heartbeatServiceProvider:t},n){const r=O6(e,n),a=m6(e,n),l=t.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={installation:{sdkVersion:t2,appId:e.appId}},f={method:"POST",headers:a,body:JSON.stringify(c)},d=await o2(()=>fetch(r,f));if(d.ok){const p=await d.json();return r2(p)}else throw await s2("Generate Auth Token",d)}function O6(e,{fid:t}){return`${i2(e)}/${t}/authTokens:generate`}async function T0(e,t=!1){let n;const r=await am(e.appConfig,l=>{if(!m2(l))throw Wa.create("not-registered");const c=l.authToken;if(!t&&P6(c))return l;if(c.requestStatus===1)return n=V6(e,t),l;{if(!navigator.onLine)throw Wa.create("app-offline");const f=U6(l);return n=k6(e,f),f}});return n?await n:r.authToken}async function V6(e,t){let n=await _S(e.appConfig);for(;n.authToken.requestStatus===1;)await l2(100),n=await _S(e.appConfig);const r=n.authToken;return r.requestStatus===0?T0(e,t):r}function _S(e){return am(e,t=>{if(!m2(t))throw Wa.create("not-registered");const n=t.authToken;return j6(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function k6(e,t){try{const n=await M6(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Ed(e.appConfig,r),n}catch(n){if(n2(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await f2(e.appConfig);else{const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Ed(e.appConfig,r)}throw n}}function m2(e){return e!==void 0&&e.registrationStatus===2}function P6(e){return e.requestStatus===2&&!L6(e)}function L6(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+c6}function U6(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function j6(e){return e.requestStatus===1&&e.requestTime+JC<Date.now()}async function B6(e){const t=e,{installationEntry:n,registrationPromise:r}=await _0(t);return r?r.catch(console.error):T0(t).catch(console.error),n.fid}async function z6(e,t=!1){const n=e;return await F6(n),(await T0(n,t)).token}async function F6(e){const{registrationPromise:t}=await _0(e);t&&await t}function H6(e){if(!e||!e.options)throw Fg("App Configuration");if(!e.name)throw Fg("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Fg(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Fg(e){return Wa.create("missing-app-config-values",{valueName:e})}const p2="installations",q6="installations-internal",G6=e=>{const t=e.getProvider("app").getImmediate(),n=H6(t),r=eo(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},K6=e=>{const t=e.getProvider("app").getImmediate(),n=eo(t,p2).getImmediate();return{getId:()=>B6(n),getToken:a=>z6(n,a)}};function $6(){bi(new hi(p2,G6,"PUBLIC")),bi(new hi(q6,K6,"PRIVATE"))}$6();Mn(ZC,y0);Mn(ZC,y0,"esm2017");const Y6="/firebase-messaging-sw.js",Q6="/firebase-cloud-messaging-push-scope",g2="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",X6="https://fcmregistrations.googleapis.com/v1",y2="google.c.a.c_id",W6="google.c.a.c_l",Z6="google.c.a.ts",J6="google.c.a.e",TS=1e4;var ES;(function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(ES||(ES={}));var vc;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(vc||(vc={}));function Rr(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function t5(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),a=new Uint8Array(r.length);for(let l=0;l<r.length;++l)a[l]=r.charCodeAt(l);return a}const Hg="fcm_token_details_db",e5=5,wS="fcm_token_object_Store";async function n5(e){if("databases"in indexedDB&&!(await indexedDB.databases()).map(l=>l.name).includes(Hg))return null;let t=null;return(await Md(Hg,e5,{upgrade:async(r,a,l,c)=>{var f;if(a<2||!r.objectStoreNames.contains(wS))return;const d=c.objectStore(wS),p=await d.index("fcmSenderId").get(e);if(await d.clear(),!!p){if(a===2){const y=p;if(!y.auth||!y.p256dh||!y.endpoint)return;t={token:y.fcmToken,createTime:(f=y.createTime)!==null&&f!==void 0?f:Date.now(),subscriptionOptions:{auth:y.auth,p256dh:y.p256dh,endpoint:y.endpoint,swScope:y.swScope,vapidKey:typeof y.vapidKey=="string"?y.vapidKey:Rr(y.vapidKey)}}}else if(a===3){const y=p;t={token:y.fcmToken,createTime:y.createTime,subscriptionOptions:{auth:Rr(y.auth),p256dh:Rr(y.p256dh),endpoint:y.endpoint,swScope:y.swScope,vapidKey:Rr(y.vapidKey)}}}else if(a===4){const y=p;t={token:y.fcmToken,createTime:y.createTime,subscriptionOptions:{auth:Rr(y.auth),p256dh:Rr(y.p256dh),endpoint:y.endpoint,swScope:y.swScope,vapidKey:Rr(y.vapidKey)}}}}}})).close(),await xg(Hg),await xg("fcm_vapid_details_db"),await xg("undefined"),i5(t)?t:null}function i5(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}const r5="firebase-messaging-database",s5=1,_c="firebase-messaging-store";let qg=null;function v2(){return qg||(qg=Md(r5,s5,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(_c)}}})),qg}async function a5(e){const t=_2(e),r=await(await v2()).transaction(_c).objectStore(_c).get(t);if(r)return r;{const a=await n5(e.appConfig.senderId);if(a)return await E0(e,a),a}}async function E0(e,t){const n=_2(e),a=(await v2()).transaction(_c,"readwrite");return await a.objectStore(_c).put(t,n),await a.done,t}function _2({appConfig:e}){return e.appId}const o5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},fn=new to("messaging","Messaging",o5);async function l5(e,t){const n=await b0(e),r=T2(t),a={method:"POST",headers:n,body:JSON.stringify(r)};let l;try{l=await(await fetch(w0(e.appConfig),a)).json()}catch(c){throw fn.create("token-subscribe-failed",{errorInfo:c?.toString()})}if(l.error){const c=l.error.message;throw fn.create("token-subscribe-failed",{errorInfo:c})}if(!l.token)throw fn.create("token-subscribe-no-token");return l.token}async function u5(e,t){const n=await b0(e),r=T2(t.subscriptionOptions),a={method:"PATCH",headers:n,body:JSON.stringify(r)};let l;try{l=await(await fetch(`${w0(e.appConfig)}/${t.token}`,a)).json()}catch(c){throw fn.create("token-update-failed",{errorInfo:c?.toString()})}if(l.error){const c=l.error.message;throw fn.create("token-update-failed",{errorInfo:c})}if(!l.token)throw fn.create("token-update-no-token");return l.token}async function c5(e,t){const r={method:"DELETE",headers:await b0(e)};try{const l=await(await fetch(`${w0(e.appConfig)}/${t}`,r)).json();if(l.error){const c=l.error.message;throw fn.create("token-unsubscribe-failed",{errorInfo:c})}}catch(a){throw fn.create("token-unsubscribe-failed",{errorInfo:a?.toString()})}}function w0({projectId:e}){return`${X6}/projects/${e}/registrations`}async function b0({appConfig:e,installations:t}){const n=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function T2({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const a={web:{endpoint:n,auth:t,p256dh:e}};return r!==g2&&(a.web.applicationPubKey=r),a}const h5=10080*60*1e3;async function f5(e){const t=await m5(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Rr(t.getKey("auth")),p256dh:Rr(t.getKey("p256dh"))},r=await a5(e.firebaseDependencies);if(r){if(p5(r.subscriptionOptions,n))return Date.now()>=r.createTime+h5?d5(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await c5(e.firebaseDependencies,r.token)}catch(a){console.warn(a)}return bS(e.firebaseDependencies,n)}else return bS(e.firebaseDependencies,n)}async function d5(e,t){try{const n=await u5(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await E0(e.firebaseDependencies,r),n}catch(n){throw n}}async function bS(e,t){const r={token:await l5(e,t),createTime:Date.now(),subscriptionOptions:t};return await E0(e,r),r.token}async function m5(e,t){const n=await e.pushManager.getSubscription();return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:t5(t)})}function p5(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,a=t.auth===e.auth,l=t.p256dh===e.p256dh;return n&&r&&a&&l}function SS(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return g5(t,e),y5(t,e),v5(t,e),t}function g5(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const a=t.notification.image;a&&(e.notification.image=a);const l=t.notification.icon;l&&(e.notification.icon=l)}function y5(e,t){t.data&&(e.data=t.data)}function v5(e,t){var n,r,a,l,c;if(!t.fcmOptions&&!(!((n=t.notification)===null||n===void 0)&&n.click_action))return;e.fcmOptions={};const f=(a=(r=t.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&a!==void 0?a:(l=t.notification)===null||l===void 0?void 0:l.click_action;f&&(e.fcmOptions.link=f);const d=(c=t.fcmOptions)===null||c===void 0?void 0:c.analytics_label;d&&(e.fcmOptions.analyticsLabel=d)}function _5(e){return typeof e=="object"&&!!e&&y2 in e}function T5(e){if(!e||!e.options)throw Gg("App Configuration Object");if(!e.name)throw Gg("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw Gg(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Gg(e){return fn.create("missing-app-config-values",{valueName:e})}class E5{constructor(t,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const a=T5(t);this.firebaseDependencies={app:t,appConfig:a,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}async function w5(e){try{e.swRegistration=await navigator.serviceWorker.register(Y6,{scope:Q6}),e.swRegistration.update().catch(()=>{}),await b5(e.swRegistration)}catch(t){throw fn.create("failed-service-worker-registration",{browserErrorMessage:t?.message})}}async function b5(e){return new Promise((t,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${TS} ms`)),TS),a=e.installing||e.waiting;e.active?(clearTimeout(r),t()):a?a.onstatechange=l=>{var c;((c=l.target)===null||c===void 0?void 0:c.state)==="activated"&&(a.onstatechange=null,clearTimeout(r),t())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}async function S5(e,t){if(!t&&!e.swRegistration&&await w5(e),!(!t&&e.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw fn.create("invalid-sw-registration");e.swRegistration=t}}async function A5(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=g2)}async function R5(e,t){if(!navigator)throw fn.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw fn.create("permission-blocked");return await A5(e,t?.vapidKey),await S5(e,t?.serviceWorkerRegistration),f5(e)}async function C5(e,t,n){const r=x5(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[y2],message_name:n[W6],message_time:n[Z6],message_device_time:Math.floor(Date.now()/1e3)})}function x5(e){switch(e){case vc.NOTIFICATION_CLICKED:return"notification_open";case vc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}async function I5(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===vc.PUSH_RECEIVED&&(typeof e.onMessageHandler=="function"?e.onMessageHandler(SS(n)):e.onMessageHandler.next(SS(n)));const r=n.data;_5(r)&&r[J6]==="1"&&await C5(e,n.messageType,r)}const AS="@firebase/messaging",RS="0.12.22";const D5=e=>{const t=new E5(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>I5(t,n)),t},N5=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:r=>R5(t,r)}};function M5(){bi(new hi("messaging",D5,"PUBLIC")),bi(new hi("messaging-internal",N5,"PRIVATE")),Mn(AS,RS),Mn(AS,RS,"esm2017")}async function E2(){try{await E1()}catch{return!1}return typeof window<"u"&&T1()&&AM()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function O5(e,t){if(!navigator)throw fn.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}function V5(e=Od()){return E2().then(t=>{if(!t)throw fn.create("unsupported-browser")},t=>{throw fn.create("indexed-db-unsupported")}),eo(oe(e),"messaging").getImmediate()}function k5(e,t){return e=oe(e),O5(e,t)}M5();const P5={apiKey:"AIzaSyAIl4vWF73TBXAyI7G_Fw9sxtD63innGag",authDomain:"photo-collage-app-9e42d.firebaseapp.com",projectId:"photo-collage-app-9e42d",storageBucket:"photo-collage-app-9e42d.firebasestorage.app",messagingSenderId:"82565536571",appId:"1:82565536571:web:de4bd1ddc0a4b8ea6bb51e",measurementId:"G-P3Y1KYM0P9"},If=["codethathat@gmail.com","marsha.o.y@gmail.com"],om=S1(P5),ju=Uk(om),w2=new Cr;w2.setCustomParameters({prompt:"select_account"});const ue=k4(om),b2=i6(om),L5=async()=>await E2()?V5(om):null,S2=M.createContext(null);function Bc(){const e=M.useContext(S2);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}function U5({children:e}){const[t,n]=M.useState(null),[r,a]=M.useState(null),[l,c]=M.useState(!0),[f,d]=M.useState(null),p=t?.email?If.includes(t.email):!1;M.useEffect(()=>CV(ju,async b=>{if(n(b),b&&b.email&&If.includes(b.email)){let x;try{const P=await gc(In(ue,"duoboard_users",b.uid));P.exists()&&(x=P.data().customPhotoURL)}catch(P){console.error("Error fetching user document:",P)}const V={uid:b.uid,email:b.email,displayName:b.displayName||"Anonymous",photoURL:b.photoURL||"",customPhotoURL:x,lastSeen:yc()};try{await Vy(In(ue,"duoboard_users",b.uid),V,{merge:!0}),a(V),d(null)}catch(P){console.error("Error updating user document:",P),d("Failed to update user profile")}}else b&&b.email&&!If.includes(b.email)?(d("Your email is not authorized to use this app."),a(null),await Mg(ju)):(a(null),d(null));c(!1)}),[]);const A={user:r,firebaseUser:t,loading:l,error:f,signInWithGoogle:async()=>{c(!0),d(null);try{const D=await $V(ju,w2);D.user.email&&!If.includes(D.user.email)&&(d("Your email is not authorized to use this app."),await Mg(ju))}catch(D){console.error("Sign in error:",D),D.code==="auth/popup-closed-by-user"?d("Sign-in was cancelled."):d("Failed to sign in. Please try again.")}finally{c(!1)}},signOut:async()=>{try{await Mg(ju),a(null),d(null)}catch(D){console.error("Sign out error:",D),d("Failed to sign out. Please try again.")}},uploadAvatar:async D=>{if(!r){d("You must be signed in to upload an avatar.");return}try{const b=WC(b2,`duoboard_avatars/${r.uid}`);await QC(b,D);const x=await XC(b);await Vy(In(ue,"duoboard_users",r.uid),{customPhotoURL:x},{merge:!0}),a(V=>V?{...V,customPhotoURL:x}:null)}catch(b){throw console.error("Error uploading avatar:",b),d("Failed to upload avatar. Please try again."),b}},isWhitelisted:p};return O.jsx(S2.Provider,{value:A,children:e})}const S0=M.createContext({});function A0(e){const t=M.useRef(null);return t.current===null&&(t.current=e()),t.current}const lm=M.createContext(null),R0=M.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class j5 extends M.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function B5({children:e,isPresent:t}){const n=M.useId(),r=M.useRef(null),a=M.useRef({width:0,height:0,top:0,left:0}),{nonce:l}=M.useContext(R0);return M.useInsertionEffect(()=>{const{width:c,height:f,top:d,left:p}=a.current;if(t||!r.current||!c||!f)return;r.current.dataset.motionPopId=n;const y=document.createElement("style");return l&&(y.nonce=l),document.head.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            top: ${d}px !important;
            left: ${p}px !important;
          }
        `),()=>{document.head.removeChild(y)}},[t]),O.jsx(j5,{isPresent:t,childRef:r,sizeRef:a,children:M.cloneElement(e,{ref:r})})}const z5=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:l,mode:c})=>{const f=A0(F5),d=M.useId(),p=M.useCallback(_=>{f.set(_,!0);for(const E of f.values())if(!E)return;r&&r()},[f,r]),y=M.useMemo(()=>({id:d,initial:t,isPresent:n,custom:a,onExitComplete:p,register:_=>(f.set(_,!1),()=>f.delete(_))}),l?[Math.random(),p]:[n,p]);return M.useMemo(()=>{f.forEach((_,E)=>f.set(E,!1))},[n]),M.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),c==="popLayout"&&(e=O.jsx(B5,{isPresent:n,children:e})),O.jsx(lm.Provider,{value:y,children:e})};function F5(){return new Map}function A2(e=!0){const t=M.useContext(lm);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,l=M.useId();M.useEffect(()=>{e&&a(l)},[e]);const c=M.useCallback(()=>e&&r&&r(l),[l,r,e]);return!n&&r?[!1,c]:[!0]}const Df=e=>e.key||"";function CS(e){const t=[];return M.Children.forEach(e,n=>{M.isValidElement(n)&&t.push(n)}),t}const C0=typeof window<"u",R2=C0?M.useLayoutEffect:M.useEffect,El=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:l="sync",propagate:c=!1})=>{const[f,d]=A2(c),p=M.useMemo(()=>CS(e),[e]),y=c&&!f?[]:p.map(Df),_=M.useRef(!0),E=M.useRef(p),A=A0(()=>new Map),[D,b]=M.useState(p),[x,V]=M.useState(p);R2(()=>{_.current=!1,E.current=p;for(let K=0;K<x.length;K++){const q=Df(x[K]);y.includes(q)?A.delete(q):A.get(q)!==!0&&A.set(q,!1)}},[x,y.length,y.join("-")]);const P=[];if(p!==D){let K=[...p];for(let q=0;q<x.length;q++){const Y=x[q],R=Df(Y);y.includes(R)||(K.splice(q,0,Y),P.push(Y))}l==="wait"&&P.length&&(K=P),V(CS(K)),b(p);return}const{forceRender:k}=M.useContext(S0);return O.jsx(O.Fragment,{children:x.map(K=>{const q=Df(K),Y=c&&!f?!1:p===x||y.includes(q),R=()=>{if(A.has(q))A.set(q,!0);else return;let S=!0;A.forEach(N=>{N||(S=!1)}),S&&(k?.(),V(E.current),c&&d?.(),r&&r())};return O.jsx(z5,{isPresent:Y,initial:!_.current||n?void 0:!1,custom:Y?void 0:t,presenceAffectsLayout:a,mode:l,onExitComplete:Y?void 0:R,children:K},q)})})},Gn=e=>e;let C2=Gn;function x0(e){let t;return()=>(t===void 0&&(t=e()),t)}const wl=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Or=e=>e*1e3,Vr=e=>e/1e3,H5={useManualTiming:!1};function q5(e){let t=new Set,n=new Set,r=!1,a=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(p){l.has(p)&&(d.schedule(p),e()),p(c)}const d={schedule:(p,y=!1,_=!1)=>{const A=_&&r?t:n;return y&&l.add(p),A.has(p)||A.add(p),p},cancel:p=>{n.delete(p),l.delete(p)},process:p=>{if(c=p,r){a=!0;return}r=!0,[t,n]=[n,t],t.forEach(f),t.clear(),r=!1,a&&(a=!1,d.process(p))}};return d}const Nf=["read","resolveKeyframes","update","preRender","render","postRender"],G5=40;function x2(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,c=Nf.reduce((V,P)=>(V[P]=q5(l),V),{}),{read:f,resolveKeyframes:d,update:p,preRender:y,render:_,postRender:E}=c,A=()=>{const V=performance.now();n=!1,a.delta=r?1e3/60:Math.max(Math.min(V-a.timestamp,G5),1),a.timestamp=V,a.isProcessing=!0,f.process(a),d.process(a),p.process(a),y.process(a),_.process(a),E.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(A))},D=()=>{n=!0,r=!0,a.isProcessing||e(A)};return{schedule:Nf.reduce((V,P)=>{const k=c[P];return V[P]=(K,q=!1,Y=!1)=>(n||D(),k.schedule(K,q,Y)),V},{}),cancel:V=>{for(let P=0;P<Nf.length;P++)c[Nf[P]].cancel(V)},state:a,steps:c}}const{schedule:ae,cancel:Qs,state:Je,steps:Kg}=x2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Gn,!0),I2=M.createContext({strict:!1}),xS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bl={};for(const e in xS)bl[e]={isEnabled:t=>xS[e].some(n=>!!t[n])};function K5(e){for(const t in e)bl[t]={...bl[t],...e[t]}}const $5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||$5.has(e)}let D2=e=>!wd(e);function Y5(e){e&&(D2=t=>t.startsWith("on")?!wd(t):e(t))}try{Y5(require("@emotion/is-prop-valid").default)}catch{}function Q5(e,t,n){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(D2(a)||n===!0&&wd(a)||!t&&!wd(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}function X5(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,a)=>a==="create"?e:(t.has(a)||t.set(a,e(a)),t.get(a))})}const um=M.createContext({});function Tc(e){return typeof e=="string"||Array.isArray(e)}function cm(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const I0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],D0=["initial",...I0];function hm(e){return cm(e.animate)||D0.some(t=>Tc(e[t]))}function N2(e){return!!(hm(e)||e.variants)}function W5(e,t){if(hm(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Tc(n)?n:void 0,animate:Tc(r)?r:void 0}}return e.inherit!==!1?t:{}}function Z5(e){const{initial:t,animate:n}=W5(e,M.useContext(um));return M.useMemo(()=>({initial:t,animate:n}),[IS(t),IS(n)])}function IS(e){return Array.isArray(e)?e.join(" "):e}const J5=Symbol.for("motionComponentSymbol");function il(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function tU(e,t,n){return M.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):il(n)&&(n.current=r))},[t])}const N0=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),eU="framerAppearId",M2="data-"+N0(eU),{schedule:M0}=x2(queueMicrotask,!1),O2=M.createContext({});function nU(e,t,n,r,a){var l,c;const{visualElement:f}=M.useContext(um),d=M.useContext(I2),p=M.useContext(lm),y=M.useContext(R0).reducedMotion,_=M.useRef(null);r=r||d.renderer,!_.current&&r&&(_.current=r(e,{visualState:t,parent:f,props:n,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:y}));const E=_.current,A=M.useContext(O2);E&&!E.projection&&a&&(E.type==="html"||E.type==="svg")&&iU(_.current,n,a,A);const D=M.useRef(!1);M.useInsertionEffect(()=>{E&&D.current&&E.update(n,p)});const b=n[M2],x=M.useRef(!!b&&!(!((l=window.MotionHandoffIsComplete)===null||l===void 0)&&l.call(window,b))&&((c=window.MotionHasOptimisedAnimation)===null||c===void 0?void 0:c.call(window,b)));return R2(()=>{E&&(D.current=!0,window.MotionIsMounted=!0,E.updateFeatures(),M0.render(E.render),x.current&&E.animationState&&E.animationState.animateChanges())}),M.useEffect(()=>{E&&(!x.current&&E.animationState&&E.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var V;(V=window.MotionHandoffMarkAsComplete)===null||V===void 0||V.call(window,b)}),x.current=!1))}),E}function iU(e,t,n,r){const{layoutId:a,layout:l,drag:c,dragConstraints:f,layoutScroll:d,layoutRoot:p}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:V2(e.parent)),e.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!c||f&&il(f),visualElement:e,animationType:typeof l=="string"?l:"both",initialPromotionConfig:r,layoutScroll:d,layoutRoot:p})}function V2(e){if(e)return e.options.allowProjection!==!1?e.projection:V2(e.parent)}function rU({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:a}){var l,c;e&&K5(e);function f(p,y){let _;const E={...M.useContext(R0),...p,layoutId:sU(p)},{isStatic:A}=E,D=Z5(p),b=r(p,A);if(!A&&C0){aU();const x=oU(E);_=x.MeasureLayout,D.visualElement=nU(a,b,E,t,x.ProjectionNode)}return O.jsxs(um.Provider,{value:D,children:[_&&D.visualElement?O.jsx(_,{visualElement:D.visualElement,...E}):null,n(a,p,tU(b,D.visualElement,y),b,A,D.visualElement)]})}f.displayName=`motion.${typeof a=="string"?a:`create(${(c=(l=a.displayName)!==null&&l!==void 0?l:a.name)!==null&&c!==void 0?c:""})`}`;const d=M.forwardRef(f);return d[J5]=a,d}function sU({layoutId:e}){const t=M.useContext(S0).id;return t&&e!==void 0?t+"-"+e:e}function aU(e,t){M.useContext(I2).strict}function oU(e){const{drag:t,layout:n}=bl;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const lU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function O0(e){return typeof e!="string"||e.includes("-")?!1:!!(lU.indexOf(e)>-1||/[A-Z]/u.test(e))}function DS(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function V0(e,t,n,r){if(typeof t=="function"){const[a,l]=DS(r);t=t(n!==void 0?n:e.custom,a,l)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,l]=DS(r);t=t(n!==void 0?n:e.custom,a,l)}return t}const Uy=e=>Array.isArray(e),uU=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),cU=e=>Uy(e)?e[e.length-1]||0:e,hn=e=>!!(e&&e.getVelocity);function Qf(e){const t=hn(e)?e.get():e;return uU(t)?t.toValue():t}function hU({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,a,l){const c={latestValues:fU(r,a,l,e),renderState:t()};return n&&(c.onMount=f=>n({props:r,current:f,...c}),c.onUpdate=f=>n(f)),c}const k2=e=>(t,n)=>{const r=M.useContext(um),a=M.useContext(lm),l=()=>hU(e,t,r,a);return n?l():A0(l)};function fU(e,t,n,r){const a={},l=r(e,{});for(const E in l)a[E]=Qf(l[E]);let{initial:c,animate:f}=e;const d=hm(e),p=N2(e);t&&p&&!d&&e.inherit!==!1&&(c===void 0&&(c=t.initial),f===void 0&&(f=t.animate));let y=n?n.initial===!1:!1;y=y||c===!1;const _=y?f:c;if(_&&typeof _!="boolean"&&!cm(_)){const E=Array.isArray(_)?_:[_];for(let A=0;A<E.length;A++){const D=V0(e,E[A]);if(D){const{transitionEnd:b,transition:x,...V}=D;for(const P in V){let k=V[P];if(Array.isArray(k)){const K=y?k.length-1:0;k=k[K]}k!==null&&(a[P]=k)}for(const P in b)a[P]=b[P]}}}return a}const Ml=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ao=new Set(Ml),P2=e=>t=>typeof t=="string"&&t.startsWith(e),L2=P2("--"),dU=P2("var(--"),k0=e=>dU(e)?mU.test(e.split("/*")[0].trim()):!1,mU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,U2=(e,t)=>t&&typeof e=="number"?t.transform(e):e,zr=(e,t,n)=>n>t?t:n<e?e:n,Ol={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ec={...Ol,transform:e=>zr(0,1,e)},Mf={...Ol,default:1},zc=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Os=zc("deg"),$i=zc("%"),Tt=zc("px"),pU=zc("vh"),gU=zc("vw"),NS={...$i,parse:e=>$i.parse(e)/100,transform:e=>$i.transform(e*100)},yU={borderWidth:Tt,borderTopWidth:Tt,borderRightWidth:Tt,borderBottomWidth:Tt,borderLeftWidth:Tt,borderRadius:Tt,radius:Tt,borderTopLeftRadius:Tt,borderTopRightRadius:Tt,borderBottomRightRadius:Tt,borderBottomLeftRadius:Tt,width:Tt,maxWidth:Tt,height:Tt,maxHeight:Tt,top:Tt,right:Tt,bottom:Tt,left:Tt,padding:Tt,paddingTop:Tt,paddingRight:Tt,paddingBottom:Tt,paddingLeft:Tt,margin:Tt,marginTop:Tt,marginRight:Tt,marginBottom:Tt,marginLeft:Tt,backgroundPositionX:Tt,backgroundPositionY:Tt},vU={rotate:Os,rotateX:Os,rotateY:Os,rotateZ:Os,scale:Mf,scaleX:Mf,scaleY:Mf,scaleZ:Mf,skew:Os,skewX:Os,skewY:Os,distance:Tt,translateX:Tt,translateY:Tt,translateZ:Tt,x:Tt,y:Tt,z:Tt,perspective:Tt,transformPerspective:Tt,opacity:Ec,originX:NS,originY:NS,originZ:Tt},MS={...Ol,transform:Math.round},P0={...yU,...vU,zIndex:MS,size:Tt,fillOpacity:Ec,strokeOpacity:Ec,numOctaves:MS},_U={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TU=Ml.length;function EU(e,t,n){let r="",a=!0;for(let l=0;l<TU;l++){const c=Ml[l],f=e[c];if(f===void 0)continue;let d=!0;if(typeof f=="number"?d=f===(c.startsWith("scale")?1:0):d=parseFloat(f)===0,!d||n){const p=U2(f,P0[c]);if(!d){a=!1;const y=_U[c]||c;r+=`${y}(${p}) `}n&&(t[c]=p)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}function L0(e,t,n){const{style:r,vars:a,transformOrigin:l}=e;let c=!1,f=!1;for(const d in t){const p=t[d];if(ao.has(d)){c=!0;continue}else if(L2(d)){a[d]=p;continue}else{const y=U2(p,P0[d]);d.startsWith("origin")?(f=!0,l[d]=y):r[d]=y}}if(t.transform||(c||n?r.transform=EU(t,e.transform,n):r.transform&&(r.transform="none")),f){const{originX:d="50%",originY:p="50%",originZ:y=0}=l;r.transformOrigin=`${d} ${p} ${y}`}}const wU={offset:"stroke-dashoffset",array:"stroke-dasharray"},bU={offset:"strokeDashoffset",array:"strokeDasharray"};function SU(e,t,n=1,r=0,a=!0){e.pathLength=1;const l=a?wU:bU;e[l.offset]=Tt.transform(-r);const c=Tt.transform(t),f=Tt.transform(n);e[l.array]=`${c} ${f}`}function OS(e,t,n){return typeof e=="string"?e:Tt.transform(t+n*e)}function AU(e,t,n){const r=OS(t,e.x,e.width),a=OS(n,e.y,e.height);return`${r} ${a}`}function U0(e,{attrX:t,attrY:n,attrScale:r,originX:a,originY:l,pathLength:c,pathSpacing:f=1,pathOffset:d=0,...p},y,_){if(L0(e,p,_),y){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:E,style:A,dimensions:D}=e;E.transform&&(D&&(A.transform=E.transform),delete E.transform),D&&(a!==void 0||l!==void 0||A.transform)&&(A.transformOrigin=AU(D,a!==void 0?a:.5,l!==void 0?l:.5)),t!==void 0&&(E.x=t),n!==void 0&&(E.y=n),r!==void 0&&(E.scale=r),c!==void 0&&SU(E,c,f,d,!1)}const j0=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),j2=()=>({...j0(),attrs:{}}),B0=e=>typeof e=="string"&&e.toLowerCase()==="svg";function B2(e,{style:t,vars:n},r,a){Object.assign(e.style,t,a&&a.getProjectionStyles(r));for(const l in n)e.style.setProperty(l,n[l])}const z2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function F2(e,t,n,r){B2(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(z2.has(a)?a:N0(a),t.attrs[a])}const bd={};function RU(e){Object.assign(bd,e)}function H2(e,{layout:t,layoutId:n}){return ao.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!bd[e]||e==="opacity")}function z0(e,t,n){var r;const{style:a}=e,l={};for(const c in a)(hn(a[c])||t.style&&hn(t.style[c])||H2(c,e)||((r=n?.getValue(c))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(l[c]=a[c]);return l}function q2(e,t,n){const r=z0(e,t,n);for(const a in e)if(hn(e[a])||hn(t[a])){const l=Ml.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[l]=e[a]}return r}function CU(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const VS=["x","y","width","height","cx","cy","r"],xU={useVisualState:k2({scrapeMotionValuesFromProps:q2,createRenderState:j2,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:a})=>{if(!n)return;let l=!!e.drag;if(!l){for(const f in a)if(ao.has(f)){l=!0;break}}if(!l)return;let c=!t;if(t)for(let f=0;f<VS.length;f++){const d=VS[f];e[d]!==t[d]&&(c=!0)}c&&ae.read(()=>{CU(n,r),ae.render(()=>{U0(r,a,B0(n.tagName),e.transformTemplate),F2(n,r)})})}})},IU={useVisualState:k2({scrapeMotionValuesFromProps:z0,createRenderState:j0})};function G2(e,t,n){for(const r in t)!hn(t[r])&&!H2(r,n)&&(e[r]=t[r])}function DU({transformTemplate:e},t){return M.useMemo(()=>{const n=j0();return L0(n,t,e),Object.assign({},n.vars,n.style)},[t])}function NU(e,t){const n=e.style||{},r={};return G2(r,n,e),Object.assign(r,DU(e,t)),r}function MU(e,t){const n={},r=NU(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function OU(e,t,n,r){const a=M.useMemo(()=>{const l=j2();return U0(l,t,B0(r),e.transformTemplate),{...l.attrs,style:{...l.style}}},[t]);if(e.style){const l={};G2(l,e.style,e),a.style={...l,...a.style}}return a}function VU(e=!1){return(n,r,a,{latestValues:l},c)=>{const d=(O0(n)?OU:MU)(r,l,c,n),p=Q5(r,typeof n=="string",e),y=n!==M.Fragment?{...p,...d,ref:a}:{},{children:_}=r,E=M.useMemo(()=>hn(_)?_.get():_,[_]);return M.createElement(n,{...y,children:E})}}function kU(e,t){return function(r,{forwardMotionProps:a}={forwardMotionProps:!1}){const c={...O0(r)?xU:IU,preloadedFeatures:e,useRender:VU(a),createVisualElement:t,Component:r};return rU(c)}}function K2(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function fm(e,t,n){const r=e.getProps();return V0(r,t,n!==void 0?n:r.custom,e)}const PU=x0(()=>window.ScrollTimeline!==void 0);class LU{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(a=>{if(PU()&&a.attachTimeline)return a.attachTimeline(t);if(typeof n=="function")return n(a)});return()=>{r.forEach((a,l)=>{a&&a(),this.animations[l].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class UU extends LU{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function F0(e,t){return e?e[t]||e.default||e:void 0}const jy=2e4;function $2(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<jy;)t+=n,r=e.next(t);return t>=jy?1/0:t}function H0(e){return typeof e=="function"}function kS(e,t){e.timeline=t,e.onfinish=null}const q0=e=>Array.isArray(e)&&typeof e[0]=="number",jU={linearEasing:void 0};function BU(e,t){const n=x0(e);return()=>{var r;return(r=jU[t])!==null&&r!==void 0?r:n()}}const Sd=BU(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Y2=(e,t,n=10)=>{let r="";const a=Math.max(Math.round(t/n),2);for(let l=0;l<a;l++)r+=e(wl(0,a-1,l))+", ";return`linear(${r.substring(0,r.length-2)})`};function Q2(e){return!!(typeof e=="function"&&Sd()||!e||typeof e=="string"&&(e in By||Sd())||q0(e)||Array.isArray(e)&&e.every(Q2))}const Ku=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,By={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ku([0,.65,.55,1]),circOut:Ku([.55,0,1,.45]),backIn:Ku([.31,.01,.66,-.59]),backOut:Ku([.33,1.53,.69,.99])};function X2(e,t){if(e)return typeof e=="function"&&Sd()?Y2(e,t):q0(e)?Ku(e):Array.isArray(e)?e.map(n=>X2(n,t)||By.easeOut):By[e]}const _i={x:!1,y:!1};function W2(){return _i.x||_i.y}function zU(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let a=document;const l=(r=void 0)!==null&&r!==void 0?r:a.querySelectorAll(e);return l?Array.from(l):[]}return Array.from(e)}function Z2(e,t){const n=zU(e),r=new AbortController,a={passive:!0,...t,signal:r.signal};return[n,a,()=>r.abort()]}function PS(e){return t=>{t.pointerType==="touch"||W2()||e(t)}}function FU(e,t,n={}){const[r,a,l]=Z2(e,n),c=PS(f=>{const{target:d}=f,p=t(f);if(typeof p!="function"||!d)return;const y=PS(_=>{p(_),d.removeEventListener("pointerleave",y)});d.addEventListener("pointerleave",y,a)});return r.forEach(f=>{f.addEventListener("pointerenter",c,a)}),l}const J2=(e,t)=>t?e===t?!0:J2(e,t.parentElement):!1,G0=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,HU=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function qU(e){return HU.has(e.tagName)||e.tabIndex!==-1}const $u=new WeakSet;function LS(e){return t=>{t.key==="Enter"&&e(t)}}function $g(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const GU=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=LS(()=>{if($u.has(n))return;$g(n,"down");const a=LS(()=>{$g(n,"up")}),l=()=>$g(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",l,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function US(e){return G0(e)&&!W2()}function KU(e,t,n={}){const[r,a,l]=Z2(e,n),c=f=>{const d=f.currentTarget;if(!US(f)||$u.has(d))return;$u.add(d);const p=t(f),y=(A,D)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",E),!(!US(A)||!$u.has(d))&&($u.delete(d),typeof p=="function"&&p(A,{success:D}))},_=A=>{y(A,n.useGlobalTarget||J2(d,A.target))},E=A=>{y(A,!1)};window.addEventListener("pointerup",_,a),window.addEventListener("pointercancel",E,a)};return r.forEach(f=>{!qU(f)&&f.getAttribute("tabindex")===null&&(f.tabIndex=0),(n.useGlobalTarget?window:f).addEventListener("pointerdown",c,a),f.addEventListener("focus",p=>GU(p,a),a)}),l}function $U(e){return e==="x"||e==="y"?_i[e]?null:(_i[e]=!0,()=>{_i[e]=!1}):_i.x||_i.y?null:(_i.x=_i.y=!0,()=>{_i.x=_i.y=!1})}const tx=new Set(["width","height","top","left","right","bottom",...Ml]);let Xf;function YU(){Xf=void 0}const Yi={now:()=>(Xf===void 0&&Yi.set(Je.isProcessing||H5.useManualTiming?Je.timestamp:performance.now()),Xf),set:e=>{Xf=e,queueMicrotask(YU)}};function K0(e,t){e.indexOf(t)===-1&&e.push(t)}function $0(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Y0{constructor(){this.subscriptions=[]}add(t){return K0(this.subscriptions,t),()=>$0(this.subscriptions,t)}notify(t,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,r);else for(let l=0;l<a;l++){const c=this.subscriptions[l];c&&c(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function ex(e,t){return t?e*(1e3/t):0}const jS=30,QU=e=>!isNaN(parseFloat(e));class XU{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,a=!0)=>{const l=Yi.now();this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Yi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=QU(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Y0);const r=this.events[t].add(n);return t==="change"?()=>{r(),ae.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Yi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>jS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,jS);return ex(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wc(e,t){return new XU(e,t)}function WU(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,wc(n))}function ZU(e,t){const n=fm(e,t);let{transitionEnd:r={},transition:a={},...l}=n||{};l={...l,...r};for(const c in l){const f=cU(l[c]);WU(e,c,f)}}function JU(e){return!!(hn(e)&&e.add)}function zy(e,t){const n=e.getValue("willChange");if(JU(n))return n.add(t)}function nx(e){return e.props[M2]}const ix=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,tj=1e-7,ej=12;function nj(e,t,n,r,a){let l,c,f=0;do c=t+(n-t)/2,l=ix(c,r,a)-e,l>0?n=c:t=c;while(Math.abs(l)>tj&&++f<ej);return c}function Fc(e,t,n,r){if(e===t&&n===r)return Gn;const a=l=>nj(l,0,1,e,n);return l=>l===0||l===1?l:ix(a(l),t,r)}const rx=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,sx=e=>t=>1-e(1-t),ax=Fc(.33,1.53,.69,.99),Q0=sx(ax),ox=rx(Q0),lx=e=>(e*=2)<1?.5*Q0(e):.5*(2-Math.pow(2,-10*(e-1))),X0=e=>1-Math.sin(Math.acos(e)),ux=sx(X0),cx=rx(X0),hx=e=>/^0[^.\s]+$/u.test(e);function ij(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||hx(e):!0}const ec=e=>Math.round(e*1e5)/1e5,W0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function rj(e){return e==null}const sj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Z0=(e,t)=>n=>!!(typeof n=="string"&&sj.test(n)&&n.startsWith(e)||t&&!rj(n)&&Object.prototype.hasOwnProperty.call(n,t)),fx=(e,t,n)=>r=>{if(typeof r!="string")return r;const[a,l,c,f]=r.match(W0);return{[e]:parseFloat(a),[t]:parseFloat(l),[n]:parseFloat(c),alpha:f!==void 0?parseFloat(f):1}},aj=e=>zr(0,255,e),Yg={...Ol,transform:e=>Math.round(aj(e))},Ba={test:Z0("rgb","red"),parse:fx("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Yg.transform(e)+", "+Yg.transform(t)+", "+Yg.transform(n)+", "+ec(Ec.transform(r))+")"};function oj(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const Fy={test:Z0("#"),parse:oj,transform:Ba.transform},rl={test:Z0("hsl","hue"),parse:fx("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+$i.transform(ec(t))+", "+$i.transform(ec(n))+", "+ec(Ec.transform(r))+")"},ln={test:e=>Ba.test(e)||Fy.test(e)||rl.test(e),parse:e=>Ba.test(e)?Ba.parse(e):rl.test(e)?rl.parse(e):Fy.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ba.transform(e):rl.transform(e)},lj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function uj(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(W0))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(lj))===null||n===void 0?void 0:n.length)||0)>0}const dx="number",mx="color",cj="var",hj="var(",BS="${}",fj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function bc(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let l=0;const f=t.replace(fj,d=>(ln.test(d)?(r.color.push(l),a.push(mx),n.push(ln.parse(d))):d.startsWith(hj)?(r.var.push(l),a.push(cj),n.push(d)):(r.number.push(l),a.push(dx),n.push(parseFloat(d))),++l,BS)).split(BS);return{values:n,split:f,indexes:r,types:a}}function px(e){return bc(e).values}function gx(e){const{split:t,types:n}=bc(e),r=t.length;return a=>{let l="";for(let c=0;c<r;c++)if(l+=t[c],a[c]!==void 0){const f=n[c];f===dx?l+=ec(a[c]):f===mx?l+=ln.transform(a[c]):l+=a[c]}return l}}const dj=e=>typeof e=="number"?0:e;function mj(e){const t=px(e);return gx(e)(t.map(dj))}const Xs={test:uj,parse:px,createTransformer:gx,getAnimatableNone:mj},pj=new Set(["brightness","contrast","saturate","opacity"]);function gj(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(W0)||[];if(!r)return e;const a=n.replace(r,"");let l=pj.has(t)?1:0;return r!==n&&(l*=100),t+"("+l+a+")"}const yj=/\b([a-z-]*)\(.*?\)/gu,Hy={...Xs,getAnimatableNone:e=>{const t=e.match(yj);return t?t.map(gj).join(" "):e}},vj={...P0,color:ln,backgroundColor:ln,outlineColor:ln,fill:ln,stroke:ln,borderColor:ln,borderTopColor:ln,borderRightColor:ln,borderBottomColor:ln,borderLeftColor:ln,filter:Hy,WebkitFilter:Hy},J0=e=>vj[e];function yx(e,t){let n=J0(e);return n!==Hy&&(n=Xs),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const _j=new Set(["auto","none","0"]);function Tj(e,t,n){let r=0,a;for(;r<e.length&&!a;){const l=e[r];typeof l=="string"&&!_j.has(l)&&bc(l).values.length&&(a=e[r]),r++}if(a&&n)for(const l of t)e[l]=yx(n,a)}const zS=e=>e===Ol||e===Tt,FS=(e,t)=>parseFloat(e.split(", ")[t]),HS=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const a=r.match(/^matrix3d\((.+)\)$/u);if(a)return FS(a[1],t);{const l=r.match(/^matrix\((.+)\)$/u);return l?FS(l[1],e):0}},Ej=new Set(["x","y","z"]),wj=Ml.filter(e=>!Ej.has(e));function bj(e){const t=[];return wj.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Sl={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:HS(4,13),y:HS(5,14)};Sl.translateX=Sl.x;Sl.translateY=Sl.y;const Ga=new Set;let qy=!1,Gy=!1;function vx(){if(Gy){const e=Array.from(Ga).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const a=bj(r);a.length&&(n.set(r,a),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([l,c])=>{var f;(f=r.getValue(l))===null||f===void 0||f.set(c)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Gy=!1,qy=!1,Ga.forEach(e=>e.complete()),Ga.clear()}function _x(){Ga.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Gy=!0)})}function Sj(){_x(),vx()}class t_{constructor(t,n,r,a,l,c=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=a,this.element=l,this.isAsync=c}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ga.add(this),qy||(qy=!0,ae.read(_x),ae.resolveKeyframes(vx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:a}=this;for(let l=0;l<t.length;l++)if(t[l]===null)if(l===0){const c=a?.get(),f=t[t.length-1];if(c!==void 0)t[0]=c;else if(r&&n){const d=r.readValue(n,f);d!=null&&(t[0]=d)}t[0]===void 0&&(t[0]=f),a&&c===void 0&&a.set(t[0])}else t[l]=t[l-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ga.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ga.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Tx=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Aj=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Rj(e){const t=Aj.exec(e);if(!t)return[,];const[,n,r,a]=t;return[`--${n??r}`,a]}function Ex(e,t,n=1){const[r,a]=Rj(e);if(!r)return;const l=window.getComputedStyle(t).getPropertyValue(r);if(l){const c=l.trim();return Tx(c)?parseFloat(c):c}return k0(a)?Ex(a,t,n+1):a}const wx=e=>t=>t.test(e),Cj={test:e=>e==="auto",parse:e=>e},bx=[Ol,Tt,$i,Os,gU,pU,Cj],qS=e=>bx.find(wx(e));class Sx extends t_{constructor(t,n,r,a,l){super(t,n,r,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let p=t[d];if(typeof p=="string"&&(p=p.trim(),k0(p))){const y=Ex(p,n.current);y!==void 0&&(t[d]=y),d===t.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!tx.has(r)||t.length!==2)return;const[a,l]=t,c=qS(a),f=qS(l);if(c!==f)if(zS(c)&&zS(f))for(let d=0;d<t.length;d++){const p=t[d];typeof p=="string"&&(t[d]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let a=0;a<t.length;a++)ij(t[a])&&r.push(a);r.length&&Tj(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Sl[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(r,a).jump(a,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:a}=this;if(!n||!n.current)return;const l=n.getValue(r);l&&l.jump(this.measuredOrigin,!1);const c=a.length-1,f=a[c];a[c]=Sl[r](n.measureViewportBox(),window.getComputedStyle(n.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([d,p])=>{n.getValue(d).set(p)}),this.resolveNoneKeyframes()}}const GS=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Xs.test(e)||e==="0")&&!e.startsWith("url("));function xj(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Ij(e,t,n,r){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const l=e[e.length-1],c=GS(a,t),f=GS(l,t);return!c||!f?!1:xj(e)||(n==="spring"||H0(n))&&r}const Dj=e=>e!==null;function dm(e,{repeat:t,repeatType:n="loop"},r){const a=e.filter(Dj),l=t&&n!=="loop"&&t%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const Nj=40;class Ax{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:c="loop",...f}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Yi.now(),this.options={autoplay:t,delay:n,type:r,repeat:a,repeatDelay:l,repeatType:c,...f},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Nj?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Sj(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Yi.now(),this.hasAttemptedResolve=!0;const{name:r,type:a,velocity:l,delay:c,onComplete:f,onUpdate:d,isGenerator:p}=this.options;if(!p&&!Ij(t,r,a,l))if(c)this.options.duration=0;else{d&&d(dm(t,this.options,n)),f&&f(),this.resolveFinishedPromise();return}const y=this.initPlayback(t,n);y!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...y},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const de=(e,t,n)=>e+(t-e)*n;function Qg(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Mj({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let a=0,l=0,c=0;if(!t)a=l=c=n;else{const f=n<.5?n*(1+t):n+t-n*t,d=2*n-f;a=Qg(d,f,e+1/3),l=Qg(d,f,e),c=Qg(d,f,e-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:r}}function Ad(e,t){return n=>n>0?t:e}const Xg=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},Oj=[Fy,Ba,rl],Vj=e=>Oj.find(t=>t.test(e));function KS(e){const t=Vj(e);if(!t)return!1;let n=t.parse(e);return t===rl&&(n=Mj(n)),n}const $S=(e,t)=>{const n=KS(e),r=KS(t);if(!n||!r)return Ad(e,t);const a={...n};return l=>(a.red=Xg(n.red,r.red,l),a.green=Xg(n.green,r.green,l),a.blue=Xg(n.blue,r.blue,l),a.alpha=de(n.alpha,r.alpha,l),Ba.transform(a))},kj=(e,t)=>n=>t(e(n)),Hc=(...e)=>e.reduce(kj),Ky=new Set(["none","hidden"]);function Pj(e,t){return Ky.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Lj(e,t){return n=>de(e,t,n)}function e_(e){return typeof e=="number"?Lj:typeof e=="string"?k0(e)?Ad:ln.test(e)?$S:Bj:Array.isArray(e)?Rx:typeof e=="object"?ln.test(e)?$S:Uj:Ad}function Rx(e,t){const n=[...e],r=n.length,a=e.map((l,c)=>e_(l)(l,t[c]));return l=>{for(let c=0;c<r;c++)n[c]=a[c](l);return n}}function Uj(e,t){const n={...e,...t},r={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(r[a]=e_(e[a])(e[a],t[a]));return a=>{for(const l in r)n[l]=r[l](a);return n}}function jj(e,t){var n;const r=[],a={color:0,var:0,number:0};for(let l=0;l<t.values.length;l++){const c=t.types[l],f=e.indexes[c][a[c]],d=(n=e.values[f])!==null&&n!==void 0?n:0;r[l]=d,a[c]++}return r}const Bj=(e,t)=>{const n=Xs.createTransformer(t),r=bc(e),a=bc(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?Ky.has(e)&&!a.values.length||Ky.has(t)&&!r.values.length?Pj(e,t):Hc(Rx(jj(r,a),a.values),n):Ad(e,t)};function Cx(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?de(e,t,n):e_(e)(e,t)}const zj=5;function xx(e,t,n){const r=Math.max(t-zj,0);return ex(n-e(r),t-r)}const _e={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Wg=.001;function Fj({duration:e=_e.duration,bounce:t=_e.bounce,velocity:n=_e.velocity,mass:r=_e.mass}){let a,l,c=1-t;c=zr(_e.minDamping,_e.maxDamping,c),e=zr(_e.minDuration,_e.maxDuration,Vr(e)),c<1?(a=p=>{const y=p*c,_=y*e,E=y-n,A=$y(p,c),D=Math.exp(-_);return Wg-E/A*D},l=p=>{const _=p*c*e,E=_*n+n,A=Math.pow(c,2)*Math.pow(p,2)*e,D=Math.exp(-_),b=$y(Math.pow(p,2),c);return(-a(p)+Wg>0?-1:1)*((E-A)*D)/b}):(a=p=>{const y=Math.exp(-p*e),_=(p-n)*e+1;return-Wg+y*_},l=p=>{const y=Math.exp(-p*e),_=(n-p)*(e*e);return y*_});const f=5/e,d=qj(a,l,f);if(e=Or(e),isNaN(d))return{stiffness:_e.stiffness,damping:_e.damping,duration:e};{const p=Math.pow(d,2)*r;return{stiffness:p,damping:c*2*Math.sqrt(r*p),duration:e}}}const Hj=12;function qj(e,t,n){let r=n;for(let a=1;a<Hj;a++)r=r-e(r)/t(r);return r}function $y(e,t){return e*Math.sqrt(1-t*t)}const Gj=["duration","bounce"],Kj=["stiffness","damping","mass"];function YS(e,t){return t.some(n=>e[n]!==void 0)}function $j(e){let t={velocity:_e.velocity,stiffness:_e.stiffness,damping:_e.damping,mass:_e.mass,isResolvedFromDuration:!1,...e};if(!YS(e,Kj)&&YS(e,Gj))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,l=2*zr(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:_e.mass,stiffness:a,damping:l}}else{const n=Fj(e);t={...t,...n,mass:_e.mass},t.isResolvedFromDuration=!0}return t}function Ix(e=_e.visualDuration,t=_e.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const l=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],f={done:!1,value:l},{stiffness:d,damping:p,mass:y,duration:_,velocity:E,isResolvedFromDuration:A}=$j({...n,velocity:-Vr(n.velocity||0)}),D=E||0,b=p/(2*Math.sqrt(d*y)),x=c-l,V=Vr(Math.sqrt(d/y)),P=Math.abs(x)<5;r||(r=P?_e.restSpeed.granular:_e.restSpeed.default),a||(a=P?_e.restDelta.granular:_e.restDelta.default);let k;if(b<1){const q=$y(V,b);k=Y=>{const R=Math.exp(-b*V*Y);return c-R*((D+b*V*x)/q*Math.sin(q*Y)+x*Math.cos(q*Y))}}else if(b===1)k=q=>c-Math.exp(-V*q)*(x+(D+V*x)*q);else{const q=V*Math.sqrt(b*b-1);k=Y=>{const R=Math.exp(-b*V*Y),S=Math.min(q*Y,300);return c-R*((D+b*V*x)*Math.sinh(S)+q*x*Math.cosh(S))/q}}const K={calculatedDuration:A&&_||null,next:q=>{const Y=k(q);if(A)f.done=q>=_;else{let R=0;b<1&&(R=q===0?Or(D):xx(k,q,Y));const S=Math.abs(R)<=r,N=Math.abs(c-Y)<=a;f.done=S&&N}return f.value=f.done?c:Y,f},toString:()=>{const q=Math.min($2(K),jy),Y=Y2(R=>K.next(q*R).value,q,30);return q+"ms "+Y}};return K}function QS({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:c,min:f,max:d,restDelta:p=.5,restSpeed:y}){const _=e[0],E={done:!1,value:_},A=S=>f!==void 0&&S<f||d!==void 0&&S>d,D=S=>f===void 0?d:d===void 0||Math.abs(f-S)<Math.abs(d-S)?f:d;let b=n*t;const x=_+b,V=c===void 0?x:c(x);V!==x&&(b=V-_);const P=S=>-b*Math.exp(-S/r),k=S=>V+P(S),K=S=>{const N=P(S),U=k(S);E.done=Math.abs(N)<=p,E.value=E.done?V:U};let q,Y;const R=S=>{A(E.value)&&(q=S,Y=Ix({keyframes:[E.value,D(E.value)],velocity:xx(k,S,E.value),damping:a,stiffness:l,restDelta:p,restSpeed:y}))};return R(0),{calculatedDuration:null,next:S=>{let N=!1;return!Y&&q===void 0&&(N=!0,K(S),R(S)),q!==void 0&&S>=q?Y.next(S-q):(!N&&K(S),E)}}}const Yj=Fc(.42,0,1,1),Qj=Fc(0,0,.58,1),Dx=Fc(.42,0,.58,1),Xj=e=>Array.isArray(e)&&typeof e[0]!="number",Wj={linear:Gn,easeIn:Yj,easeInOut:Dx,easeOut:Qj,circIn:X0,circInOut:cx,circOut:ux,backIn:Q0,backInOut:ox,backOut:ax,anticipate:lx},XS=e=>{if(q0(e)){C2(e.length===4);const[t,n,r,a]=e;return Fc(t,n,r,a)}else if(typeof e=="string")return Wj[e];return e};function Zj(e,t,n){const r=[],a=n||Cx,l=e.length-1;for(let c=0;c<l;c++){let f=a(e[c],e[c+1]);if(t){const d=Array.isArray(t)?t[c]||Gn:t;f=Hc(d,f)}r.push(f)}return r}function Jj(e,t,{clamp:n=!0,ease:r,mixer:a}={}){const l=e.length;if(C2(l===t.length),l===1)return()=>t[0];if(l===2&&t[0]===t[1])return()=>t[1];const c=e[0]===e[1];e[0]>e[l-1]&&(e=[...e].reverse(),t=[...t].reverse());const f=Zj(t,r,a),d=f.length,p=y=>{if(c&&y<e[0])return t[0];let _=0;if(d>1)for(;_<e.length-2&&!(y<e[_+1]);_++);const E=wl(e[_],e[_+1],y);return f[_](E)};return n?y=>p(zr(e[0],e[l-1],y)):p}function t9(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=wl(0,t,r);e.push(de(n,1,a))}}function e9(e){const t=[0];return t9(t,e.length-1),t}function n9(e,t){return e.map(n=>n*t)}function i9(e,t){return e.map(()=>t||Dx).splice(0,e.length-1)}function Rd({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const a=Xj(r)?r.map(XS):XS(r),l={done:!1,value:t[0]},c=n9(n&&n.length===t.length?n:e9(t),e),f=Jj(c,t,{ease:Array.isArray(a)?a:i9(t,a)});return{calculatedDuration:e,next:d=>(l.value=f(d),l.done=d>=e,l)}}const r9=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ae.update(t,!0),stop:()=>Qs(t),now:()=>Je.isProcessing?Je.timestamp:Yi.now()}},s9={decay:QS,inertia:QS,tween:Rd,keyframes:Rd,spring:Ix},a9=e=>e/100;class n_ extends Ax{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:n,motionValue:r,element:a,keyframes:l}=this.options,c=a?.KeyframeResolver||t_,f=(d,p)=>this.onKeyframesResolved(d,p);this.resolver=new c(l,f,n,r,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:l,velocity:c=0}=this.options,f=H0(n)?n:s9[n]||Rd;let d,p;f!==Rd&&typeof t[0]!="number"&&(d=Hc(a9,Cx(t[0],t[1])),t=[0,100]);const y=f({...this.options,keyframes:t});l==="mirror"&&(p=f({...this.options,keyframes:[...t].reverse(),velocity:-c})),y.calculatedDuration===null&&(y.calculatedDuration=$2(y));const{calculatedDuration:_}=y,E=_+a,A=E*(r+1)-a;return{generator:y,mirroredGenerator:p,mapPercentToKeyframes:d,calculatedDuration:_,resolvedDuration:E,totalDuration:A}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:a,generator:l,mirroredGenerator:c,mapPercentToKeyframes:f,keyframes:d,calculatedDuration:p,totalDuration:y,resolvedDuration:_}=r;if(this.startTime===null)return l.next(0);const{delay:E,repeat:A,repeatType:D,repeatDelay:b,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-y/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const V=this.currentTime-E*(this.speed>=0?1:-1),P=this.speed>=0?V<0:V>y;this.currentTime=Math.max(V,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let k=this.currentTime,K=l;if(A){const S=Math.min(this.currentTime,y)/_;let N=Math.floor(S),U=S%1;!U&&S>=1&&(U=1),U===1&&N--,N=Math.min(N,A+1),!!(N%2)&&(D==="reverse"?(U=1-U,b&&(U-=b/_)):D==="mirror"&&(K=c)),k=zr(0,1,U)*_}const q=P?{done:!1,value:d[0]}:K.next(k);f&&(q.value=f(q.value));let{done:Y}=q;!P&&p!==null&&(Y=this.speed>=0?this.currentTime>=y:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return R&&a!==void 0&&(q.value=dm(d,this.options,a)),x&&x(q.value),R&&this.finish(),q}get duration(){const{resolved:t}=this;return t?Vr(t.calculatedDuration):0}get time(){return Vr(this.currentTime)}set time(t){t=Or(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Vr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=r9,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(l=>this.tick(l))),n&&n();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const o9=new Set(["opacity","clipPath","filter","transform"]);function l9(e,t,n,{delay:r=0,duration:a=300,repeat:l=0,repeatType:c="loop",ease:f="easeInOut",times:d}={}){const p={[t]:n};d&&(p.offset=d);const y=X2(f,a);return Array.isArray(y)&&(p.easing=y),e.animate(p,{delay:r,duration:a,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"})}const u9=x0(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Cd=10,c9=2e4;function h9(e){return H0(e.type)||e.type==="spring"||!Q2(e.ease)}function f9(e,t){const n=new n_({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const a=[];let l=0;for(;!r.done&&l<c9;)r=n.sample(l),a.push(r.value),l+=Cd;return{times:void 0,keyframes:a,duration:l-Cd,ease:"linear"}}const Nx={anticipate:lx,backInOut:ox,circInOut:cx};function d9(e){return e in Nx}class WS extends Ax{constructor(t){super(t);const{name:n,motionValue:r,element:a,keyframes:l}=this.options;this.resolver=new Sx(l,(c,f)=>this.onKeyframesResolved(c,f),n,r,a),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:a,ease:l,type:c,motionValue:f,name:d,startTime:p}=this.options;if(!f.owner||!f.owner.current)return!1;if(typeof l=="string"&&Sd()&&d9(l)&&(l=Nx[l]),h9(this.options)){const{onComplete:_,onUpdate:E,motionValue:A,element:D,...b}=this.options,x=f9(t,b);t=x.keyframes,t.length===1&&(t[1]=t[0]),r=x.duration,a=x.times,l=x.ease,c="keyframes"}const y=l9(f.owner.current,d,t,{...this.options,duration:r,times:a,ease:l});return y.startTime=p??this.calcStartTime(),this.pendingTimeline?(kS(y,this.pendingTimeline),this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:_}=this.options;f.set(dm(t,this.options,n)),_&&_(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:r,times:a,type:c,ease:l,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Vr(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Vr(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Or(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Gn;const{animation:r}=n;kS(r,t)}return Gn}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:a,type:l,ease:c,times:f}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:y,onComplete:_,element:E,...A}=this.options,D=new n_({...A,keyframes:r,duration:a,type:l,ease:c,times:f,isGenerator:!0}),b=Or(this.time);p.setWithVelocity(D.sample(b-Cd).value,D.sample(b).value,Cd)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:a,repeatType:l,damping:c,type:f}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:p}=n.owner.getProps();return u9()&&r&&o9.has(r)&&!d&&!p&&!a&&l!=="mirror"&&c!==0&&f!=="inertia"}}const m9={type:"spring",stiffness:500,damping:25,restSpeed:10},p9=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),g9={type:"keyframes",duration:.8},y9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},v9=(e,{keyframes:t})=>t.length>2?g9:ao.has(e)?e.startsWith("scale")?p9(t[1]):m9:y9;function _9({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:l,repeatType:c,repeatDelay:f,from:d,elapsed:p,...y}){return!!Object.keys(y).length}const i_=(e,t,n,r={},a,l)=>c=>{const f=F0(r,e)||{},d=f.delay||r.delay||0;let{elapsed:p=0}=r;p=p-Or(d);let y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...f,delay:-p,onUpdate:E=>{t.set(E),f.onUpdate&&f.onUpdate(E)},onComplete:()=>{c(),f.onComplete&&f.onComplete()},name:e,motionValue:t,element:l?void 0:a};_9(f)||(y={...y,...v9(e,y)}),y.duration&&(y.duration=Or(y.duration)),y.repeatDelay&&(y.repeatDelay=Or(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let _=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(_=!0)),_&&!l&&t.get()!==void 0){const E=dm(y.keyframes,f);if(E!==void 0)return ae.update(()=>{y.onUpdate(E),y.onComplete()}),new UU([])}return!l&&WS.supports(y)?new WS(y):new n_(y)};function T9({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Mx(e,t,{delay:n=0,transitionOverride:r,type:a}={}){var l;let{transition:c=e.getDefaultTransition(),transitionEnd:f,...d}=t;r&&(c=r);const p=[],y=a&&e.animationState&&e.animationState.getState()[a];for(const _ in d){const E=e.getValue(_,(l=e.latestValues[_])!==null&&l!==void 0?l:null),A=d[_];if(A===void 0||y&&T9(y,_))continue;const D={delay:n,...F0(c||{},_)};let b=!1;if(window.MotionHandoffAnimation){const V=nx(e);if(V){const P=window.MotionHandoffAnimation(V,_,ae);P!==null&&(D.startTime=P,b=!0)}}zy(e,_),E.start(i_(_,E,A,e.shouldReduceMotion&&tx.has(_)?{type:!1}:D,e,b));const x=E.animation;x&&p.push(x)}return f&&Promise.all(p).then(()=>{ae.update(()=>{f&&ZU(e,f)})}),p}function Yy(e,t,n={}){var r;const a=fm(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:l=e.getDefaultTransition()||{}}=a||{};n.transitionOverride&&(l=n.transitionOverride);const c=a?()=>Promise.all(Mx(e,a,n)):()=>Promise.resolve(),f=e.variantChildren&&e.variantChildren.size?(p=0)=>{const{delayChildren:y=0,staggerChildren:_,staggerDirection:E}=l;return E9(e,t,y+p,_,E,n)}:()=>Promise.resolve(),{when:d}=l;if(d){const[p,y]=d==="beforeChildren"?[c,f]:[f,c];return p().then(()=>y())}else return Promise.all([c(),f(n.delay)])}function E9(e,t,n=0,r=0,a=1,l){const c=[],f=(e.variantChildren.size-1)*r,d=a===1?(p=0)=>p*r:(p=0)=>f-p*r;return Array.from(e.variantChildren).sort(w9).forEach((p,y)=>{p.notify("AnimationStart",t),c.push(Yy(p,t,{...l,delay:n+d(y)}).then(()=>p.notify("AnimationComplete",t)))}),Promise.all(c)}function w9(e,t){return e.sortNodePosition(t)}function b9(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(l=>Yy(e,l,n));r=Promise.all(a)}else if(typeof t=="string")r=Yy(e,t,n);else{const a=typeof t=="function"?fm(e,t,n.custom):t;r=Promise.all(Mx(e,a,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const S9=D0.length;function Ox(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Ox(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<S9;n++){const r=D0[n],a=e.props[r];(Tc(a)||a===!1)&&(t[r]=a)}return t}const A9=[...I0].reverse(),R9=I0.length;function C9(e){return t=>Promise.all(t.map(({animation:n,options:r})=>b9(e,n,r)))}function x9(e){let t=C9(e),n=ZS(),r=!0;const a=d=>(p,y)=>{var _;const E=fm(e,y,d==="exit"?(_=e.presenceContext)===null||_===void 0?void 0:_.custom:void 0);if(E){const{transition:A,transitionEnd:D,...b}=E;p={...p,...b,...D}}return p};function l(d){t=d(e)}function c(d){const{props:p}=e,y=Ox(e.parent)||{},_=[],E=new Set;let A={},D=1/0;for(let x=0;x<R9;x++){const V=A9[x],P=n[V],k=p[V]!==void 0?p[V]:y[V],K=Tc(k),q=V===d?P.isActive:null;q===!1&&(D=x);let Y=k===y[V]&&k!==p[V]&&K;if(Y&&r&&e.manuallyAnimateOnMount&&(Y=!1),P.protectedKeys={...A},!P.isActive&&q===null||!k&&!P.prevProp||cm(k)||typeof k=="boolean")continue;const R=I9(P.prevProp,k);let S=R||V===d&&P.isActive&&!Y&&K||x>D&&K,N=!1;const U=Array.isArray(k)?k:[k];let B=U.reduce(a(V),{});q===!1&&(B={});const{prevResolvedValues:H={}}=P,L={...H,...B},Xt=ot=>{S=!0,E.has(ot)&&(N=!0,E.delete(ot)),P.needsAnimating[ot]=!0;const ft=e.getValue(ot);ft&&(ft.liveStyle=!1)};for(const ot in L){const ft=B[ot],It=H[ot];if(A.hasOwnProperty(ot))continue;let Dt=!1;Uy(ft)&&Uy(It)?Dt=!K2(ft,It):Dt=ft!==It,Dt?ft!=null?Xt(ot):E.add(ot):ft!==void 0&&E.has(ot)?Xt(ot):P.protectedKeys[ot]=!0}P.prevProp=k,P.prevResolvedValues=B,P.isActive&&(A={...A,...B}),r&&e.blockInitialAnimation&&(S=!1),S&&(!(Y&&R)||N)&&_.push(...U.map(ot=>({animation:ot,options:{type:V}})))}if(E.size){const x={};E.forEach(V=>{const P=e.getBaseTarget(V),k=e.getValue(V);k&&(k.liveStyle=!0),x[V]=P??null}),_.push({animation:x})}let b=!!_.length;return r&&(p.initial===!1||p.initial===p.animate)&&!e.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(_):Promise.resolve()}function f(d,p){var y;if(n[d].isActive===p)return Promise.resolve();(y=e.variantChildren)===null||y===void 0||y.forEach(E=>{var A;return(A=E.animationState)===null||A===void 0?void 0:A.setActive(d,p)}),n[d].isActive=p;const _=c(d);for(const E in n)n[E].protectedKeys={};return _}return{animateChanges:c,setActive:f,setAnimateFunction:l,getState:()=>n,reset:()=>{n=ZS(),r=!0}}}function I9(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!K2(t,e):!1}function Ma(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ZS(){return{animate:Ma(!0),whileInView:Ma(),whileHover:Ma(),whileTap:Ma(),whileDrag:Ma(),whileFocus:Ma(),exit:Ma()}}class ea{constructor(t){this.isMounted=!1,this.node=t}update(){}}class D9 extends ea{constructor(t){super(t),t.animationState||(t.animationState=x9(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();cm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let N9=0;class M9 extends ea{constructor(){super(...arguments),this.id=N9++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const O9={animation:{Feature:D9},exit:{Feature:M9}};function Sc(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function qc(e){return{point:{x:e.pageX,y:e.pageY}}}const V9=e=>t=>G0(t)&&e(t,qc(t));function nc(e,t,n,r){return Sc(e,t,V9(n),r)}const JS=(e,t)=>Math.abs(e-t);function k9(e,t){const n=JS(e.x,t.x),r=JS(e.y,t.y);return Math.sqrt(n**2+r**2)}class Vx{constructor(t,n,{transformPagePoint:r,contextWindow:a,dragSnapToOrigin:l=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Jg(this.lastMoveEventInfo,this.history),E=this.startEvent!==null,A=k9(_.offset,{x:0,y:0})>=3;if(!E&&!A)return;const{point:D}=_,{timestamp:b}=Je;this.history.push({...D,timestamp:b});const{onStart:x,onMove:V}=this.handlers;E||(x&&x(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,_)},this.handlePointerMove=(_,E)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Zg(E,this.transformPagePoint),ae.update(this.updatePoint,!0)},this.handlePointerUp=(_,E)=>{this.end();const{onEnd:A,onSessionEnd:D,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Jg(_.type==="pointercancel"?this.lastMoveEventInfo:Zg(E,this.transformPagePoint),this.history);this.startEvent&&A&&A(_,x),D&&D(_,x)},!G0(t))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=r,this.contextWindow=a||window;const c=qc(t),f=Zg(c,this.transformPagePoint),{point:d}=f,{timestamp:p}=Je;this.history=[{...d,timestamp:p}];const{onSessionStart:y}=n;y&&y(t,Jg(f,this.history)),this.removeListeners=Hc(nc(this.contextWindow,"pointermove",this.handlePointerMove),nc(this.contextWindow,"pointerup",this.handlePointerUp),nc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Qs(this.updatePoint)}}function Zg(e,t){return t?{point:t(e.point)}:e}function tA(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Jg({point:e},t){return{point:e,delta:tA(e,kx(t)),offset:tA(e,P9(t)),velocity:L9(t,.1)}}function P9(e){return e[0]}function kx(e){return e[e.length-1]}function L9(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=kx(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>Or(t)));)n--;if(!r)return{x:0,y:0};const l=Vr(a.timestamp-r.timestamp);if(l===0)return{x:0,y:0};const c={x:(a.x-r.x)/l,y:(a.y-r.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}const Px=1e-4,U9=1-Px,j9=1+Px,Lx=.01,B9=0-Lx,z9=0+Lx;function $n(e){return e.max-e.min}function F9(e,t,n){return Math.abs(e-t)<=n}function eA(e,t,n,r=.5){e.origin=r,e.originPoint=de(t.min,t.max,e.origin),e.scale=$n(n)/$n(t),e.translate=de(n.min,n.max,e.origin)-e.originPoint,(e.scale>=U9&&e.scale<=j9||isNaN(e.scale))&&(e.scale=1),(e.translate>=B9&&e.translate<=z9||isNaN(e.translate))&&(e.translate=0)}function ic(e,t,n,r){eA(e.x,t.x,n.x,r?r.originX:void 0),eA(e.y,t.y,n.y,r?r.originY:void 0)}function nA(e,t,n){e.min=n.min+t.min,e.max=e.min+$n(t)}function H9(e,t,n){nA(e.x,t.x,n.x),nA(e.y,t.y,n.y)}function iA(e,t,n){e.min=t.min-n.min,e.max=e.min+$n(t)}function rc(e,t,n){iA(e.x,t.x,n.x),iA(e.y,t.y,n.y)}function q9(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?de(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?de(n,e,r.max):Math.min(e,n)),e}function rA(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function G9(e,{top:t,left:n,bottom:r,right:a}){return{x:rA(e.x,n,a),y:rA(e.y,t,r)}}function sA(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function K9(e,t){return{x:sA(e.x,t.x),y:sA(e.y,t.y)}}function $9(e,t){let n=.5;const r=$n(e),a=$n(t);return a>r?n=wl(t.min,t.max-r,e.min):r>a&&(n=wl(e.min,e.max-a,t.min)),zr(0,1,n)}function Y9(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Qy=.35;function Q9(e=Qy){return e===!1?e=0:e===!0&&(e=Qy),{x:aA(e,"left","right"),y:aA(e,"top","bottom")}}function aA(e,t,n){return{min:oA(e,t),max:oA(e,n)}}function oA(e,t){return typeof e=="number"?e:e[t]||0}const lA=()=>({translate:0,scale:1,origin:0,originPoint:0}),sl=()=>({x:lA(),y:lA()}),uA=()=>({min:0,max:0}),Re=()=>({x:uA(),y:uA()});function oi(e){return[e("x"),e("y")]}function Ux({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function X9({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function W9(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ty(e){return e===void 0||e===1}function Xy({scale:e,scaleX:t,scaleY:n}){return!ty(e)||!ty(t)||!ty(n)}function Va(e){return Xy(e)||jx(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function jx(e){return cA(e.x)||cA(e.y)}function cA(e){return e&&e!=="0%"}function xd(e,t,n){const r=e-n,a=t*r;return n+a}function hA(e,t,n,r,a){return a!==void 0&&(e=xd(e,a,r)),xd(e,n,r)+t}function Wy(e,t=0,n=1,r,a){e.min=hA(e.min,t,n,r,a),e.max=hA(e.max,t,n,r,a)}function Bx(e,{x:t,y:n}){Wy(e.x,t.translate,t.scale,t.originPoint),Wy(e.y,n.translate,n.scale,n.originPoint)}const fA=.999999999999,dA=1.0000000000001;function Z9(e,t,n,r=!1){const a=n.length;if(!a)return;t.x=t.y=1;let l,c;for(let f=0;f<a;f++){l=n[f],c=l.projectionDelta;const{visualElement:d}=l.options;d&&d.props.style&&d.props.style.display==="contents"||(r&&l.options.layoutScroll&&l.scroll&&l!==l.root&&ol(e,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,Bx(e,c)),r&&Va(l.latestValues)&&ol(e,l.latestValues))}t.x<dA&&t.x>fA&&(t.x=1),t.y<dA&&t.y>fA&&(t.y=1)}function al(e,t){e.min=e.min+t,e.max=e.max+t}function mA(e,t,n,r,a=.5){const l=de(e.min,e.max,a);Wy(e,t,n,l,r)}function ol(e,t){mA(e.x,t.x,t.scaleX,t.scale,t.originX),mA(e.y,t.y,t.scaleY,t.scale,t.originY)}function zx(e,t){return Ux(W9(e.getBoundingClientRect(),t))}function J9(e,t,n){const r=zx(e,n),{scroll:a}=t;return a&&(al(r.x,a.offset.x),al(r.y,a.offset.y)),r}const Fx=({current:e})=>e?e.ownerDocument.defaultView:null,tB=new WeakMap;class eB{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Re(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=y=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(qc(y).point)},l=(y,_)=>{const{drag:E,dragPropagation:A,onDragStart:D}=this.getProps();if(E&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$U(E),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),oi(x=>{let V=this.getAxisMotionValue(x).get()||0;if($i.test(V)){const{projection:P}=this.visualElement;if(P&&P.layout){const k=P.layout.layoutBox[x];k&&(V=$n(k)*(parseFloat(V)/100))}}this.originPoint[x]=V}),D&&ae.postRender(()=>D(y,_)),zy(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},c=(y,_)=>{const{dragPropagation:E,dragDirectionLock:A,onDirectionLock:D,onDrag:b}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:x}=_;if(A&&this.currentDirection===null){this.currentDirection=nB(x),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",_.point,x),this.updateAxis("y",_.point,x),this.visualElement.render(),b&&b(y,_)},f=(y,_)=>this.stop(y,_),d=()=>oi(y=>{var _;return this.getAnimationState(y)==="paused"&&((_=this.getAxisMotionValue(y).animation)===null||_===void 0?void 0:_.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new Vx(t,{onSessionStart:a,onStart:l,onMove:c,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:Fx(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&ae.postRender(()=>l(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:a}=this.getProps();if(!r||!Of(t,a,this.currentDirection))return;const l=this.getAxisMotionValue(t);let c=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(c=q9(c,this.constraints[t],this.elastic[t])),l.set(c)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,l=this.constraints;n&&il(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&a?this.constraints=G9(a.layoutBox,n):this.constraints=!1,this.elastic=Q9(r),l!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&oi(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=Y9(a.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!il(t))return!1;const r=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=J9(r,a.root,this.visualElement.getTransformPagePoint());let c=K9(a.layout.layoutBox,l);if(n){const f=n(X9(c));this.hasMutatedConstraints=!!f,f&&(c=Ux(f))}return c}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:f}=this.getProps(),d=this.constraints||{},p=oi(y=>{if(!Of(y,n,this.currentDirection))return;let _=d&&d[y]||{};c&&(_={min:0,max:0});const E=a?200:1e6,A=a?40:1e7,D={type:"inertia",velocity:r?t[y]:0,bounceStiffness:E,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...l,..._};return this.startAxisValueAnimation(y,D)});return Promise.all(p).then(f)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return zy(this.visualElement,t),r.start(i_(t,r,0,n,this.visualElement,!1))}stopAnimation(){oi(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){oi(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){oi(n=>{const{drag:r}=this.getProps();if(!Of(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(n);if(a&&a.layout){const{min:c,max:f}=a.layout.layoutBox[n];l.set(t[n]-de(c,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!il(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};oi(c=>{const f=this.getAxisMotionValue(c);if(f&&this.constraints!==!1){const d=f.get();a[c]=$9({min:d,max:d},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),oi(c=>{if(!Of(c,t,null))return;const f=this.getAxisMotionValue(c),{min:d,max:p}=this.constraints[c];f.set(de(d,p,a[c]))})}addListeners(){if(!this.visualElement.current)return;tB.set(this.visualElement,this);const t=this.visualElement.current,n=nc(t,"pointerdown",d=>{const{drag:p,dragListener:y=!0}=this.getProps();p&&y&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();il(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ae.read(r);const c=Sc(window,"resize",()=>this.scalePositionWithinConstraints()),f=a.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(oi(y=>{const _=this.getAxisMotionValue(y);_&&(this.originPoint[y]+=d[y].translate,_.set(_.get()+d[y].translate))}),this.visualElement.render())}));return()=>{c(),n(),l(),f&&f()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:c=Qy,dragMomentum:f=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:l,dragElastic:c,dragMomentum:f}}}function Of(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function nB(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class iB extends ea{constructor(t){super(t),this.removeGroupControls=Gn,this.removeListeners=Gn,this.controls=new eB(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Gn}unmount(){this.removeGroupControls(),this.removeListeners()}}const pA=e=>(t,n)=>{e&&ae.postRender(()=>e(t,n))};class rB extends ea{constructor(){super(...arguments),this.removePointerDownListener=Gn}onPointerDown(t){this.session=new Vx(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Fx(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:pA(t),onStart:pA(n),onMove:r,onEnd:(l,c)=>{delete this.session,a&&ae.postRender(()=>a(l,c))}}}mount(){this.removePointerDownListener=nc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Wf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gA(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Bu={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Tt.test(e))e=parseFloat(e);else return e;const n=gA(e,t.target.x),r=gA(e,t.target.y);return`${n}% ${r}%`}},sB={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,a=Xs.parse(e);if(a.length>5)return r;const l=Xs.createTransformer(e),c=typeof a[0]!="number"?1:0,f=n.x.scale*t.x,d=n.y.scale*t.y;a[0+c]/=f,a[1+c]/=d;const p=de(f,d,.5);return typeof a[2+c]=="number"&&(a[2+c]/=p),typeof a[3+c]=="number"&&(a[3+c]/=p),l(a)}};class aB extends M.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:l}=t;RU(oB),l&&(n.group&&n.group.add(l),r&&r.register&&a&&r.register(l),l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),Wf.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:a,isPresent:l}=this.props,c=r.projection;return c&&(c.isPresent=l,a||t.layoutDependency!==n||n===void 0?c.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?c.promote():c.relegate()||ae.postRender(()=>{const f=c.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),M0.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Hx(e){const[t,n]=A2(),r=M.useContext(S0);return O.jsx(aB,{...e,layoutGroup:r,switchLayoutGroup:M.useContext(O2),isPresent:t,safeToRemove:n})}const oB={borderRadius:{...Bu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bu,borderTopRightRadius:Bu,borderBottomLeftRadius:Bu,borderBottomRightRadius:Bu,boxShadow:sB};function lB(e,t,n){const r=hn(e)?e:wc(e);return r.start(i_("",r,t,n)),r.animation}function uB(e){return e instanceof SVGElement&&e.tagName!=="svg"}const cB=(e,t)=>e.depth-t.depth;class hB{constructor(){this.children=[],this.isDirty=!1}add(t){K0(this.children,t),this.isDirty=!0}remove(t){$0(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(cB),this.isDirty=!1,this.children.forEach(t)}}function fB(e,t){const n=Yi.now(),r=({timestamp:a})=>{const l=a-n;l>=t&&(Qs(r),e(l-t))};return ae.read(r,!0),()=>Qs(r)}const qx=["TopLeft","TopRight","BottomLeft","BottomRight"],dB=qx.length,yA=e=>typeof e=="string"?parseFloat(e):e,vA=e=>typeof e=="number"||Tt.test(e);function mB(e,t,n,r,a,l){a?(e.opacity=de(0,n.opacity!==void 0?n.opacity:1,pB(r)),e.opacityExit=de(t.opacity!==void 0?t.opacity:1,0,gB(r))):l&&(e.opacity=de(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let c=0;c<dB;c++){const f=`border${qx[c]}Radius`;let d=_A(t,f),p=_A(n,f);if(d===void 0&&p===void 0)continue;d||(d=0),p||(p=0),d===0||p===0||vA(d)===vA(p)?(e[f]=Math.max(de(yA(d),yA(p),r),0),($i.test(p)||$i.test(d))&&(e[f]+="%")):e[f]=p}(t.rotate||n.rotate)&&(e.rotate=de(t.rotate||0,n.rotate||0,r))}function _A(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const pB=Gx(0,.5,ux),gB=Gx(.5,.95,Gn);function Gx(e,t,n){return r=>r<e?0:r>t?1:n(wl(e,t,r))}function TA(e,t){e.min=t.min,e.max=t.max}function ai(e,t){TA(e.x,t.x),TA(e.y,t.y)}function EA(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function wA(e,t,n,r,a){return e-=t,e=xd(e,1/n,r),a!==void 0&&(e=xd(e,1/a,r)),e}function yB(e,t=0,n=1,r=.5,a,l=e,c=e){if($i.test(t)&&(t=parseFloat(t),t=de(c.min,c.max,t/100)-c.min),typeof t!="number")return;let f=de(l.min,l.max,r);e===l&&(f-=t),e.min=wA(e.min,t,n,f,a),e.max=wA(e.max,t,n,f,a)}function bA(e,t,[n,r,a],l,c){yB(e,t[n],t[r],t[a],t.scale,l,c)}const vB=["x","scaleX","originX"],_B=["y","scaleY","originY"];function SA(e,t,n,r){bA(e.x,t,vB,n?n.x:void 0,r?r.x:void 0),bA(e.y,t,_B,n?n.y:void 0,r?r.y:void 0)}function AA(e){return e.translate===0&&e.scale===1}function Kx(e){return AA(e.x)&&AA(e.y)}function RA(e,t){return e.min===t.min&&e.max===t.max}function TB(e,t){return RA(e.x,t.x)&&RA(e.y,t.y)}function CA(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function $x(e,t){return CA(e.x,t.x)&&CA(e.y,t.y)}function xA(e){return $n(e.x)/$n(e.y)}function IA(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class EB{constructor(){this.members=[]}add(t){K0(this.members,t),t.scheduleRender()}remove(t){if($0(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){r=l;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function wB(e,t,n){let r="";const a=e.x.translate/t.x,l=e.y.translate/t.y,c=n?.z||0;if((a||l||c)&&(r=`translate3d(${a}px, ${l}px, ${c}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:p,rotate:y,rotateX:_,rotateY:E,skewX:A,skewY:D}=n;p&&(r=`perspective(${p}px) ${r}`),y&&(r+=`rotate(${y}deg) `),_&&(r+=`rotateX(${_}deg) `),E&&(r+=`rotateY(${E}deg) `),A&&(r+=`skewX(${A}deg) `),D&&(r+=`skewY(${D}deg) `)}const f=e.x.scale*t.x,d=e.y.scale*t.y;return(f!==1||d!==1)&&(r+=`scale(${f}, ${d})`),r||"none"}const ka={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Yu=typeof window<"u"&&window.MotionDebug!==void 0,ey=["","X","Y","Z"],bB={visibility:"hidden"},DA=1e3;let SB=0;function ny(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Yx(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=nx(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:l}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ae,!(a||l))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Yx(r)}function Qx({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(c={},f=t?.()){this.id=SB++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Yu&&(ka.totalNodes=ka.resolvedTargetDeltas=ka.recalculatedProjection=0),this.nodes.forEach(CB),this.nodes.forEach(MB),this.nodes.forEach(OB),this.nodes.forEach(xB),Yu&&window.MotionDebug.record(ka)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new hB)}addEventListener(c,f){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new Y0),this.eventHandlers.get(c).add(f)}notifyListeners(c,...f){const d=this.eventHandlers.get(c);d&&d.notify(...f)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,f=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=uB(c),this.instance=c;const{layoutId:d,layout:p,visualElement:y}=this.options;if(y&&!y.current&&y.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),f&&(p||d)&&(this.isLayoutDirty=!0),e){let _;const E=()=>this.root.updateBlockedByResize=!1;e(c,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=fB(E,250),Wf.hasAnimatedSinceResize&&(Wf.hasAnimatedSinceResize=!1,this.nodes.forEach(MA))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&y&&(d||p)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:E,hasRelativeTargetChanged:A,layout:D})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||y.getDefaultTransition()||UB,{onLayoutAnimationStart:x,onLayoutAnimationComplete:V}=y.getProps(),P=!this.targetLayout||!$x(this.targetLayout,D)||A,k=!E&&A;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||k||E&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,k);const K={...F0(b,"layout"),onPlay:x,onComplete:V};(y.shouldReduceMotion||this.options.layoutRoot)&&(K.delay=0,K.type=!1),this.startAnimation(K)}else E||MA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=D})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Qs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(VB),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Yx(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const _=this.path[y];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:f,layout:d}=this.options;if(f===void 0&&!d)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(NA);return}this.isUpdating||this.nodes.forEach(DB),this.isUpdating=!1,this.nodes.forEach(NB),this.nodes.forEach(AB),this.nodes.forEach(RB),this.clearAllSnapshots();const f=Yi.now();Je.delta=zr(0,1e3/60,f-Je.timestamp),Je.timestamp=f,Je.isProcessing=!0,Kg.update.process(Je),Kg.preRender.process(Je),Kg.render.process(Je),Je.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,M0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(IB),this.sharedNodes.forEach(kB)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ae.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ae.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Re(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(f=!1),f){const d=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!Kx(this.projectionDelta),d=this.getTransformTemplate(),p=d?d(this.latestValues,""):void 0,y=p!==this.prevTransformTemplateValue;c&&(f||Va(this.latestValues)||y)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const f=this.measurePageBox();let d=this.removeElementScroll(f);return c&&(d=this.removeTransform(d)),jB(d),{animationId:this.root.animationId,measuredBox:f,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:f}=this.options;if(!f)return Re();const d=f.measureViewportBox();if(!(((c=this.scroll)===null||c===void 0?void 0:c.wasRoot)||this.path.some(BB))){const{scroll:y}=this.root;y&&(al(d.x,y.offset.x),al(d.y,y.offset.y))}return d}removeElementScroll(c){var f;const d=Re();if(ai(d,c),!((f=this.scroll)===null||f===void 0)&&f.wasRoot)return d;for(let p=0;p<this.path.length;p++){const y=this.path[p],{scroll:_,options:E}=y;y!==this.root&&_&&E.layoutScroll&&(_.wasRoot&&ai(d,c),al(d.x,_.offset.x),al(d.y,_.offset.y))}return d}applyTransform(c,f=!1){const d=Re();ai(d,c);for(let p=0;p<this.path.length;p++){const y=this.path[p];!f&&y.options.layoutScroll&&y.scroll&&y!==y.root&&ol(d,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Va(y.latestValues)&&ol(d,y.latestValues)}return Va(this.latestValues)&&ol(d,this.latestValues),d}removeTransform(c){const f=Re();ai(f,c);for(let d=0;d<this.path.length;d++){const p=this.path[d];if(!p.instance||!Va(p.latestValues))continue;Xy(p.latestValues)&&p.updateSnapshot();const y=Re(),_=p.measurePageBox();ai(y,_),SA(f,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,y)}return Va(this.latestValues)&&SA(f,this.latestValues),f}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Je.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var f;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==d;if(!(c||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_,layoutId:E}=this.options;if(!(!this.layout||!(_||E))){if(this.resolvedRelativeTargetAt=Je.timestamp,!this.targetDelta&&!this.relativeTarget){const A=this.getClosestProjectingParent();A&&A.layout&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Re(),this.relativeTargetOrigin=Re(),rc(this.relativeTargetOrigin,this.layout.layoutBox,A.layout.layoutBox),ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Re(),this.targetWithTransforms=Re()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),H9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ai(this.target,this.layout.layoutBox),Bx(this.target,this.targetDelta)):ai(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const A=this.getClosestProjectingParent();A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Re(),this.relativeTargetOrigin=Re(),rc(this.relativeTargetOrigin,this.target,A.target),ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Yu&&ka.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Xy(this.parent.latestValues)||jx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const f=this.getLead(),d=!!this.resumingFrom||this!==f;let p=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(p=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===Je.timestamp&&(p=!1),p)return;const{layout:y,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||_))return;ai(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,A=this.treeScale.y;Z9(this.layoutCorrected,this.treeScale,this.path,d),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=Re());const{target:D}=f;if(!D){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(EA(this.prevProjectionDelta.x,this.projectionDelta.x),EA(this.prevProjectionDelta.y,this.projectionDelta.y)),ic(this.projectionDelta,this.layoutCorrected,D,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==A||!IA(this.projectionDelta.x,this.prevProjectionDelta.x)||!IA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",D)),Yu&&ka.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var f;if((f=this.options.visualElement)===null||f===void 0||f.scheduleRender(),c){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=sl(),this.projectionDelta=sl(),this.projectionDeltaWithTransform=sl()}setAnimationOrigin(c,f=!1){const d=this.snapshot,p=d?d.latestValues:{},y={...this.latestValues},_=sl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const E=Re(),A=d?d.source:void 0,D=this.layout?this.layout.source:void 0,b=A!==D,x=this.getStack(),V=!x||x.members.length<=1,P=!!(b&&!V&&this.options.crossfade===!0&&!this.path.some(LB));this.animationProgress=0;let k;this.mixTargetDelta=K=>{const q=K/1e3;OA(_.x,c.x,q),OA(_.y,c.y,q),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rc(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),PB(this.relativeTarget,this.relativeTargetOrigin,E,q),k&&TB(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Re()),ai(k,this.relativeTarget)),b&&(this.animationValues=y,mB(y,p,this.latestValues,q,P,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ae.update(()=>{Wf.hasAnimatedSinceResize=!0,this.currentAnimation=lB(0,DA,{...c,onUpdate:f=>{this.mixTargetDelta(f),c.onUpdate&&c.onUpdate(f)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(DA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:f,target:d,layout:p,latestValues:y}=c;if(!(!f||!d||!p)){if(this!==c&&this.layout&&p&&Xx(this.options.animationType,this.layout.layoutBox,p.layoutBox)){d=this.target||Re();const _=$n(this.layout.layoutBox.x);d.x.min=c.target.x.min,d.x.max=d.x.min+_;const E=$n(this.layout.layoutBox.y);d.y.min=c.target.y.min,d.y.max=d.y.min+E}ai(f,d),ol(f,y),ic(this.projectionDeltaWithTransform,this.layoutCorrected,f,y)}}registerSharedNode(c,f){this.sharedNodes.has(c)||this.sharedNodes.set(c,new EB),this.sharedNodes.get(c).add(f);const p=f.options.initialPromotionConfig;f.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(f):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:f}=this.options;return f?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:f}=this.options;return f?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:f,preserveFollowOpacity:d}={}){const p=this.getStack();p&&p.promote(this,d),c&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let f=!1;const{latestValues:d}=c;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(f=!0),!f)return;const p={};d.z&&ny("z",c,p,this.animationValues);for(let y=0;y<ey.length;y++)ny(`rotate${ey[y]}`,c,p,this.animationValues),ny(`skew${ey[y]}`,c,p,this.animationValues);c.render();for(const y in p)c.setStaticValue(y,p[y]),this.animationValues&&(this.animationValues[y]=p[y]);c.scheduleRender()}getProjectionStyles(c){var f,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return bB;const p={visibility:""},y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=Qf(c?.pointerEvents)||"",p.transform=y?y(this.latestValues,""):"none",p;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Qf(c?.pointerEvents)||""),this.hasProjected&&!Va(this.latestValues)&&(b.transform=y?y({},""):"none",this.hasProjected=!1),b}const E=_.animationValues||_.latestValues;this.applyTransformsToTarget(),p.transform=wB(this.projectionDeltaWithTransform,this.treeScale,E),y&&(p.transform=y(E,p.transform));const{x:A,y:D}=this.projectionDelta;p.transformOrigin=`${A.origin*100}% ${D.origin*100}% 0`,_.animationValues?p.opacity=_===this?(d=(f=E.opacity)!==null&&f!==void 0?f:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:E.opacityExit:p.opacity=_===this?E.opacity!==void 0?E.opacity:"":E.opacityExit!==void 0?E.opacityExit:0;for(const b in bd){if(E[b]===void 0)continue;const{correct:x,applyTo:V}=bd[b],P=p.transform==="none"?E[b]:x(E[b],_);if(V){const k=V.length;for(let K=0;K<k;K++)p[V[K]]=P}else p[b]=P}return this.options.layoutId&&(p.pointerEvents=_===this?Qf(c?.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var f;return(f=c.currentAnimation)===null||f===void 0?void 0:f.stop()}),this.root.nodes.forEach(NA),this.root.sharedNodes.clear()}}}function AB(e){e.updateLayout()}function RB(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:l}=e.options,c=n.source!==e.layout.source;l==="size"?oi(_=>{const E=c?n.measuredBox[_]:n.layoutBox[_],A=$n(E);E.min=r[_].min,E.max=E.min+A}):Xx(l,n.layoutBox,r)&&oi(_=>{const E=c?n.measuredBox[_]:n.layoutBox[_],A=$n(r[_]);E.max=E.min+A,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[_].max=e.relativeTarget[_].min+A)});const f=sl();ic(f,r,n.layoutBox);const d=sl();c?ic(d,e.applyTransform(a,!0),n.measuredBox):ic(d,r,n.layoutBox);const p=!Kx(f);let y=!1;if(!e.resumeFrom){const _=e.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:E,layout:A}=_;if(E&&A){const D=Re();rc(D,n.layoutBox,E.layoutBox);const b=Re();rc(b,r,A.layoutBox),$x(D,b)||(y=!0),_.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=D,e.relativeParent=_)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:d,layoutDelta:f,hasLayoutChanged:p,hasRelativeTargetChanged:y})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function CB(e){Yu&&ka.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function xB(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function IB(e){e.clearSnapshot()}function NA(e){e.clearMeasurements()}function DB(e){e.isLayoutDirty=!1}function NB(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function MA(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function MB(e){e.resolveTargetDelta()}function OB(e){e.calcProjection()}function VB(e){e.resetSkewAndRotation()}function kB(e){e.removeLeadSnapshot()}function OA(e,t,n){e.translate=de(t.translate,0,n),e.scale=de(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function VA(e,t,n,r){e.min=de(t.min,n.min,r),e.max=de(t.max,n.max,r)}function PB(e,t,n,r){VA(e.x,t.x,n.x,r),VA(e.y,t.y,n.y,r)}function LB(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const UB={duration:.45,ease:[.4,0,.1,1]},kA=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),PA=kA("applewebkit/")&&!kA("chrome/")?Math.round:Gn;function LA(e){e.min=PA(e.min),e.max=PA(e.max)}function jB(e){LA(e.x),LA(e.y)}function Xx(e,t,n){return e==="position"||e==="preserve-aspect"&&!F9(xA(t),xA(n),.2)}function BB(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const zB=Qx({attachResizeListener:(e,t)=>Sc(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),iy={current:void 0},Wx=Qx({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!iy.current){const e=new zB({});e.mount(window),e.setOptions({layoutScroll:!0}),iy.current=e}return iy.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),FB={pan:{Feature:rB},drag:{Feature:iB,ProjectionNode:Wx,MeasureLayout:Hx}};function UA(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,l=r[a];l&&ae.postRender(()=>l(t,qc(t)))}class HB extends ea{mount(){const{current:t}=this.node;t&&(this.unmount=FU(t,n=>(UA(this.node,n,"Start"),r=>UA(this.node,r,"End"))))}unmount(){}}class qB extends ea{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hc(Sc(this.node.current,"focus",()=>this.onFocus()),Sc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jA(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),l=r[a];l&&ae.postRender(()=>l(t,qc(t)))}class GB extends ea{mount(){const{current:t}=this.node;t&&(this.unmount=KU(t,n=>(jA(this.node,n,"Start"),(r,{success:a})=>jA(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Zy=new WeakMap,ry=new WeakMap,KB=e=>{const t=Zy.get(e.target);t&&t(e)},$B=e=>{e.forEach(KB)};function YB({root:e,...t}){const n=e||document;ry.has(n)||ry.set(n,{});const r=ry.get(n),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver($B,{root:e,...t})),r[a]}function QB(e,t,n){const r=YB(t);return Zy.set(e,n),r.observe(e),()=>{Zy.delete(e),r.unobserve(e)}}const XB={some:0,all:1};class WB extends ea{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:l}=t,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:XB[a]},f=d=>{const{isIntersecting:p}=d;if(this.isInView===p||(this.isInView=p,l&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:y,onViewportLeave:_}=this.node.getProps(),E=p?y:_;E&&E(d)};return QB(this.node.current,c,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(ZB(t,n))&&this.startObserver()}unmount(){}}function ZB({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const JB={inView:{Feature:WB},tap:{Feature:GB},focus:{Feature:qB},hover:{Feature:HB}},tz={layout:{ProjectionNode:Wx,MeasureLayout:Hx}},Jy={current:null},Zx={current:!1};function ez(){if(Zx.current=!0,!!C0)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Jy.current=e.matches;e.addListener(t),t()}else Jy.current=!1}const nz=[...bx,ln,Xs],iz=e=>nz.find(wx(e)),BA=new WeakMap;function rz(e,t,n){for(const r in t){const a=t[r],l=n[r];if(hn(a))e.addValue(r,a);else if(hn(l))e.addValue(r,wc(a,{owner:e}));else if(l!==a)if(e.hasValue(r)){const c=e.getValue(r);c.liveStyle===!0?c.jump(a):c.hasAnimated||c.set(a)}else{const c=e.getStaticValue(r);e.addValue(r,wc(c!==void 0?c:a,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const zA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class sz{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:l,visualState:c},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=t_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const A=Yi.now();this.renderScheduledAt<A&&(this.renderScheduledAt=A,ae.render(this.render,!1,!0))};const{latestValues:d,renderState:p,onUpdate:y}=c;this.onUpdate=y,this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=p,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=f,this.blockInitialAnimation=!!l,this.isControllingVariants=hm(n),this.isVariantNode=N2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:_,...E}=this.scrapeMotionValuesFromProps(n,{},this);for(const A in E){const D=E[A];d[A]!==void 0&&hn(D)&&D.set(d[A],!1)}}mount(t){this.current=t,BA.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Zx.current||ez(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Jy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){BA.delete(this.current),this.projection&&this.projection.unmount(),Qs(this.notifyUpdate),Qs(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=ao.has(t),a=n.on("change",f=>{this.latestValues[t]=f,this.props.onUpdate&&ae.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),l=n.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),l(),c&&c(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in bl){const n=bl[t];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[t]&&a&&r(this.props)&&(this.features[t]=new a(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Re()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<zA.length;r++){const a=zA[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,c=t[l];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=rz(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=wc(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(Tx(a)||hx(a))?a=parseFloat(a):!iz(a)&&Xs.test(n)&&(a=yx(t,n)),this.setBaseTarget(t,hn(a)?a.get():a)),hn(a)?a.get():a}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let a;if(typeof r=="string"||typeof r=="object"){const c=V0(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);c&&(a=c[t])}if(r&&a!==void 0)return a;const l=this.getBaseTargetFromProps(this.props,t);return l!==void 0&&!hn(l)?l:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Y0),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Jx extends sz{constructor(){super(...arguments),this.KeyframeResolver=Sx}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;hn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function az(e){return window.getComputedStyle(e)}class oz extends Jx{constructor(){super(...arguments),this.type="html",this.renderInstance=B2}readValueFromInstance(t,n){if(ao.has(n)){const r=J0(n);return r&&r.default||0}else{const r=az(t),a=(L2(n)?r.getPropertyValue(n):r[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return zx(t,n)}build(t,n,r){L0(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return z0(t,n,r)}}class lz extends Jx{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Re}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ao.has(n)){const r=J0(n);return r&&r.default||0}return n=z2.has(n)?n:N0(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return q2(t,n,r)}build(t,n,r){U0(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,a){F2(t,n,r,a)}mount(t){this.isSVGTag=B0(t.tagName),super.mount(t)}}const uz=(e,t)=>O0(e)?new lz(t):new oz(t,{allowProjection:e!==M.Fragment}),cz=kU({...O9,...JB,...FB,...tz},uz),Nn=X5(cz);function hz(){const{signInWithGoogle:e,loading:t,error:n}=Bc();return O.jsx("div",{className:"min-h-full flex flex-col items-center justify-center px-4 bg-gradient-to-br from-indigo-50 via-white to-purple-50",children:O.jsxs(Nn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-sm",children:[O.jsxs("div",{className:"text-center mb-8",children:[O.jsx(Nn.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.2,damping:15},className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-10 h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),O.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"CMail"})]}),n&&O.jsx(Nn.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:O.jsx("p",{className:"text-sm text-red-600 text-center",children:n})}),O.jsx(Nn.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:e,disabled:t,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white border border-gray-300 rounded-xl shadow-sm hover:shadow-md transition-shadow disabled:opacity-50 disabled:cursor-not-allowed",children:t?O.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-indigo-600 rounded-full animate-spin"}):O.jsxs(O.Fragment,{children:[O.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[O.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),O.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),O.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),O.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),O.jsx("span",{className:"text-gray-700 font-medium",children:"Sign in with Google"})]})})]})})}const Vf=50,Wo="duoboard_messages";function fz(e){const[t,n]=M.useState([]),[r,a]=M.useState(!0),[l,c]=M.useState(!1),[f,d]=M.useState(!0),[p,y]=M.useState(null),_=M.useRef(null),E=M.useRef(null),A=M.useCallback(async k=>{const K=k.filter(S=>S.replyTo).map(S=>S.replyTo);if(K.length===0)return k.map(S=>({...S,replyToMessage:null}));const q=[...new Set(K)],Y=await Promise.all(q.map(S=>gc(In(ue,Wo,S)))),R=new Map;return Y.forEach(S=>{S.exists()&&R.set(S.id,{id:S.id,...S.data()})}),k.map(S=>({...S,replyToMessage:S.replyTo&&R.get(S.replyTo)||null}))},[]);M.useEffect(()=>{if(!e){a(!1);return}a(!0),y(null);const k=Ti(ue,Wo),K=Pa(k,_d("timestamp","desc"),cS(Vf));return h0(K,async Y=>{try{const R=[];let S=null;Y.forEach(U=>{R.push({id:U.id,...U.data()}),S=U}),R.length>0&&!E.current&&(E.current=R[0].timestamp),_.current=S,d(R.length===Vf);const N=await A(R);n(N.reverse()),a(!1)}catch(R){console.error("Error fetching messages:",R),y("Failed to load messages"),a(!1)}},Y=>{console.error("Snapshot error:",Y),y("Failed to connect to messages"),a(!1)})},[e,A]);const D=M.useCallback(async()=>{if(!(!e||l||!f||!_.current)){c(!0);try{const k=Ti(ue,Wo),K=Pa(k,_d("timestamp","desc"),G4(_.current),cS(Vf)),q=await Gu(K),Y=[];let R=null;if(q.forEach(S=>{Y.push({id:S.id,...S.data()}),R=S}),R&&(_.current=R),d(Y.length===Vf),Y.length>0){const S=await A(Y);n(N=>[...S.reverse(),...N])}}catch(k){console.error("Error loading more messages:",k),y("Failed to load more messages")}finally{c(!1)}}},[e,l,f,A]),b=M.useCallback(async(k,K)=>{if(!(!e||!k.trim()))try{const q={senderId:e,content:k.trim(),imageUrl:null,timestamp:yc(),replyTo:K||null,likes:{}};await Td(Ti(ue,Wo),q)}catch(q){throw console.error("Error sending message:",q),new Error("Failed to send message")}},[e]),x=M.useCallback(async(k,K)=>{if(e)try{const Y=await(await fetch(k.dataUrl)).blob(),R=`duoboard_drawings/${e}_${Date.now()}.png`,S=WC(b2,R);await QC(S,Y);const N=await XC(S),U={senderId:e,content:null,imageUrl:N,timestamp:yc(),replyTo:K||null,likes:{}};await Td(Ti(ue,Wo),U)}catch(q){throw console.error("Error sending drawing:",q),new Error("Failed to send drawing")}},[e]),V=M.useCallback(async k=>{if(e)try{const K=In(ue,Wo,k),q=await gc(K);if(!q.exists())return;const R={...q.data().likes||{}};R[e]?delete R[e]:R[e]=!0,await ky(K,{likes:R}),n(S=>S.map(N=>N.id===k?{...N,likes:R}:N))}catch(K){console.error("Error toggling like:",K)}},[e]),P=M.useCallback(k=>t.find(K=>K.id===k),[t]);return{messages:t,loading:r,loadingMore:l,hasMore:f,error:p,loadMore:D,sendMessage:b,sendDrawing:x,toggleLike:V,getMessageById:P}}const kf="duoboard_lists",Ms="duoboard_listItems",dz="duoboard_messages";function mz(e){const[t,n]=M.useState([]),[r,a]=M.useState(!0),[l,c]=M.useState(null);M.useEffect(()=>{if(!e){a(!1);return}a(!0);const D=Ti(ue,kf),b=Pa(D,q4(Ns("visibility","==","public"),Ns("ownerId","==",e)),_d("createdAt","desc"));return h0(b,V=>{const P=[];V.forEach(k=>{P.push({id:k.id,...k.data()})}),n(P),a(!1)},V=>{console.error("Error fetching lists:",V),c("Failed to load lists"),a(!1)})},[e]);const f=M.useCallback(async(D,b,x,V)=>{if(!e)return null;try{const P={name:D,ownerId:e,visibility:b,type:x,emoji:V||"",createdAt:yc()};return(await Td(Ti(ue,kf),P)).id}catch(P){throw console.error("Error creating list:",P),new Error("Failed to create list")}},[e]),d=M.useCallback(async(D,b)=>{if(e)try{const x=In(ue,kf,D);await ky(x,b)}catch(x){throw console.error("Error updating list:",x),new Error("Failed to update list")}},[e]),p=M.useCallback(async D=>{if(e)try{const b=Pa(Ti(ue,Ms),Ns("listId","==",D)),V=(await Gu(b)).docs.map(P=>Ug(In(ue,Ms,P.id)));await Promise.all(V),await Ug(In(ue,kf,D))}catch(b){throw console.error("Error deleting list:",b),new Error("Failed to delete list")}},[e]),y=M.useCallback(async(D,b)=>{if(e)try{const x=Pa(Ti(ue,Ms),Ns("listId","==",D),Ns("messageId","==",b));if(!(await Gu(x)).empty)return;const P={listId:D,messageId:b,addedAt:yc(),completed:!1};await Td(Ti(ue,Ms),P)}catch(x){throw console.error("Error adding message to list:",x),new Error("Failed to add to list")}},[e]),_=M.useCallback(async(D,b)=>{if(e)try{const x=Pa(Ti(ue,Ms),Ns("listId","==",D),Ns("messageId","==",b)),P=(await Gu(x)).docs.map(k=>Ug(In(ue,Ms,k.id)));await Promise.all(P)}catch(x){throw console.error("Error removing from list:",x),new Error("Failed to remove from list")}},[e]),E=M.useCallback(async D=>{if(e)try{const b=In(ue,Ms,D),x=await gc(b);if(x.exists()){const V=x.data().completed||!1;await ky(b,{completed:!V})}}catch(b){throw console.error("Error toggling item completion:",b),new Error("Failed to update item")}},[e]),A=M.useCallback(async D=>{try{const b=Pa(Ti(ue,Ms),Ns("listId","==",D),_d("addedAt","desc")),x=await Gu(b),V=[];x.forEach(Y=>{V.push({id:Y.id,...Y.data()})});const k=V.map(Y=>Y.messageId).map(Y=>gc(In(ue,dz,Y))),K=await Promise.all(k),q=new Map;return K.forEach(Y=>{Y.exists()&&q.set(Y.id,{id:Y.id,...Y.data()})}),V.map(Y=>({...Y,message:q.get(Y.messageId)||null}))}catch(b){throw console.error("Error fetching list items:",b),new Error("Failed to load list items")}},[]);return{lists:t,loading:r,error:l,createList:f,updateList:d,deleteList:p,addMessageToList:y,removeFromList:_,toggleItemCompleted:E,getListItems:A}}function pz({userId:e}){const[t,n]=M.useState("default"),[r,a]=M.useState(null),[l,c]=M.useState(!1),[f,d]=M.useState(null),[p,y]=M.useState(null);M.useEffect(()=>{(async()=>{if(!("Notification"in window)){n("unsupported");return}n(Notification.permission);const A=await L5();y(A)})()},[]),M.useEffect(()=>{if(!p)return;const E=k5(p,A=>{if(console.log("Foreground message received:",A),Notification.permission==="granted"&&A.notification){const{title:D,body:b}=A.notification;new Notification(D||"New Message",{body:b||"You have a new message",icon:"./icons/icon-192.svg",tag:"cmail-foreground"})}});return()=>E()},[p]),M.useEffect(()=>{e&&r&&Vy(In(ue,"duoboard_users",e),{fcmToken:r},{merge:!0}).catch(E=>{console.error("Error saving FCM token:",E)})},[e,r]);const _=M.useCallback(async()=>{if(!p){d("Push notifications are not supported in this browser");return}{d("VAPID key not configured. See Firebase Console > Cloud Messaging.");return}},[p]);return{permission:t,token:r,loading:l,error:f,requestPermission:_}}function gz({title:e="CMail",showProfile:t=!0,onListsClick:n}){const{user:r,signOut:a,uploadAvatar:l}=Bc(),c=M.useRef(null),{permission:f,loading:d,requestPermission:p}=pz({userId:r?.uid}),y=()=>{c.current?.click()},_=async A=>{const D=A.target.files?.[0];if(D)try{await l(D)}catch{}c.current&&(c.current.value="")},E=r?.customPhotoURL||r?.photoURL;return O.jsxs("header",{className:"flex items-center justify-between px-4 py-3 bg-white border-b border-gray-200 safe-area-top",children:[O.jsxs("div",{className:"flex items-center gap-3",children:[t&&O.jsxs("button",{onClick:y,className:"relative w-8 h-8 rounded-full overflow-hidden group","aria-label":"Change profile photo",children:[E?O.jsx("img",{src:E,alt:r?.displayName,className:"w-8 h-8 rounded-full object-cover"}):O.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:r?.displayName?.[0]||"?"}),O.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),O.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:_,className:"hidden"})]}),O.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:e})]}),O.jsxs("div",{className:"flex items-center gap-2",children:[f!=="unsupported"&&O.jsx("button",{onClick:f!=="granted"?p:void 0,disabled:d||f==="denied",className:`p-2 rounded-full transition-colors ${f==="granted"?"text-indigo-600":f==="denied"?"text-gray-400 cursor-not-allowed":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,"aria-label":f==="granted"?"Notifications enabled":f==="denied"?"Notifications blocked":"Enable notifications",title:f==="granted"?"Notifications enabled":f==="denied"?"Notifications blocked - check browser settings":"Click to enable notifications",children:d?O.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-indigo-600 rounded-full animate-spin"}):O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:f==="granted"?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"}),f==="denied"&&O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364L5.636 5.636"})]})}),n&&O.jsx("button",{onClick:n,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors","aria-label":"View lists",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),O.jsx("button",{onClick:a,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Sign out",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})}function yz({onDoubleTap:e,delay:t=300}){const n=M.useRef(0);return M.useCallback(()=>{const a=Date.now(),l=a-n.current;l>0&&l<t?(e(),n.current=0):n.current=a},[e,t])}function vz({onSwipeRight:e,onSwipeLeft:t,threshold:n=80}){const r=M.useRef(0),[a,l]=M.useState({swiping:!1,offset:0}),c=M.useCallback(p=>{r.current=p.touches[0].clientX,l({swiping:!0,offset:0})},[]),f=M.useCallback(p=>{if(!a.swiping)return;const _=p.touches[0].clientX-r.current;_>0&&e?l({swiping:!0,offset:Math.min(_,n*1.5)}):_<0&&t&&l({swiping:!0,offset:Math.max(_,-n*1.5)})},[a.swiping,n,e,t]),d=M.useCallback(()=>{const p=a.offset;p>n&&e?e():p<-n&&t&&t(),l({swiping:!1,offset:0})},[a.offset,n,e,t]);return{handlers:{onTouchStart:c,onTouchMove:f,onTouchEnd:d},swipeState:a}}function _z({onLongPress:e,delay:t=500}){const n=M.useRef(null),[r,a]=M.useState(!1),l=M.useCallback(()=>{a(!0),n.current=setTimeout(()=>{e(),a(!1)},t)},[e,t]),c=M.useCallback(()=>{n.current&&(clearTimeout(n.current),n.current=null),a(!1)},[]);return{handlers:{onTouchStart:l,onTouchEnd:c,onTouchMove:c,onMouseDown:l,onMouseUp:c,onMouseLeave:c},pressing:r}}function Tz({message:e,isOwn:t,senderPhoto:n,senderName:r,onDoubleTap:a,onSwipeReply:l,onLongPress:c,showLikeAnimation:f,currentUserId:d,onNavigateToMessage:p}){const y=yz({onDoubleTap:a}),{handlers:_,swipeState:E}=vz({onSwipeRight:l}),{handlers:A}=_z({onLongPress:c}),D=e.likes&&Object.keys(e.likes).length>0,b=e.likes?.[d],x=e.likes?Object.keys(e.likes).length:0,V=P=>P?(P.toDate?P.toDate():new Date(P)).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"}):"";return O.jsxs(Nn.div,{className:`flex items-end gap-2 mb-3 ${t?"flex-row-reverse":""}`,style:{transform:`translateX(${E.offset}px)`,transition:E.swiping?"none":"transform 0.2s ease-out"},..._,children:[O.jsx(El,{children:E.offset>40&&O.jsx(Nn.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"absolute left-0 flex items-center justify-center w-10 h-10 bg-indigo-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})})}),!t&&O.jsx("div",{className:"flex-shrink-0 w-8 h-8",children:n?O.jsx("img",{src:n,alt:r||"User",className:"w-8 h-8 rounded-full"}):O.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-full flex items-center justify-center text-white text-sm font-medium",children:r?.[0]||"?"})}),O.jsxs("div",{className:`relative max-w-[75%] ${t?"items-end":"items-start"}`,onClick:y,...A,children:[e.replyToMessage&&O.jsxs("button",{onClick:P=>{P.stopPropagation(),p?.(e.replyTo)},className:`block mb-1 p-2 text-xs bg-gray-100 rounded-lg border-l-2 border-indigo-400 max-w-full truncate text-left ${t?"ml-auto":""}`,children:[O.jsx("span",{className:"text-gray-500",children:"Replying to: "}),O.jsx("span",{className:"text-gray-700",children:e.replyToMessage.content||"(drawing)"})]}),O.jsxs("div",{className:`relative rounded-2xl px-4 py-2 ${t?"bg-indigo-600 text-white rounded-br-md":"bg-white border border-gray-200 text-gray-900 rounded-bl-md"}`,children:[e.imageUrl&&O.jsx("img",{src:e.imageUrl,alt:"Drawing",className:"max-w-full rounded-lg mb-1",style:{maxHeight:"200px"}}),e.content&&O.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:e.content}),O.jsx(El,{children:f&&O.jsx(Nn.div,{initial:{scale:0,opacity:0},animate:{scale:1.5,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.3},className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-12 h-12 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})})}),D&&!f&&O.jsxs("div",{className:`absolute -bottom-2 ${t?"left-2":"right-2"} flex items-center gap-0.5 bg-white rounded-full px-1.5 py-0.5 shadow-sm border border-gray-100`,children:[O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`w-3.5 h-3.5 ${b?"text-red-500":"text-gray-400"}`,fill:"currentColor",viewBox:"0 0 24 24",children:O.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),x>1&&O.jsx("span",{className:"text-xs text-gray-600",children:x})]})]}),O.jsx("p",{className:`mt-1 text-xs text-gray-400 ${t?"text-right":"text-left"}`,children:V(e.timestamp)})]})]})}function Ez({onSend:e,onDrawClick:t,replyingTo:n,onCancelReply:r,disabled:a}){const[l,c]=M.useState(""),f=M.useRef(null);M.useEffect(()=>{n&&f.current&&f.current.focus()},[n]);const d=y=>{y.preventDefault(),l.trim()&&!a&&(e(l.trim()),c(""))},p=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),d(y))};return O.jsxs("div",{className:"border-t border-gray-200 bg-white safe-area-bottom",children:[O.jsx(El,{children:n&&O.jsx(Nn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:O.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-50 border-b border-gray-200",children:[O.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[O.jsx("div",{className:"w-1 h-8 bg-indigo-500 rounded-full"}),O.jsxs("div",{className:"min-w-0",children:[O.jsx("p",{className:"text-xs text-indigo-600 font-medium",children:"Replying"}),O.jsx("p",{className:"text-sm text-gray-600 truncate",children:n.content||"(drawing)"})]})]}),O.jsx("button",{onClick:r,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})})}),O.jsxs("form",{onSubmit:d,className:"flex items-end gap-2 p-3",children:[O.jsx("button",{type:"button",onClick:t,disabled:a,className:"flex-shrink-0 p-2.5 text-indigo-600 hover:bg-indigo-50 rounded-full transition-colors disabled:opacity-50","aria-label":"Open drawing canvas",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),O.jsx("div",{className:"flex-1 min-w-0",children:O.jsx("textarea",{ref:f,value:l,onChange:y=>c(y.target.value),onKeyDown:p,placeholder:"Message...",disabled:a,rows:1,className:"w-full px-4 py-2.5 bg-gray-100 rounded-2xl resize-none text-sm text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white disabled:opacity-50 transition-colors",style:{maxHeight:"120px",minHeight:"44px"}})}),O.jsx("button",{type:"submit",disabled:!l.trim()||a,className:"flex-shrink-0 p-2.5 bg-indigo-600 text-white rounded-full hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:hover:bg-indigo-600","aria-label":"Send message",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})}function tv(){return tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tv.apply(null,arguments)}function FA(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ev(e,t){return ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ev(e,t)}function wz(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ev(e,t)}var HA=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function bz(e,t){return!!(e===t||HA(e)&&HA(t))}function Sz(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!bz(e[n],t[n]))return!1;return!0}function sy(e,t){t===void 0&&(t=Sz);var n,r=[],a,l=!1;function c(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];return l&&n===this&&t(f,r)||(a=e.apply(this,f),l=!0,n=this,r=f),a}return c}var Az=typeof performance=="object"&&typeof performance.now=="function",qA=Az?function(){return performance.now()}:function(){return Date.now()};function GA(e){cancelAnimationFrame(e.id)}function Rz(e,t){var n=qA();function r(){qA()-n>=t?e.call(null):a.id=requestAnimationFrame(r)}var a={id:requestAnimationFrame(r)};return a}var ay=-1;function KA(e){if(e===void 0&&(e=!1),ay===-1||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",document.body.appendChild(t),ay=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return ay}var Zo=null;function $A(e){if(e===void 0&&(e=!1),Zo===null||e){var t=document.createElement("div"),n=t.style;n.width="50px",n.height="50px",n.overflow="scroll",n.direction="rtl";var r=document.createElement("div"),a=r.style;return a.width="100px",a.height="100px",t.appendChild(r),document.body.appendChild(t),t.scrollLeft>0?Zo="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?Zo="negative":Zo="positive-ascending"),document.body.removeChild(t),Zo}return Zo}var Cz=150,xz=function(t,n){return t};function Iz(e){var t,n=e.getItemOffset,r=e.getEstimatedTotalSize,a=e.getItemSize,l=e.getOffsetForIndexAndAlignment,c=e.getStartIndexForOffset,f=e.getStopIndexForStartIndex,d=e.initInstanceProps,p=e.shouldResetStyleCacheOnItemSizeChange,y=e.validateProps;return t=(function(_){wz(E,_);function E(D){var b;return b=_.call(this,D)||this,b._instanceProps=d(b.props,FA(b)),b._outerRef=void 0,b._resetIsScrollingTimeoutId=null,b.state={instance:FA(b),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof b.props.initialScrollOffset=="number"?b.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},b._callOnItemsRendered=void 0,b._callOnItemsRendered=sy(function(x,V,P,k){return b.props.onItemsRendered({overscanStartIndex:x,overscanStopIndex:V,visibleStartIndex:P,visibleStopIndex:k})}),b._callOnScroll=void 0,b._callOnScroll=sy(function(x,V,P){return b.props.onScroll({scrollDirection:x,scrollOffset:V,scrollUpdateWasRequested:P})}),b._getItemStyle=void 0,b._getItemStyle=function(x){var V=b.props,P=V.direction,k=V.itemSize,K=V.layout,q=b._getItemStyleCache(p&&k,p&&K,p&&P),Y;if(q.hasOwnProperty(x))Y=q[x];else{var R=n(b.props,x,b._instanceProps),S=a(b.props,x,b._instanceProps),N=P==="horizontal"||K==="horizontal",U=P==="rtl",B=N?R:0;q[x]=Y={position:"absolute",left:U?void 0:B,right:U?B:void 0,top:N?0:R,height:N?"100%":S,width:N?S:"100%"}}return Y},b._getItemStyleCache=void 0,b._getItemStyleCache=sy(function(x,V,P){return{}}),b._onScrollHorizontal=function(x){var V=x.currentTarget,P=V.clientWidth,k=V.scrollLeft,K=V.scrollWidth;b.setState(function(q){if(q.scrollOffset===k)return null;var Y=b.props.direction,R=k;if(Y==="rtl")switch($A()){case"negative":R=-k;break;case"positive-descending":R=K-P-k;break}return R=Math.max(0,Math.min(R,K-P)),{isScrolling:!0,scrollDirection:q.scrollOffset<R?"forward":"backward",scrollOffset:R,scrollUpdateWasRequested:!1}},b._resetIsScrollingDebounced)},b._onScrollVertical=function(x){var V=x.currentTarget,P=V.clientHeight,k=V.scrollHeight,K=V.scrollTop;b.setState(function(q){if(q.scrollOffset===K)return null;var Y=Math.max(0,Math.min(K,k-P));return{isScrolling:!0,scrollDirection:q.scrollOffset<Y?"forward":"backward",scrollOffset:Y,scrollUpdateWasRequested:!1}},b._resetIsScrollingDebounced)},b._outerRefSetter=function(x){var V=b.props.outerRef;b._outerRef=x,typeof V=="function"?V(x):V!=null&&typeof V=="object"&&V.hasOwnProperty("current")&&(V.current=x)},b._resetIsScrollingDebounced=function(){b._resetIsScrollingTimeoutId!==null&&GA(b._resetIsScrollingTimeoutId),b._resetIsScrollingTimeoutId=Rz(b._resetIsScrolling,Cz)},b._resetIsScrolling=function(){b._resetIsScrollingTimeoutId=null,b.setState({isScrolling:!1},function(){b._getItemStyleCache(-1,null)})},b}E.getDerivedStateFromProps=function(b,x){return Dz(b,x),y(b),null};var A=E.prototype;return A.scrollTo=function(b){b=Math.max(0,b),this.setState(function(x){return x.scrollOffset===b?null:{scrollDirection:x.scrollOffset<b?"forward":"backward",scrollOffset:b,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},A.scrollToItem=function(b,x){x===void 0&&(x="auto");var V=this.props,P=V.itemCount,k=V.layout,K=this.state.scrollOffset;b=Math.max(0,Math.min(b,P-1));var q=0;if(this._outerRef){var Y=this._outerRef;k==="vertical"?q=Y.scrollWidth>Y.clientWidth?KA():0:q=Y.scrollHeight>Y.clientHeight?KA():0}this.scrollTo(l(this.props,b,x,K,this._instanceProps,q))},A.componentDidMount=function(){var b=this.props,x=b.direction,V=b.initialScrollOffset,P=b.layout;if(typeof V=="number"&&this._outerRef!=null){var k=this._outerRef;x==="horizontal"||P==="horizontal"?k.scrollLeft=V:k.scrollTop=V}this._callPropsCallbacks()},A.componentDidUpdate=function(){var b=this.props,x=b.direction,V=b.layout,P=this.state,k=P.scrollOffset,K=P.scrollUpdateWasRequested;if(K&&this._outerRef!=null){var q=this._outerRef;if(x==="horizontal"||V==="horizontal")if(x==="rtl")switch($A()){case"negative":q.scrollLeft=-k;break;case"positive-ascending":q.scrollLeft=k;break;default:var Y=q.clientWidth,R=q.scrollWidth;q.scrollLeft=R-Y-k;break}else q.scrollLeft=k;else q.scrollTop=k}this._callPropsCallbacks()},A.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&GA(this._resetIsScrollingTimeoutId)},A.render=function(){var b=this.props,x=b.children,V=b.className,P=b.direction,k=b.height,K=b.innerRef,q=b.innerElementType,Y=b.innerTagName,R=b.itemCount,S=b.itemData,N=b.itemKey,U=N===void 0?xz:N,B=b.layout,H=b.outerElementType,L=b.outerTagName,Xt=b.style,he=b.useIsScrolling,tt=b.width,ot=this.state.isScrolling,ft=P==="horizontal"||B==="horizontal",It=ft?this._onScrollHorizontal:this._onScrollVertical,Dt=this._getRangeToRender(),F=Dt[0],it=Dt[1],lt=[];if(R>0)for(var ut=F;ut<=it;ut++)lt.push(M.createElement(x,{data:S,key:U(ut,S),index:ut,isScrolling:he?ot:void 0,style:this._getItemStyle(ut)}));var gt=r(this.props,this._instanceProps);return M.createElement(H||L||"div",{className:V,onScroll:It,ref:this._outerRefSetter,style:tv({position:"relative",height:k,width:tt,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:P},Xt)},M.createElement(q||Y||"div",{children:lt,ref:K,style:{height:ft?"100%":gt,pointerEvents:ot?"none":void 0,width:ft?gt:"100%"}}))},A._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var b=this.props.itemCount;if(b>0){var x=this._getRangeToRender(),V=x[0],P=x[1],k=x[2],K=x[3];this._callOnItemsRendered(V,P,k,K)}}if(typeof this.props.onScroll=="function"){var q=this.state,Y=q.scrollDirection,R=q.scrollOffset,S=q.scrollUpdateWasRequested;this._callOnScroll(Y,R,S)}},A._getRangeToRender=function(){var b=this.props,x=b.itemCount,V=b.overscanCount,P=this.state,k=P.isScrolling,K=P.scrollDirection,q=P.scrollOffset;if(x===0)return[0,0,0,0];var Y=c(this.props,q,this._instanceProps),R=f(this.props,Y,q,this._instanceProps),S=!k||K==="backward"?Math.max(1,V):1,N=!k||K==="forward"?Math.max(1,V):1;return[Math.max(0,Y-S),Math.max(0,Math.min(x-1,R+N)),Y,R]},E})(M.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var Dz=function(t,n){t.children,t.direction,t.height,t.layout,t.innerTagName,t.outerTagName,t.width,n.instance},Nz=50,ll=function(t,n,r){var a=t,l=a.itemSize,c=r.itemMetadataMap,f=r.lastMeasuredIndex;if(n>f){var d=0;if(f>=0){var p=c[f];d=p.offset+p.size}for(var y=f+1;y<=n;y++){var _=l(y);c[y]={offset:d,size:_},d+=_}r.lastMeasuredIndex=n}return c[n]},Mz=function(t,n,r){var a=n.itemMetadataMap,l=n.lastMeasuredIndex,c=l>0?a[l].offset:0;return c>=r?tI(t,n,l,0,r):Oz(t,n,Math.max(0,l),r)},tI=function(t,n,r,a,l){for(;a<=r;){var c=a+Math.floor((r-a)/2),f=ll(t,c,n).offset;if(f===l)return c;f<l?a=c+1:f>l&&(r=c-1)}return a>0?a-1:0},Oz=function(t,n,r,a){for(var l=t.itemCount,c=1;r<l&&ll(t,r,n).offset<a;)r+=c,c*=2;return tI(t,n,Math.min(r,l-1),Math.floor(r/2),a)},YA=function(t,n){var r=t.itemCount,a=n.itemMetadataMap,l=n.estimatedItemSize,c=n.lastMeasuredIndex,f=0;if(c>=r&&(c=r-1),c>=0){var d=a[c];f=d.offset+d.size}var p=r-c-1,y=p*l;return f+y},Vz=Iz({getItemOffset:function(t,n,r){return ll(t,n,r).offset},getItemSize:function(t,n,r){return r.itemMetadataMap[n].size},getEstimatedTotalSize:YA,getOffsetForIndexAndAlignment:function(t,n,r,a,l,c){var f=t.direction,d=t.height,p=t.layout,y=t.width,_=f==="horizontal"||p==="horizontal",E=_?y:d,A=ll(t,n,l),D=YA(t,l),b=Math.max(0,Math.min(D-E,A.offset)),x=Math.max(0,A.offset-E+A.size+c);switch(r==="smart"&&(a>=x-E&&a<=b+E?r="auto":r="center"),r){case"start":return b;case"end":return x;case"center":return Math.round(x+(b-x)/2);case"auto":default:return a>=x&&a<=b?a:a<x?x:b}},getStartIndexForOffset:function(t,n,r){return Mz(t,r,n)},getStopIndexForStartIndex:function(t,n,r,a){for(var l=t.direction,c=t.height,f=t.itemCount,d=t.layout,p=t.width,y=l==="horizontal"||d==="horizontal",_=y?p:c,E=ll(t,n,a),A=r+_,D=E.offset+E.size,b=n;b<f-1&&D<A;)b++,D+=ll(t,b,a).size;return b},initInstanceProps:function(t,n){var r=t,a=r.estimatedItemSize,l={itemMetadataMap:{},estimatedItemSize:a||Nz,lastMeasuredIndex:-1};return n.resetAfterIndex=function(c,f){f===void 0&&(f=!0),l.lastMeasuredIndex=Math.min(l.lastMeasuredIndex,c-1),n._getItemStyleCache(-1),f&&n.forceUpdate()},l},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(t){t.itemSize}});const QA=80;function kz({messages:e,currentUser:t,otherUser:n,onDoubleTap:r,onSwipeReply:a,onLongPress:l,likeAnimatingMessageId:c,loading:f,loadingMore:d,hasMore:p,onLoadMore:y,scrollToMessageId:_,onScrollToMessageComplete:E}){const A=M.useRef(null),D=M.useRef(null),b=M.useRef({}),[x,V]=M.useState(0);M.useEffect(()=>{const R=()=>{D.current&&V(D.current.clientHeight)};return R(),window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]),M.useEffect(()=>{A.current&&e.length>0&&!_&&A.current.scrollToItem(e.length-1,"end")},[e.length,_]),M.useEffect(()=>{if(_&&A.current){const R=e.findIndex(S=>S.id===_);R!==-1&&(A.current.scrollToItem(R,"center"),E?.())}},[_,e,E]);const P=M.useCallback(R=>b.current[R]||QA,[]),k=M.useCallback((R,S)=>{b.current[R]!==S&&(b.current[R]=S,A.current?.resetAfterIndex(R))},[]),K=M.useCallback(({scrollOffset:R})=>{R<100&&p&&!d&&y()},[p,d,y]),q=M.useCallback(R=>R===t.uid?{photo:t.customPhotoURL||t.photoURL,name:t.displayName}:{photo:n?.customPhotoURL||n?.photoURL,name:n?.displayName},[t,n]),Y=M.useCallback(({index:R,style:S})=>{const N=e[R],U=N.senderId===t.uid,B=q(N.senderId);return O.jsx("div",{style:S,className:"px-3",children:O.jsx(Pz,{index:R,onHeightChange:k,children:O.jsx(Tz,{message:N,isOwn:U,senderPhoto:B.photo,senderName:B.name,onDoubleTap:()=>r(N.id),onSwipeReply:()=>a(N),onLongPress:()=>l(N),showLikeAnimation:c===N.id,currentUserId:t.uid,onNavigateToMessage:H=>{const L=e.findIndex(Xt=>Xt.id===H);L!==-1&&A.current?.scrollToItem(L,"center")}})})})},[e,t,q,r,a,l,c,k]);return f?O.jsx("div",{className:"flex-1 flex items-center justify-center",children:O.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):e.length===0?O.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[O.jsx("div",{className:"w-16 h-16 mb-4 bg-indigo-100 rounded-full flex items-center justify-center",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),O.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No messages yet"}),O.jsx("p",{className:"text-sm text-gray-500",children:"Send a message or drawing to get started!"})]}):O.jsxs("div",{ref:D,className:"flex-1 overflow-hidden",children:[d&&O.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 flex justify-center py-2 bg-gradient-to-b from-gray-50 to-transparent",children:O.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-indigo-600"})}),x>0&&O.jsx(Vz,{ref:A,height:x,width:"100%",itemCount:e.length,itemSize:P,onScroll:K,estimatedItemSize:QA,className:"scrollbar-hide",children:Y})]})}function Pz({index:e,onHeightChange:t,children:n}){const r=M.useRef(null);return M.useEffect(()=>{if(r.current){const a=r.current.getBoundingClientRect().height;t(e,a+12)}},[e,t,n]),O.jsx("div",{ref:r,children:n})}function Lz({isOpen:e,onClose:t,onSend:n}){const r=M.useRef(null),[a,l]=M.useState(!1),[c,f]=M.useState(!1),d=M.useRef(null),p=300,y=200,_=3,E="#1f2937";M.useEffect(()=>{if(e&&r.current){const k=r.current.getContext("2d");k&&(k.fillStyle="#ffffff",k.fillRect(0,0,p,y),k.lineCap="round",k.lineJoin="round",k.lineWidth=_,k.strokeStyle=E),f(!1)}},[e]);const A=M.useCallback(k=>{const K=r.current;if(!K)return{x:0,y:0};const q=K.getBoundingClientRect(),Y=K.width/q.width,R=K.height/q.height;let S,N;return"touches"in k?(S=k.touches[0].clientX,N=k.touches[0].clientY):(S=k.clientX,N=k.clientY),{x:(S-q.left)*Y,y:(N-q.top)*R}},[]),D=M.useCallback(k=>{k.preventDefault();const K=A(k);d.current=K,l(!0);const q=r.current?.getContext("2d");q&&(q.beginPath(),q.moveTo(K.x,K.y),q.lineTo(K.x,K.y),q.stroke(),f(!0))},[A]),b=M.useCallback(k=>{if(!a||!d.current)return;k.preventDefault();const K=A(k),q=r.current?.getContext("2d");q&&(q.beginPath(),q.moveTo(d.current.x,d.current.y),q.lineTo(K.x,K.y),q.stroke()),d.current=K,f(!0)},[a,A]),x=M.useCallback(()=>{l(!1),d.current=null},[]),V=M.useCallback(()=>{const k=r.current?.getContext("2d");k&&(k.fillStyle="#ffffff",k.fillRect(0,0,p,y),k.strokeStyle=E),f(!1)},[]),P=M.useCallback(()=>{if(!r.current||!c)return;const k=r.current.toDataURL("image/png");n({dataUrl:k,width:p,height:y}),V(),t()},[c,n,t,V]);return O.jsx(El,{children:e&&O.jsx(Nn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:t,children:O.jsxs(Nn.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white rounded-2xl shadow-xl overflow-hidden max-w-sm w-full",onClick:k=>k.stopPropagation(),children:[O.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[O.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Quick Draw"}),O.jsx("button",{onClick:t,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),O.jsx("div",{className:"p-4",children:O.jsxs("div",{className:"relative bg-gray-50 rounded-xl overflow-hidden border-2 border-dashed border-gray-200",children:[O.jsx("canvas",{ref:r,width:p,height:y,className:"w-full touch-none cursor-crosshair",style:{aspectRatio:`${p}/${y}`},onTouchStart:D,onTouchMove:b,onTouchEnd:x,onMouseDown:D,onMouseMove:b,onMouseUp:x,onMouseLeave:x}),!c&&O.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:O.jsx("p",{className:"text-gray-400 text-sm",children:"Draw something!"})})]})}),O.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-t border-gray-200 bg-gray-50",children:[O.jsx("button",{onClick:V,disabled:!c,className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"}),O.jsxs("button",{onClick:P,disabled:!c,className:"flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[O.jsx("span",{children:"Send"}),O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})]})]})]})})})}const Uz=["","","","","","","","","",""];function jz({isOpen:e,message:t,lists:n,currentUserId:r,onClose:a,onSelectList:l,onCreateList:c}){const[f,d]=M.useState(!1),[p,y]=M.useState(""),[_,E]=M.useState("public"),[A,D]=M.useState("collection"),[b,x]=M.useState(""),[V,P]=M.useState(!1),k=async()=>{if(p.trim()){P(!0);try{const Y=await c(p.trim(),_,A,b);Y&&l(Y),K()}catch(Y){console.error("Failed to create list:",Y)}finally{P(!1)}}},K=()=>{d(!1),y(""),E("public"),D("collection"),x("")},q=()=>{K(),a()};return O.jsx(El,{children:e&&t&&O.jsx(Nn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end justify-center bg-black/50",onClick:q,children:O.jsxs(Nn.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"bg-white rounded-t-2xl shadow-xl w-full max-w-lg max-h-[70vh] overflow-hidden",onClick:Y=>Y.stopPropagation(),children:[O.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[O.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:f?"Create New List":"Save to List"}),O.jsx("button",{onClick:q,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),O.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:O.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.content||(t.imageUrl?"(drawing)":"")})}),f?O.jsxs("div",{className:"p-4 space-y-4",children:[O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),O.jsx("div",{className:"flex gap-2 flex-wrap",children:Uz.map(Y=>O.jsx("button",{onClick:()=>x(Y),className:`w-10 h-10 text-xl rounded-lg transition-colors ${b===Y?"bg-indigo-100 ring-2 ring-indigo-500":"bg-gray-100 hover:bg-gray-200"}`,children:Y},Y))})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),O.jsx("input",{type:"text",value:p,onChange:Y=>y(Y.target.value),placeholder:"List name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",autoFocus:!0})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),O.jsxs("div",{className:"flex gap-2",children:[O.jsx("button",{onClick:()=>D("collection"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors ${A==="collection"?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Collection"}),O.jsx("button",{onClick:()=>D("checklist"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors ${A==="checklist"?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Checklist"})]})]}),O.jsxs("div",{children:[O.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visibility"}),O.jsxs("div",{className:"flex gap-2",children:[O.jsx("button",{onClick:()=>E("public"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors ${_==="public"?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Shared"}),O.jsxs("button",{onClick:()=>E("private"),className:`flex-1 px-3 py-2 text-sm rounded-lg border transition-colors flex items-center justify-center gap-1 ${_==="private"?"bg-indigo-50 border-indigo-500 text-indigo-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:["Private",O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]})]})]}),O.jsxs("div",{className:"flex gap-2 pt-2",children:[O.jsx("button",{onClick:K,className:"flex-1 px-4 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Cancel"}),O.jsx("button",{onClick:k,disabled:!p.trim()||V,className:"flex-1 px-4 py-2.5 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors disabled:opacity-50",children:V?"Creating...":"Create & Add"})]})]}):O.jsxs("div",{className:"overflow-y-auto max-h-[50vh]",children:[n.map(Y=>{const R=Y.visibility==="private",S=Y.ownerId===r;return O.jsxs("button",{onClick:()=>l(Y.id),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors text-left",children:[O.jsx("span",{className:"text-xl",children:Y.emoji||""}),O.jsx("span",{className:"flex-1 text-sm font-medium text-gray-900",children:Y.name}),R&&S&&O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Y.type==="checklist"&&O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})]},Y.id)}),O.jsxs("button",{onClick:()=>d(!0),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors text-left border-t border-gray-200",children:[O.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-100 flex items-center justify-center",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})}),O.jsx("span",{className:"text-sm font-medium text-indigo-600",children:"Create New List"})]})]})]})})})}function Bz({isOpen:e,lists:t,currentUserId:n,onClose:r,onGetListItems:a,onToggleCompleted:l,onRemoveFromList:c,onDeleteList:f,onNavigateToMessage:d}){const[p,y]=M.useState(null),[_,E]=M.useState([]),[A,D]=M.useState(!1),[b,x]=M.useState(null);M.useEffect(()=>{p&&(D(!0),a(p.id).then(E).catch(console.error).finally(()=>D(!1)))},[p,a]);const V=M.useCallback(async R=>{if(await l(R),p){const S=await a(p.id);E(S)}},[p,l,a]),P=M.useCallback(async R=>{if(!p)return;await c(p.id,R);const S=await a(p.id);E(S)},[p,c,a]),k=M.useCallback(async R=>{await f(R),y(null),x(null)},[f]),K=M.useCallback(R=>{d(R),r()},[d,r]),q=M.useCallback(()=>{y(null),E([]),x(null),r()},[r]),Y=R=>R?(R.toDate?R.toDate():new Date(R)).toLocaleDateString([],{month:"short",day:"numeric"}):"";return O.jsx(El,{children:e&&O.jsx(Nn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end justify-center bg-black/50",onClick:q,children:O.jsxs(Nn.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"bg-white rounded-t-2xl shadow-xl w-full max-w-lg h-[85vh] overflow-hidden flex flex-col",onClick:R=>R.stopPropagation(),children:[O.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200 flex-shrink-0",children:[O.jsxs("div",{className:"flex items-center gap-2",children:[p&&O.jsx("button",{onClick:()=>{y(null),E([])},className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),O.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:p?O.jsxs("span",{className:"flex items-center gap-2",children:[O.jsx("span",{children:p.emoji||""}),O.jsx("span",{children:p.name})]}):"Lists"})]}),O.jsx("button",{onClick:q,className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),O.jsx("div",{className:"flex-1 overflow-y-auto",children:p?A?O.jsx("div",{className:"flex items-center justify-center py-12",children:O.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}):_.length===0?O.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[O.jsx("div",{className:"w-12 h-12 mb-3 bg-gray-100 rounded-full flex items-center justify-center",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),O.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No items yet"}),O.jsx("p",{className:"text-xs text-gray-500",children:"Long-press messages to add them here"})]}):O.jsx("div",{className:"divide-y divide-gray-100",children:_.map(R=>O.jsxs("div",{className:"flex items-start gap-3 px-4 py-3",children:[p.type==="checklist"&&O.jsx("button",{onClick:()=>V(R.id),className:`flex-shrink-0 w-5 h-5 mt-0.5 rounded-full border-2 transition-colors ${R.completed?"bg-indigo-600 border-indigo-600":"border-gray-300 hover:border-indigo-400"}`,children:R.completed&&O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),O.jsxs("button",{onClick:()=>R.message&&K(R.messageId),className:`flex-1 text-left min-w-0 ${R.completed?"opacity-50":""}`,children:[O.jsx("p",{className:`text-sm text-gray-900 ${R.completed?"line-through":""}`,children:R.message?.content||(R.message?.imageUrl?"(drawing)":"Deleted message")}),O.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["Added ",Y(R.addedAt)]})]}),O.jsx("button",{onClick:()=>P(R.messageId),className:"flex-shrink-0 p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},R.id))}):t.length===0?O.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[O.jsx("div",{className:"w-12 h-12 mb-3 bg-gray-100 rounded-full flex items-center justify-center",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),O.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No lists yet"}),O.jsx("p",{className:"text-xs text-gray-500",children:"Long-press a message to create your first list"})]}):O.jsx("div",{className:"divide-y divide-gray-100",children:t.map(R=>{const S=R.ownerId===n,N=R.visibility==="private";return O.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[O.jsxs("button",{onClick:()=>y(R),className:"flex-1 flex items-center gap-3 text-left min-w-0",children:[O.jsx("span",{className:"text-xl",children:R.emoji||""}),O.jsxs("div",{className:"flex-1 min-w-0",children:[O.jsxs("div",{className:"flex items-center gap-1.5",children:[O.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:R.name}),N&&S&&O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-3.5 h-3.5 text-gray-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]}),O.jsx("p",{className:"text-xs text-gray-400",children:R.type==="checklist"?"Checklist":"Collection"})]})]}),S&&O.jsx(O.Fragment,{children:b===R.id?O.jsxs("div",{className:"flex items-center gap-1",children:[O.jsx("button",{onClick:()=>x(null),className:"px-2 py-1 text-xs text-gray-600 hover:bg-gray-100 rounded",children:"Cancel"}),O.jsx("button",{onClick:()=>k(R.id),className:"px-2 py-1 text-xs text-white bg-red-500 hover:bg-red-600 rounded",children:"Delete"})]}):O.jsx("button",{onClick:()=>x(R.id),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",children:O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:O.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},R.id)})})})]})})})}function zz(){const{user:e}=Bc(),{messages:t,loading:n,loadingMore:r,hasMore:a,loadMore:l,sendMessage:c,sendDrawing:f,toggleLike:d}=fz(e?.uid),{lists:p,createList:y,addMessageToList:_,removeFromList:E,deleteList:A,toggleItemCompleted:D,getListItems:b}=mz(e?.uid),[x,V]=M.useState(null),[P,k]=M.useState(!1),[K,q]=M.useState(!1),[Y,R]=M.useState(!1),[S,N]=M.useState(null),[U,B]=M.useState(null),[H,L]=M.useState(null),[Xt,he]=M.useState(null);M.useEffect(()=>{if(!e||t.length===0)return;const ut=t.find(Et=>Et.senderId!==e.uid)?.senderId;return ut?h0(In(ue,"duoboard_users",ut),Et=>{Et.exists()&&V({uid:Et.id,...Et.data()})},Et=>console.error("Error fetching other user:",Et)):void 0},[e,t]);const tt=M.useCallback(async ut=>{try{await c(ut,S?.id),N(null)}catch(gt){console.error("Failed to send message:",gt)}},[c,S]),ot=M.useCallback(async ut=>{try{await f(ut,S?.id),N(null)}catch(gt){console.error("Failed to send drawing:",gt)}},[f,S]),ft=M.useCallback(async ut=>{L(ut),await d(ut),setTimeout(()=>L(null),600)},[d]),It=M.useCallback(ut=>{N(ut)},[]),Dt=M.useCallback(ut=>{B(ut),q(!0)},[]),F=M.useCallback(async ut=>{U&&(await _(ut,U.id),q(!1),B(null))},[U,_]),it=M.useCallback(async(ut,gt,Et,Ot)=>y(ut,gt,Et,Ot),[y]),lt=M.useCallback(ut=>{he(ut),R(!1)},[]);return e?O.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[O.jsx(gz,{onListsClick:()=>R(!0)}),O.jsx(kz,{messages:t,currentUser:e,otherUser:x,onDoubleTap:ft,onSwipeReply:It,onLongPress:Dt,likeAnimatingMessageId:H,loading:n,loadingMore:r,hasMore:a,onLoadMore:l,scrollToMessageId:Xt,onScrollToMessageComplete:()=>he(null)}),O.jsx(Ez,{onSend:tt,onDrawClick:()=>k(!0),replyingTo:S,onCancelReply:()=>N(null)}),O.jsx(Lz,{isOpen:P,onClose:()=>k(!1),onSend:ot}),O.jsx(jz,{isOpen:K,message:U,lists:p,currentUserId:e.uid,onClose:()=>{q(!1),B(null)},onSelectList:F,onCreateList:it}),O.jsx(Bz,{isOpen:Y,lists:p,currentUserId:e.uid,onClose:()=>R(!1),onGetListItems:b,onToggleCompleted:D,onRemoveFromList:E,onDeleteList:A,onNavigateToMessage:lt})]}):null}function Fz({children:e}){const{user:t,loading:n}=Bc();return n?O.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:O.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"})}):t?O.jsx(O.Fragment,{children:e}):O.jsx(lv,{to:"/login",replace:!0})}function Hz({children:e}){const{user:t,loading:n}=Bc();return n?O.jsx("div",{className:"h-full flex items-center justify-center bg-gray-50",children:O.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"})}):t?O.jsx(lv,{to:"/",replace:!0}):O.jsx(O.Fragment,{children:e})}function qz(){return O.jsxs(xN,{children:[O.jsx(Pf,{path:"/login",element:O.jsx(Hz,{children:O.jsx(hz,{})})}),O.jsx(Pf,{path:"/",element:O.jsx(Fz,{children:O.jsx(zz,{})})}),O.jsx(Pf,{path:"*",element:O.jsx(lv,{to:"/",replace:!0})})]})}function Gz(){return O.jsx(WN,{children:O.jsx(U5,{children:O.jsx("div",{className:"h-full",children:O.jsx(qz,{})})})})}LD.createRoot(document.getElementById("root")).render(O.jsx(M.StrictMode,{children:O.jsx(Gz,{})}));
